<!--Page Wrapper-->
<div class="page-wrapper">
    <!--Marquee Text-->
    <div class="topbar-slider clearfix">
        <div class="container-fluid">
            <div class="marquee-text">
                <div class="top-info-bar d-flex">
                    <div class="flex-item center">
                        <a href="#">
                            <span> <i class="anm anm-worldwide"></i> BUY ONLINE PICK UP IN STORE</span>
                            <span> <i class="anm anm-truck-l"></i> FREE WORLDWIDE SHIPPING ON ALL ORDERS ABOVE $100</span>
                            <span> <i class="anm anm-redo-ar"></i> EXTENDED RETURN UNTIL 30 DAYS</span>
                        </a>
                    </div>
                    <div class="flex-item center">
                        <a href="#">
                            <span> <i class="anm anm-worldwide"></i> BUY ONLINE PICK UP IN STORE</span>
                            <span> <i class="anm anm-truck-l"></i> FREE WORLDWIDE SHIPPING ON ALL ORDERS ABOVE $100</span>
                            <span> <i class="anm anm-redo-ar"></i> EXTENDED RETURN UNTIL 30 DAYS</span>
                        </a>
                    </div>
                    <div class="flex-item center">
                        <a href="#">
                            <span> <i class="anm anm-worldwide"></i> BUY ONLINE PICK UP IN STORE</span>
                            <span> <i class="anm anm-truck-l"></i> FREE WORLDWIDE SHIPPING ON ALL ORDERS ABOVE $100</span>
                            <span> <i class="anm anm-redo-ar"></i> EXTENDED RETURN UNTIL 30 DAYS</span>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!--End Marquee Text-->

    <!-- Loading -->
    <div *ngIf="loading" class="loading-spinner border d-flex vh-100 justify-content-center align-items-center">
        <div class="row">
            <div class="col-sm-2">
                <div class="sp sp-bars"></div>
            </div>
        </div>
    </div>
    <!-- End Loading -->

    <!-- Body Container -->
    <div id="page-content" [class.d-none]="loading"> 
        <!--Page Header-->
        <div class="page-header text-center d-none">
            <div class="container">
                <div class="row">
                    <div class="col-12 col-sm-12 col-md-12 col-lg-12 d-flex justify-content-between align-items-center">
                        <div class="page-title text-uppercase"><h1>Finalizar compra</h1></div>
                        <!--Breadcrumbs-->
                        <div class="breadcrumbs"><a href="index.html" title="Back to the home page">Lujandev.com</a><span class="main-title"><i class="icon anm anm-angle-right-l"></i>Finalizar compra</span></div>
                        <!--End Breadcrumbs-->
                    </div>
                </div>
            </div>
        </div>
        <div class="row-fluid header logo_menu pt-4">
            <a id="logo-menu-link"  [routerLink]="['/']" class="logo LogoOnsheShop logo_she "></a>
        </div>
        <!--End Page Header-->

        <!--Main Content-->
        <div class="container" >     
            <div class="row">
                <div class="col-12 col-sm-12 col-md-12 col-lg-12">  
                    <!--Nav step checkout-->
                    <div id="nav-tabs" class="step-checkout main-vertical-component clearfix">
                        <div class="row-fluid stepsCheckout">
                            <div class="span12" role="navigation">
                                <div class="row-fluid labelSteps" role="list">
                                    <div class="span3 margin " role="listitem" aria-current="false">
                                        Identifícate
                                    </div>
                                    <!-- <div class="span3 margin medium" role="listitem" aria-current="step"> -->
                                    <div class="span3 margin" [ngClass]="{'medium': !isLastStepActive && CURRENT_USER_AUTHENTICATED && listAddressClients.length > 0}" role="listitem" aria-current="step">
                                        Pedido de envío
                                    </div>
                                    <div class="span3 margin" [ngClass]="{'medium': isLastStepActive && CURRENT_USER_AUTHENTICATED && listAddressClients.length > 0}" role="listitem" aria-current="true">
                                        Métodos de pago
                                    </div>
                                    <!-- <div class="span3 margin " role="listitem" aria-current="false"> -->
                                    <div class="span3 margin" [ngClass]="{'medium': isLastStepActive && CURRENT_USER_AUTHENTICATED && listAddressClients.length > 0}" role="listitem" aria-current="step">
                                        Confirmación
                                    </div>
                                </div>
                            </div>
                            <div class="span12" aria-hidden="true">
                                <div class="row-fluid bolasSteps">
                                    <div class="span3 ">
                                        <div class="flechaSteps"></div>
                                    </div>
                                    <!-- <div class="span3 medium3"> -->
                                        <div class="span3" [ngClass]="{'medium2': !isLastStepActive && CURRENT_USER_AUTHENTICATED && listAddressClients.length > 0}">
                                        <div class="flechaSteps"></div>
                                    </div>
                                    <!-- <div class="span3 "> -->
                                    <div class="span3" [ngClass]="{ 'medium3': CURRENT_USER_AUTHENTICATED && listAddressClients.length > 0 && isLastStepActive}">
                                        <div class="flechaSteps"></div>
                                    </div>
                                    <div class="span3">
                                        <div class="flechaSteps"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!--End Nav step checkout-->

                    <!--Tab checkout content-->
                    <div class="tab-content checkout-form">
                        <div [ngClass]="{'tab-pane': true, 'active': !CURRENT_USER_AUTHENTICATED, 'fade': CURRENT_USER_AUTHENTICATED}" id="steps1">
                        <!-- <div class="tab-pane active" id="steps1"> -->
                            <div class="row">
                                <div class="col-12 col-sm-12 col-md-6 col-lg-6 mb-4 mb-md-0">
                                    <div class="block h-100">
                                        <div class="block-content">
                                            <h3 class="title">Comprobar como invitado o registrarse</h3>
                                            <p class="text-gray">Registrate con nosotros para futura conveniencia:</p>
                                            <ul class="list-unstyled radio-group mb-4">
                                                <li>
                                                    <div class="checkout customRadio">
                                                        <input type="radio" id="option-1" name="selector" checked="" />
                                                        <label for="option-1"> Pagar como invitado</label>
                                                    </div>
                                                </li>
                                                <li>
                                                    <div class="checkout customRadio">
                                                        <input type="radio" id="option-2" name="selector" />
                                                        <label for="option-2"> Registro</label>
                                                    </div>
                                                </li>
                                            </ul>

                                            <h3 class="title">Regístrate y ahorra tiempo !</h3>
                                            <p class="text-gray">Registrate con nosotras para futura conveniencia:</p>
                                            <ul class="lists-style1 text-gray mb-3">
                                                <li>Pago rápido y sencillo</li>
                                                <li>Fácil acceso a su historial y estado de pedidos</li>
                                            </ul>
                                            <button type="submit" name="Continue" class="btn btn-primary">Continuar</button>
                                            <button type="submit" name="Continue" class="btn btn-secondary ms-2 btnNext">Próxima dirección</button>
                                        </div>
                                    </div>
                                </div>

                                <div class="col-12 col-sm-12 col-md-6 col-lg-6">
                                    <div class="block h-100">
                                        <div class="block-content">
                                            <form method="post" action="#" class="login-form">	
                                                <h3 class="title">Ya registrado ?</h3>
                                                <p class="text-gray">Por favor, inicie sesión a continuación :</p>
                                                <div class="row">
                                                    <div class="col-12 form-group">
                                                        <label for="CustomerEmail" class="form-label">Dirección de correo electrónico <span class="required">*</span></label>
                                                        <input type="email" name="customer[email]" placeholder="" id="CustomerEmail" autofocus="" class="form-control">
                                                    </div>
                                                    <div class="col-12 form-group">
                                                        <label for="CustomerPassword" class="form-label">Contraseña <span class="required">*</span></label>
                                                        <input type="password" value="" name="customer[password]" placeholder="" id="CustomerPassword" class="form-control">                        	
                                                    </div>
                                                    <div class="col-12 form-group">
                                                        <div class="remember-me customCheckbox">
                                                            <input id="remember" name="remember" type="checkbox" value="remember me" required />
                                                            <label for="remember"> Acuérdate de mí</label>
                                                        </div>
                                                    </div>
                                                    <div class="col-12 d-flex justify-content-between align-items-center">
                                                        <input type="submit" class="btn" value="Iniciar sesión">
                                                        <a href="forgot-password.html" class="btn-link">¿Olvidaste tu contraseña?</a>
                                                    </div>
                                                </div>
                                            </form>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div [ngClass]="{'tab-pane': true,'active': !isLastStepActive && listAddressClients.length > 0,'fade': listAddressClients.length === 0}" id="steps2">
                            <div class="row">
                                <!-- List cart -->
                                <div class="col-12 col-sm-12 col-md-7 col-lg-12">
                                    <!--Order Summary-->
                                    <div class="block order-summary">
                                        <div class="block-content">
                                            <h3 class="title mb-3 text-center text-uppercase ls-3">Resumen del pedido</h3>
                                            <div class="table-responsive table-bottom-brd order-table"> 
                                                <table class="table table-hover align-middle mb-0">
                                                    <thead>
                                                        <tr>
                                                            <th class="action">&nbsp;</th>
                                                            <th class="text-start text-muted">Imagen</th>
                                                            <th class="text-start proName text-muted">Product</th>
                                                            <th class="text-center text-muted">Cantidad</th>
                                                            <th class="text-center text-muted">Precio</th>
                                                            <th class="text-center text-muted">Subtotal</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        <ng-container *ngFor="let cart of listCarts">
                                                            <tr>
                                                                <td class="text-center cart-delete"><a href="#" onclick="return false;" (click)="removeCart(cart)" class="btn btn-secondary cart-remove remove-icon position-static" data-bs-toggle="tooltip" data-bs-placement="top" title="Remove to Cart"><i class="icon anm anm-times-r"></i></a></td>
                                                                <td class="text-start">
                                                                    <a href="product-layout1.html" class="thumb">
                                                                        <img class="rounded-0 blur-up lazyload" onclick="return false;" [routerLink]="['/landing-product', cart.product.slug]" [attr.data-src]="cart.product.imagen" [src]="cart.product.imagen" alt="product" title="product" width="120" height="170" />
                                                                    </a>
                                                                </td>
                                                                <td class="text-start proName">
                                                                    <div class="list-view-item-title">
                                                                        <a href="product-layout1.html" onclick="return false;" [routerLink]="['/landing-product', cart.product.slug]">{{cart.product.title}}</a>
                                                                    </div>
                                                                    <div class="cart-meta-text">
                                                                        Color: {{cart.variedad.color}}<br>Talla: {{cart.variedad.valor}}
                                                                    </div>
                                                                </td>
                                                                <td class="text-center">{{ cart.cantidad }}</td>
                                                                <td class="text-center">{{ euro }}{{ cart.subtotal | number: '1.2-2' }}</td> <!--{{ euro }}{{ cart.total }} -->
                                                                <td class="text-center"><strong>{{ euro }}{{ cart.total | number: '1.2-2' }}</strong></td>
                                                            </tr>
                                                        </ng-container>
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                    <!--End Order Summary-->
                                </div>
                                <!-- Codigo de cupon y Total -->
                                <div class="col-12 col-sm-12 col-md-5 col-lg-12 py-5">
                                    <div class="row justify-content-center">
                                        <div class="col-12 col-sm-12 col-md-5 col-lg-4">
                                            <!--Apply Promocode-->
                                            <div class="block mb-3 apply-code mb-4">
                                                <div class="block-content">
                                                    <h3 class="title mb-3 ls-2">Aplicar código promocional</h3>
                                                    <div id="coupon" class="coupon-dec">
                                                        <p>¿Tienes un código promocional? Entonces estás a unos cuantos números y letras combinados al azar de obtener fabulosos ahorros!</p>
                                                        <div class="input-group mb-0 d-flex">
                                                            <input id="coupon-code" [(ngModel)]="code_cupon" required="" type="text" class="form-control" placeholder="Código de promoción">
                                                            <button class="coupon-btn btn btn-secondary" (click)="apllyCupon()" type="submit">Aplicar</button>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <!--End Apply Promocode-->
                                        </div>
                                        <div class="col-12 col-sm-12 col-md-5 col-lg-4">
                                            <!--Cart Summary-->
                                            
                                            <div class="cart-info mb-4">
                                                <h3 class="title mb-3 ls-2 text-uppercase">Resumen de Precio</h3>
                                                <div class="cart-order-detail cart-col">
                                                    
                                                    <div class="row g-0 border-bottom pb-2">
                                                        <span class="col-6 col-sm-6 cart-subtotal-title"><strong>Subtotal</strong></span>
                                                        <span class="col-6 col-sm-6 cart-subtotal-title cart-subtotal text-end"><span class="money">{{ euro }}{{totalCarts}} </span></span>
                                                    </div>
                                                    <div class="row g-0 border-bottom py-2 d-none">
                                                        <span class="col-6 col-sm-6 cart-subtotal-title"><strong>Coupon Discount</strong></span>
                                                        <span class="col-6 col-sm-6 cart-subtotal-title cart-subtotal text-end"><span class="money">-$25.00</span></span>
                                                    </div>
                                                    <div class="row g-0 border-bottom py-2 d-none">
                                                        <span class="col-6 col-sm-6 cart-subtotal-title"><strong>Tax</strong></span>
                                                        <span class="col-6 col-sm-6 cart-subtotal-title cart-subtotal text-end"><span class="money">$10.00</span></span>
                                                    </div>
                                                    <div class="row g-0 border-bottom py-2">
                                                        <span class="col-6 col-sm-6 cart-subtotal-title"><strong>Envío</strong></span>
                                                        <span class="col-6 col-sm-6 cart-subtotal-title cart-subtotal text-end"><span class="money">Envío gratis</span></span>
                                                    </div>
                                                    <div class="row g-0 pt-2">
                                                        <span class="col-6 col-sm-6 cart-subtotal-title fs-5 text-uppercase"><strong>Total</strong></span>
                                                        <span class="col-6 col-sm-6 cart-subtotal-title fs-5 cart-subtotal text-end"><b class="money">{{ euro }}{{ totalCarts | number: '1.2-2' }}</b></span>
                                                    </div>
                                                </div>                               
                                            </div>
                                            <!--Cart Summary-->
                                        </div>
                                    </div>
                                </div>
                                <!-- / End Codigo de cupon y Total -->
                                <!-- Address list -->
                                <div class="col-12 col-sm-12 col-md-5 col-lg-12">
                                    <!--Address-->
                                    <div class="dashboard-content h-100 mb-3" id="top-tabContent">
                                        <!-- Address Book -->
                                        <div class="tab-pane h-100" id="address">
                                            <div class="address-card mt-0 h-100">
                                                <ng-container *ngIf="listAddressClients.length == 0; else allShowListAddressClients">
                                                    <div class="d-flex justify-content-center align-items-center">
                                                        <div class="p-2 text-center d-flex flex-column">
                                                            <div class="inner mb-3">
                                                                <div class="bradcrumb-thumb">
                                                                    <img src="assets/images/favicon.png" alt="Image" style="width: 50px; height: 50px;">
                                                                </div>
                                                            </div>
                                                            <h5 class="header-title mb-0">Libreta de direcciones</h5>
                                                            <small class="mb-3">De momento ninguna dirección registrada</small>
                                                            <a href="" onclick="return false;" [routerLink]="['/myaddress/add']">
                                                                <button type="button" class="mt-3 btn btn-primary btn-lg px-5"> Añadir dirección</button>
                                                            </a>
                                                        </div>
                                                    </div>
                                                </ng-container>
                                                <ng-template #allShowListAddressClients>
                                                    <!-- Spinner -->
                                                    <div *ngIf="loading" class="loading-spinner d-flex justify-content-center h-100 align-items-center">
                                                        <div class="text-center">
                                                            <div class="spinner-border text-muted" role="status">
                                                              <span class="sr-only"></span>
                                                            </div>
                                                            <h4 class="text-muted">Cargando</h4>
                                                        </div>
                                                    </div>
                                                    
                                                    <!-- Mostrar la lista de direcciones -->
                                                    <div class="address-book-section" [class.d-none]="loading">
                                                        <div class="top-sec d-flex-justify-center justify-content-center mb-3" [class.d-none]="loading">
                                                            <h2 class="mb-0 text-uppercase ls-2">Dirección de envío</h2>
                                                        </div>
                                                        <div class="row g-4 row-cols-lg-3 row-cols-md-2 row-cols-sm-2 row-cols-1 justify-content-center">
                                                            <ng-container *ngFor="let list_address of listAddressClients; let i=index">
                                                                <div class="address-select-box active">
                                                                    <div class="address-box bg-block">
                                                                        <div class="top d-flex-justify-center justify-content-between mb-3">
                                                                            <h5 class="m-0 fw-bold">{{ list_address.name +' '+ list_address.surname }}</h5>
                                                                            <span class="product-labels start-auto end-0"><span class="lbl pr-label1">Casa</span></span>
                                                                        </div>
                                                                        <div class="middle">
                                                                            <div class="address">
                                                                                <p> {{ list_address.address }}</p>
                                                                            </div>
                                                                            <div class="address">
                                                                                <p> {{ list_address.zipcode }} {{ list_address.poblacion }}, <span class="text-uppercase">{{ list_address.ciudad }}</span> <br/></p>
                                                                            </div>
                                                                            <div class="address">
                                                                                <p>Tel. {{ list_address.phone }}</p>
                                                                            </div>
                                                                            <div class="form-text px-2 mt-3 text-dark" style="width: fit-content !important; background-color: #f3f3f3;">Dirección de envío habitual</div>
                                                                        </div>
                                                                        <div class="bottom d-flex-justify-center justify-content-between">
                                                                            <!-- <a href="#" onclick="return false;" [routerLink]="['/myaddress', list_address.id, 'edit']">
                                                                                <button type="button" class="bottom-btn btn btn-gray btn-sm">Añadir o editar dirección</button>
                                                                            </a> -->
                                                                            <button type="button" class="bottom-btn btn btn-gray btn-sm" (click)="addressClienteSelected(list_address)" data-bs-toggle="modal" data-bs-target="#addEditModal">Añadir o editar dirección</button>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </ng-container>
                                                        </div>
                                                    </div>
                                                </ng-template>

                                                <!-- Edit Address Modal -->
                                                <div class="modal fade" id="addEditModal" tabindex="-1" aria-labelledby="addEditModalLabel" aria-hidden="true">
                                                    <div class="modal-dialog modal-lg modal-dialog-centered">
                                                        <div class="modal-content">
                                                            <div class="modal-header justify-content-center border-0">
                                                                <h2 class="modal-title" id="addNewModalLabel">Editar dirección</h2>
                                                                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                                            </div>
                                                            <div class="modal-body border-0">
                                                                <fieldset>
                                                                    <!-- Nombre -->
                                                                    <div class="row justify-content-center">
                                                                        <div class="form-group col-12 col-sm-6 col-md-6 col-lg-8">
                                                                            <label for="firstname" class="form-label d-none">Nombre <span class="required">*</span></label>
                                                                            <input name="firstname" value="" id="firstname" type="text" [(ngModel)]="name" required="" placeholder="Nombre" class="form-control">
                                                                        </div>
                                                                    </div>
                                                                    <!-- Apellidos -->
                                                                    <div class="row justify-content-center">
                                                                        <div class="form-group col-12 col-sm-6 col-md-6 col-lg-8">
                                                                            <label for="lastname" class="form-label d-none">Apellidos <span class="required">*</span></label>
                                                                            <input name="lastname" value="" id="lastname" type="text" [(ngModel)]="surname" required="" placeholder="Aellidos" class="form-control">
                                                                        </div>
                                                                    </div>
                                                                    <!-- Pais -->
                                                                    <div class="row justify-content-center">
                                                                        <div class="form-group col-12 col-sm-6 col-md-6 col-lg-8">
                                                                            <label for="address_country1" class="form-label d-none">País <span class="required">*</span></label>
                                                                            <select id="address_country1" name="address[country]" [(ngModel)]="pais" data-default="United States" disabled class="form-control text-muted">
                                                                                <option value="0" label="Seleccione un país" selected="selected">Seleccione un país</option>
                                                                                <optgroup id="country-optgroup-Eu" label="Europe">
                                                                                    <option value="IT" label="Italy">Italy</option>
                                                                                    <option value="PT" label="Portugal">Portugal</option>
                                                                                    <option value="RO" label="Romania">Romania</option>
                                                                                    <option value="SPAIN" label="Spain">Spain</option>
                                                                                </optgroup>
                                                                            </select>
                                                                        </div>
                                                                    </div>
                                                                    <!-- Direccion -->
                                                                    <div class="row justify-content-center">
                                                                        <div class="form-group col-12 col-sm-6 col-md-6 col-lg-8">
                                                                            <label for="address-1" class="form-label d-none">Dirección <span class="required">*</span></label>
                                                                            <input name="address_1" value="" id="address-1" type="text" required="" [(ngModel)]="address" placeholder="Dirección" class="form-control">
                                                                        </div>
                                                                    </div>
                                                                    <!-- Codigo postal -->
                                                                    <div class="row justify-content-center">
                                                                        <div class="form-group col-12 col-sm-6 col-md-6 col-lg-8">
                                                                            <label for="postcode" class="form-label d-none">Código postal <span class="required">*</span></label>
                                                                            <input name="postcode" value="" id="postcode" type="text" class="form-control" [(ngModel)]="zipcode" placeholder="Código postal">
                                                                        </div>
                                                                    </div>
                                                                    <!-- Población -->
                                                                    <div class="row justify-content-center">
                                                                        <div class="form-group col-12 col-sm-6 col-md-6 col-lg-8">
                                                                            <label for="new-city" class="form-label d-none">Población <span class="required">*</span></label>
                                                                            <input name="city" placeholder="Población" value="" required="" [(ngModel)]="poblacion" id="new-city" type="text" />
                                                                        </div>
                                                                    </div>  
                                                                    <!-- Ciudad -->
                                                                    <div class="row justify-content-center">
                                                                        <div class="form-group col-12 col-sm-6 col-md-6 col-lg-8">
                                                                            <label for="address_State" class="form-label d-none">Ciudad <span class="required">*</span></label>
                                                                            <select id="address_State" name="address[State]" data-default="" [(ngModel)]="ciudad" class="form-control">
                                                                                <option value="0" label="Select a state" selected="selected">Provincia/Estado</option>
                                                                                <option value="Madrid">Madrid</option>
                                                                                <option value="New York">New York</option>
                                                                            </select>
                                                                        </div>
                                                                    </div>
                                                                    <!-- Email -->
                                                                    <div class="row justify-content-center">
                                                                        <div class="form-group col-12 col-sm-6 col-md-6 col-lg-8">
                                                                            <label for="email" class="form-label d-none">E-Mail <span class="required">*</span></label>
                                                                            <input name="email" value="" id="email" type="email" required="" [(ngModel)]="email"  placeholder="E-mail" disabled class="form-control text-muted text-uppercase">
                                                                        </div>
                                                                    </div>
                                                                    <!-- Telefono -->
                                                                    <div class="row justify-content-center">
                                                                        <div class="form-group col-12 col-sm-6 col-md-6 col-lg-8">
                                                                            <label for="phone" class="form-label d-none">Móvil <span class="required">*</span></label>
                                                                            <input name="phone" value="" id="phone" type="tel" required="" [(ngModel)]="phone"  placeholder="Móvil" class="form-control">
                                                                        </div>
                                                                    </div>
                            
                                                                    <div class="row justify-content-center mt-0 mb-3">
                                                                        <div class="form-group col-12 col-sm-6 col-md-6 col-lg-8">
                                                                            <p class="mt-3">Dirección de envío habitual</p> 
                                                                        </div>
                                                                    </div>
                                                                </fieldset>
                                                            </div>
                                                            <div class="modal-footer border-0 justify-content-center">
                                                                <div class="form-row row-cols-lg-1 row-cols-md-2 row-cols-sm-1 row-cols-1 text-center">
                                                                    <div class="form-group">
                                                                        <button type="submit" class="btn btn-primary" (click)="store()">
                                                                            <span>Guardar cambios</span>
                                                                        </button>
                                                                        <!-- <p class="mt-3" [ngClass]="status ? 'text-success' : 'text-danger'" *ngIf="this.validMessage && !status">{{ this.errorOrSuccessMessage }}</p>  -->
                                                                    </div>
                                                                </div>
                                                                
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <!-- End Edit Address Modal -->
                                            </div>
                                        </div>
                                        <!-- End Address Book -->
                                    </div>
                                    <!--End Address-->
                                </div>
                                <!-- / End Address list -->
                            </div>
                            <div class="d-flex justify-content-end">
                                <!-- <button type="button" class="btn btn-secondary me-1 btnPrevious">Volver</button> -->
                                <button type="button" class="btn btn-primary ms-1 btnNext" (click)="goToNextStep()">Continuar</button>
                            </div>
                        </div>
                        <div [ngClass]="{'tab-pane': true,'active': isLastStepActive && CURRENT_USER_AUTHENTICATED,'fade': listAddressClients.length === 0}" id="steps3">
                            <div class="row">
                                <div class="col-12 col-sm-12 col-md-7 col-lg-8">
                                    <!--Delivery Methods-->
                                    <div class="block mb-3 delivery-methods mb-4 d-none">
                                        <div class="block-content">
                                            <h3 class="title mb-3">Delivery Methods</h3>
                                            <div class="delivery-methods-content">
                                                <div class="customRadio clearfix">
                                                    <input id="formcheckoutRadio1" value="" name="radio1" type="radio" class="radio" checked="checked"> 
                                                    <label for="formcheckoutRadio1" class="mb-0">Standard Delivery $2.99 (3-5 days)</label>
                                                </div>
                                                <div class="customRadio clearfix">
                                                    <input id="formcheckoutRadio2" value="" name="radio1" type="radio" class="radio"> 
                                                    <label for="formcheckoutRadio2" class="mb-0">Express Delivery $10.99 (1-2 days)</label>
                                                </div>
                                                <div class="customRadio clearfix mb-0">
                                                    <input id="formcheckoutRadio3" value="" name="radio1" type="radio" class="radio"> 
                                                    <label for="formcheckoutRadio3" class="mb-0">Same-Day $20.00 (Evening Delivery)</label>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <!--End Delivery Methods-->
                                    <!--Shipping address-->
                                    <div class="block payment-methods pb-0">
                                        <div class="block-content">
                                            <h3 class="title mb-0 ls-2">Dirección de envío</h3>                                     
                                            <div class="payment-accordion-radio">
                                                <div class="accordion" id="accordionExample">
                                                    <div class="accordion-item card mb-2">
                                                        <div class="card-header d-none" id="headingShippingOne">
                                                            <button class="card-link" type="button" data-bs-toggle="collapse" data-bs-target="#collapseShippingOne" aria-expanded="true" aria-controls="collapseShippingOne">
                                                                <span class="customRadio clearfix mb-0">
                                                                    <input id="paymentRadioShipping1" value="" name="shipping" type="radio" class="radio" checked="checked" /> 
                                                                    <label for="paymentRadioShipping1" class="mb-0">Dirección de envío</label>
                                                                </span>
                                                            </button>
                                                        </div>
                                                        <div id="collapseShippingOne">
                                                            <div class="card-body px-0">
                                                                <fieldset>
                                                                    <div class="row">
                                                                        <div class="form-group col-12 col-sm-6 col-md-6 col-lg-6">
                                                                            <label>Envío Seleccionado <span class="required">*</span></label>
                                                                            <select name="country_id" class="form-control" (change)="onAddressChange($event)">
                                                                                <option value="">Por favor seleccione</option>
                                                                                <ng-container *ngFor="let list_address of listAddressClients; let i=index">
                                                                                    <option [value]="i">{{ list_address.name +' '+ list_address.surname +' | '+ list_address.address }}</option> 
                                                                                </ng-container>
                                                                            </select>
                                                                        </div>
                                                                    </div>
                                                                </fieldset>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <!--End Shipping address-->
                                    <!--Payment Methods-->
                                    <div class="mb-3 payment-methods mb-4">
                                        <div class="block-content">
                                            <!-- <h3 class="title mb-3">Payment Methods</h3> -->
                                            <div class="payment-accordion-radio">
                                                <div class="accordion" id="accordionExample">
                                                    <div class="accordion-item card mb-2 d-none">
                                                        <div class="card-header" id="headingOne">
                                                            <button class="card-link" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="false" aria-controls="collapseOne">
                                                                <span class="customRadio clearfix mb-0">
                                                                    <input id="paymentRadio1" value="" name="payment" type="radio" class="radio" checked="checked" /> 
                                                                    <label for="paymentRadio1" class="mb-0">Pay with credit card</label>
                                                                </span>
                                                            </button>
                                                        </div>
                                                        <div id="collapseOne" class="accordion-collapse collapse show" aria-labelledby="headingOne" data-bs-parent="#accordionExample">
                                                            <div class="card-body px-0">
                                                                <fieldset>
                                                                    <div class="row">
                                                                        <div class="form-group col-12 col-sm-6 col-md-6 col-lg-6">
                                                                            <label for="input-cardname">Name on Card <span class="required">*</span></label>
                                                                            <input name="cardname" value="" placeholder="" id="input-cardname" class="form-control" type="text" pattern="[0-9\-]*">
                                                                        </div>
                                                                        <div class="form-group col-12 col-sm-6 col-md-6 col-lg-6">
                                                                            <label>Credit Card Type <span class="required">*</span></label>
                                                                            <select name="country_id" class="form-control">
                                                                                <option value="">Please Select</option>
                                                                                <option value="1">American Express</option>
                                                                                <option value="2">Visa Card</option>
                                                                                <option value="3">Master Card</option>
                                                                                <option value="4">Discover Card</option>
                                                                            </select>
                                                                        </div>
                                                                    </div>
                                                                    <div class="row">
                                                                        <div class="form-group col-12 col-sm-4 col-md-4 col-lg-4">
                                                                            <label for="input-cardno">Credit Card Number  <span class="required">*</span></label>
                                                                            <input name="cardno" value="" placeholder="" id="input-cardno" class="form-control" type="text" pattern="[0-9\-]*">
                                                                        </div>
                                                                        <div class="form-group col-12 col-sm-4 col-md-4 col-lg-4">
                                                                            <label for="input-cvv">CVV Code <span class="required">*</span></label>
                                                                            <input name="cvv" value="" placeholder="" id="input-cvv" class="form-control" type="text" pattern="[0-9\-]*">
                                                                        </div>
                                                                        <div class="form-group col-12 col-sm-4 col-md-4 col-lg-4">
                                                                            <label>Expiration Date <span class="required">*</span></label>
                                                                            <input type="date" name="exdate" class="form-control">
                                                                        </div>
                                                                        <div class="form-group col-12 col-sm-4 col-md-4 col-lg-4 mb-0">
                                                                            <button class="btn btn-primary" type="submit">Submit</button>
                                                                        </div>
                                                                    </div>
                                                                </fieldset>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="accordion-item card mb-2 d-none">
                                                        <div class="card-header" id="headingTwo">
                                                            <button class="card-link" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                                                                <span class="customRadio clearfix mb-0">
                                                                    <input id="paymentRadio2" value="" name="payment" type="radio" class="radio" /> 
                                                                    <label for="paymentRadio2" class="mb-0">Pay with Paypal</label>
                                                                </span>
                                                            </button>
                                                        </div>
                                                        <div id="collapseTwo" class="accordion-collapse collapse" aria-labelledby="headingTwo" data-bs-parent="#accordionExample">
                                                            <div class="card-body px-0">
                                                                <p>Pay via PayPal you can pay with your credit card if you don't have a PayPal account.</p>
                                                                <div class="input-group mb-0 d-flex">
                                                                    <input type="text" class="form-control" placeholder="paypal@example.com" required="">
                                                                    <button class="btn btn-primary" type="submit">Pay 99.00 USD</button>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="accordion-item card mb-2 d-none">
                                                        <div class="card-header" id="headingThree">
                                                            <button class="card-link" type="button" data-bs-toggle="collapse" data-bs-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
                                                                <span class="customRadio clearfix mb-0">
                                                                    <input id="paymentRadio3" value="" name="payment" type="radio" class="radio" /> 
                                                                    <label for="paymentRadio3" class="mb-0">Cheque Payment</label>
                                                                </span>
                                                            </button>
                                                        </div>
                                                        <div id="collapseThree" class="accordion-collapse collapse" aria-labelledby="headingThree" data-bs-parent="#accordionExample">
                                                            <div class="card-body px-0">
                                                                <p>Please send your cheque to Store Name, Store Street, Store Town, Store State / County, Store Postcode.</p>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="accordion-item card mb-2 ">
                                                        <div class="row">
                                                            <div class="col-12 col-sm-12 col-md-7 col-lg-12">
                                                                <!--Order Summary-->
                                                                <div class="block order-summary">
                                                                    <div class="block-content">
                                                                        <h3 class="title mb-3 ls-2">Paquete</h3>
                                                                        <div class="table-responsive table-bottom-brd order-table"> 
                                                                            <table class="table table-hover align-middle mb-0">
                                                                                <thead>
                                                                                    <tr>
                                                                                        <th class="action">&nbsp;</th>
                                                                                        <th class="text-start text-muted">Image</th>
                                                                                        <th class="text-start proName text-muted">Producto</th>
                                                                                        <th class="text-center text-muted">Cantidad</th>
                                                                                        <th class="text-center text-muted">Precio</th>
                                                                                        <th class="text-center text-muted">Subtotal</th>
                                                                                    </tr>
                                                                                </thead>
                                                                                <tbody>
                                                                                    <ng-container *ngFor="let cart of listCarts">
                                                                                        <tr>
                                                                                            <td class="text-center cart-delete">
                                                                                                <a href="#" onclick="return false;" (click)="removeCart(cart)" class="btn btn-secondary cart-remove remove-icon position-static" data-bs-toggle="tooltip" data-bs-placement="top" title="Remove to Cart"><i class="icon anm anm-times-r"></i></a>
                                                                                            </td>
                                                                                            <td class="text-start">
                                                                                                <a href="product-layout1.html" onclick="return false;" [routerLink]="['/landing-product', cart.product.slug]" class="thumb">
                                                                                                    <img class="blur-up lazyload" [attr.data-src]="cart.variedad.files[1].preview_url" [src]="cart.variedad.files[1].preview_url" alt="product" title="Product" width="120" height="170" />
                                                                                                </a>
                                                                                            </td>
                                                                                            <td class="text-start proName">
                                                                                                <div class="list-view-item-title">
                                                                                                    <a href="product-layout1.html" onclick="return false;" [routerLink]="['/landing-product', cart.product.slug]" >{{cart.product.title}}</a>
                                                                                                </div>
                                                                                                <div class="cart-meta-text">
                                                                                                    Color: {{ cart.variedad.color }}<br>Talla: {{cart.variedad.valor}}
                                                                                                </div>
                                                                                            </td>
                                                                                            <td class="text-center">{{ cart.cantidad }}</td>
                                                                                            <td class="text-center">{{ euro }}{{ cart.subtotal | number: '1.2-2' }}</td> <!--{{ euro }}{{ cart.total }} -->
                                                                                            <td class="text-center"><strong>{{ euro }}{{ cart.total | number: '1.2-2' }}</strong></td>
                                                                                        </tr>
                                                                                    </ng-container>
                                                                                </tbody>
                                                                            </table>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <!--End Order Summary-->
                                                            </div>
                                                        </div>
                                                        <!-- <div class="card-header" id="headingFour">
                                                            <button class="card-link" type="button" data-bs-toggle="collapse" data-bs-target="#collapseFour" aria-expanded="false" aria-controls="collapseFour">
                                                                <span class="customRadio clearfix mb-0">
                                                                    <input id="paymentRadio4" value="" name="payment" type="radio" class="radio" /> 
                                                                    <label for="paymentRadio4" class="mb-0">Cash On Delivery</label>
                                                                </span>
                                                            </button>
                                                        </div>
                                                        <div id="collapseFour" class="accordion-collapse collapse" aria-labelledby="headingFour" data-bs-parent="#accordionExample"> 
                                                            <div class="card-body px-0">
                                                                <p>Cash on delivery refers to an arrangement in which payment for a purchase is made directly by the purchaser to the person who delivers the item.</p>
                                                            </div>
                                                        </div> -->
                                                    </div>
                                                    <!-- <div class="accordion-item card mb-0 d-none">
                                                        <div class="card-header" id="headingFive">
                                                            <button class="card-link" type="button" data-bs-toggle="collapse" data-bs-target="#collapseFive" aria-expanded="true" aria-controls="collapseFive">
                                                                <span class="customRadio clearfix mb-0">
                                                                    <input id="paymentRadio5" value="" name="payment" type="radio" class="radio" checked="checked" /> 
                                                                    <label for="paymentRadio5" class="mb-0">Paypal / Tarjeta de Crédito o Débito</label>
                                                                </span>
                                                            </button>
                                                        </div>
                                                        <div id="collapseFive" class="accordion-collapse collapse show" aria-labelledby="headingFive" data-bs-parent="#accordionExample"> 
                                                            <div class="card-body px-0">
                                                                <p>Pague a través de PayPal; Puedes pagar con tu tarjeta de crédito si no tienes una cuenta PayPal.</p>
                                                                <div class="mt-3" #paypal></div>
                                                            </div>
                                                        </div>
                                                    </div> -->
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <!--End Payment Methods-->
                                </div>
                                <div class="col-12 col-sm-12 col-md-5 col-lg-4">
                                    <!--Cart Summary-->
                                    <div class="cart-info">
                                        <div class="cart-order-detail cart-col">
                                            <div class="row g-0 border-bottom pb-2">
                                                <span class="col-6 col-sm-6 cart-subtotal-title"><strong>Subtotal</strong></span>
                                                <span class="col-6 col-sm-6 cart-subtotal-title cart-subtotal text-end"><span class="money">{{ euro }}{{ totalCarts }}</span></span>
                                            </div>
                                            <div class="row g-0 border-bottom py-2 d-none">
                                                <span class="col-6 col-sm-6 cart-subtotal-title"><strong>Coupon Discount</strong></span>
                                                <span class="col-6 col-sm-6 cart-subtotal-title cart-subtotal text-end"><span class="money">-$25.00</span></span>
                                            </div>
                                            <div class="row g-0 border-bottom py-2 d-none">
                                                <span class="col-6 col-sm-6 cart-subtotal-title"><strong>Tax</strong></span>
                                                <span class="col-6 col-sm-6 cart-subtotal-title cart-subtotal text-end"><span class="money">$10.00</span></span>
                                            </div>
                                            <div class="row g-0 border-bottom py-2">
                                                <span class="col-6 col-sm-6 cart-subtotal-title"><strong>Envío</strong></span>
                                                <span class="col-6 col-sm-6 cart-subtotal-title cart-subtotal text-end"><span class="money">Envío gratis</span></span>
                                            </div>
                                            <div class="row g-0 pt-2">
                                                <span class="col-6 col-sm-6 cart-subtotal-title fs-5 ls-1 text-uppercase"><strong>Total</strong></span>
                                                <span class="col-6 col-sm-6 cart-subtotal-title fs-5 cart-subtotal text-end"><b class="money">{{ euro }}{{ totalCarts }}</b></span>
                                            </div>
                                            <div class="mt-3" #paypal></div>
                                            <div class="paymnet-img text-center"><img src="assets/images/icons/safepayment.png" alt="Payment" width="299" height="28" /></div>
                                        </div>                               
                                    </div>
                                    <!--Cart Summary-->
                                </div>
                            </div>
                        </div>
                        <div class="tab-pane" id="steps4">
                            <h1>Success order</h1>
                        </div>
                    </div>
                    <!--End Tab checkout content-->
                </div>
            </div>
        </div>
        <!--End Main Content-->
    </div>
    <!-- End Body Container -->

    <!--Scoll Top-->
    <div id="site-scroll"><i class="icon anm anm-arw-up"></i></div>
    <!--End Scoll Top-->

</div>
<!--End Page Wrapper-->