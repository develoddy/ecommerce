<!--Page Wrapper-->
<div class="page-wrapper">
    <!-- Loading -->
    <div *ngIf="loader.loading$ | async" class="loading-spinner border d-flex vh-100 justify-content-center align-items-center">
        <div class="row">
            <div class="col col-12 col-lg-12 col-sm-2">
            <div class="sp sp-bars"></div>
            </div>
        </div>
    </div>
    <!-- End Loading -->

    <!-- Body Container -->
    <!-- <div id="page-content" [class.d-none]="loader.loading$ | async"> -->
    <div id="page-content">

        <!--Main Content-->
        <div class="container">
            <div class="row">
                <div class="col-12 col-sm-12 col-md-12 col-lg-12">
                    <!--Nav step checkout-->
                    <ng-container *ngIf="isCheckoutNavVisible">
                        <div class="checkout-stepper" style="background: linear-gradient(to bottom, #f8f9fa 0%, #ffffff 100%); padding: 2rem 0rem; border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.05);">
                            <div class="container">
                                <div class="row justify-content-center align-items-center position-relative" style="max-width: 800px; margin: 0 auto;">
                                    
                                    <!-- Línea de progreso -->
                                    <div class="position-absolute w-100" style="height: 3px; background-color: #e9ecef; top: 50%; transform: translateY(-50%); z-index: 0; left: 0; right: 0;">
                                        <div class="progress-line" 
                                             [style.width]="currentStep === 'resumen' ? '0%' : currentStep === 'payment' ? '50%' : '100%'"
                                             style="height: 100%; background: linear-gradient(90deg, #28a745 0%, #20c997 100%); transition: width 0.5s ease;"></div>
                                    </div>

                                    <!-- Step 1: Envío -->
                                    <div class="col-4 text-center position-relative" style="z-index: 1;">
                                        <div class="step-wrapper">
                                            <div class="step-circle d-flex align-items-center justify-content-center mx-auto mb-2"
                                                 [style.background-color]="currentStep === 'resumen' || currentStep === 'payment' || currentStep === 'successfull' ? '#28a745' : '#ffffff'"
                                                 [style.border]="currentStep === 'resumen' || currentStep === 'payment' || currentStep === 'successfull' ? '3px solid #28a745' : '3px solid #dee2e6'"
                                                 style="width: 56px; height: 56px; border-radius: 50%; transition: all 0.3s ease; cursor: pointer;"
                                                 (click)="currentStep !== 'resumen' && navigateToStep('resumen')">
                                                <i class="icon anm anm-truck-l" 
                                                   [style.color]="currentStep === 'resumen' || currentStep === 'payment' || currentStep === 'successfull' ? '#ffffff' : '#6c757d'"
                                                   style="font-size: 1.5rem; transition: color 0.3s ease;"></i>
                                            </div>
                                            <div class="step-label fw-semibold"
                                                 [style.color]="currentStep === 'resumen' ? '#222' : '#6c757d'"
                                                 style="font-size: 0.95rem; letter-spacing: 0.3px; transition: color 0.3s ease;">
                                                Envío
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Step 2: Pago -->
                                    <div class="col-4 text-center position-relative" style="z-index: 1;">
                                        <div class="step-wrapper">
                                            <div class="step-circle d-flex align-items-center justify-content-center mx-auto mb-2"
                                                 [style.background-color]="currentStep === 'payment' || currentStep === 'successfull' ? '#28a745' : '#ffffff'"
                                                 [style.border]="currentStep === 'payment' || currentStep === 'successfull' ? '3px solid #28a745' : '3px solid #dee2e6'"
                                                 style="width: 56px; height: 56px; border-radius: 50%; transition: all 0.3s ease; cursor: pointer;"
                                                 (click)="currentStep === 'successfull' && navigateToStep('payment')">
                                                <i class="icon anm anm-credit-card-l" 
                                                   [style.color]="currentStep === 'payment' || currentStep === 'successfull' ? '#ffffff' : '#6c757d'"
                                                   style="font-size: 1.5rem; transition: color 0.3s ease;"></i>
                                            </div>
                                            <div class="step-label fw-semibold"
                                                 [style.color]="currentStep === 'payment' ? '#222' : '#6c757d'"
                                                 style="font-size: 0.95rem; letter-spacing: 0.3px; transition: color 0.3s ease;">
                                                Pago
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Step 3: Confirmación -->
                                    <div class="col-4 text-center position-relative" style="z-index: 1;">
                                        <div class="step-wrapper">
                                            <div class="step-circle d-flex align-items-center justify-content-center mx-auto mb-2"
                                                 [style.background-color]="currentStep === 'successfull' ? '#28a745' : '#ffffff'"
                                                 [style.border]="currentStep === 'successfull' ? '3px solid #28a745' : '3px solid #dee2e6'"
                                                 style="width: 56px; height: 56px; border-radius: 50%; transition: all 0.3s ease;">
                                                <i class="icon anm anm-check-cil" 
                                                   [style.color]="currentStep === 'successfull' ? '#ffffff' : '#6c757d'"
                                                   style="font-size: 1.5rem; transition: color 0.3s ease;"></i>
                                            </div>
                                            <div class="step-label fw-semibold"
                                                 [style.color]="currentStep === 'successfull' ? '#222' : '#6c757d'"
                                                 style="font-size: 0.95rem; letter-spacing: 0.3px; transition: color 0.3s ease;">
                                                Confirmación
                                            </div>
                                        </div>
                                    </div>

                                </div>
                            </div>
                        </div>
                    </ng-container>
                    <!--End Nav step checkout-->


                    <!--Tab checkout content-->
                    <div class="tab-content checkout-form">
                        <router-outlet></router-outlet>
                        <!-- <router-outlet (activate)="onActivate($event)"></router-outlet> -->
                    </div>
                    <!--End Tab checkout content-->
                </div>
            </div>
        </div>
        <!--End Main Content-->
    </div>
    <!-- End Body Container -->

    <!--Scoll Top-->
    <div id="site-scroll"><i class="icon anm anm-arw-up"></i></div>
    <!--End Scoll Top-->

</div>
<!--End Page Wrapper-->