<!-- LOADING -->
<!-- 
<div *ngIf="!loading || isLoadingStripe" class="loading-spinner border d-flex vh-100 justify-content-center align-items-center">
  <div class="row">
    <div class="col col-12 col-lg-12 col-sm-2">
      <div class="sp sp-bars"></div>
    </div>
  </div>
</div> 
-->
<!-- END LOADING -->

<div id="steps3">



  <div class="row p-lg-5">
    <!-- ======== Columna de la izquierda ======== -->
    <div
      class="col-12 col-sm-12 col-md-7 col-lg-8 order-1 order-md-1"
      id="main-left"
    >
      <!--Delivery Methods-->
      <div class="block mb-3 delivery-methods mb-4 d-none">
        <div class="block-content">
          <h3 class="title mb-3">Delivery Methods</h3>
          <div class="delivery-methods-content">
            <div class="customRadio clearfix">
              <input
                id="formcheckoutRadio1"
                value=""
                name="radio1"
                type="radio"
                class="radio"
                checked="checked"
              />
              <label for="formcheckoutRadio1" class="mb-0"
                >Standard Delivery $2.99 (3-5 days)</label
              >
            </div>
            <div class="customRadio clearfix">
              <input
                id="formcheckoutRadio2"
                value=""
                name="radio1"
                type="radio"
                class="radio"
              />
              <label for="formcheckoutRadio2" class="mb-0"
                >Express Delivery $10.99 (1-2 days)</label
              >
            </div>
            <div class="customRadio clearfix mb-0">
              <input
                id="formcheckoutRadio3"
                value=""
                name="radio1"
                type="radio"
                class="radio"
              />
              <label for="formcheckoutRadio3" class="mb-0"
                >Same-Day $20.00 (Evening Delivery)</label
              >
            </div>
          </div>
        </div>
      </div>

      <!--Shipping address-->
      <div class="block payment-methods pb-0 mb-4 p-0">
        <div class="block-content">
          <h3 class="title mb-0 text-uppercase d-none">Dirección de envío</h3>
          <div class="payment-accordion-radio d-none">
            <div class="accordion" id="accordionExample">
              <div class="accordion-item card mb-2">
                <div class="card-header d-none" id="headingShippingOne">
                  <button
                    class="card-link"
                    type="button"
                    data-bs-toggle="collapse"
                    data-bs-target="#collapseShippingOne"
                    aria-expanded="true"
                    aria-controls="collapseShippingOne"
                  >
                    <span class="customRadio clearfix mb-0">
                      <input
                        id="paymentRadioShipping1"
                        value=""
                        name="shipping"
                        type="radio"
                        class="radio"
                        checked="checked"
                      />
                      <label for="paymentRadioShipping1" class="mb-0"
                        >Dirección de envío</label
                      >
                    </span>
                  </button>
                </div>
                <div id="collapseShippingOne">
                  <div class="card-body px-0">
                    <fieldset>
                      <div class="row">
                        <div
                          class="form-group col-12 col-sm-6 col-md-6 col-lg-6"
                        >
                          <label
                            >Envío Seleccionado
                            <span class="required">*</span></label
                          >
                          <select
                            name="country_id"
                            class="form-control rounded"
                            (change)="onAddressChange($event)"
                          >
                            <option value="">Por favor seleccione</option>
                            <!-- <ng-container *ngFor="let list_address of listAddressClients; let i=index"> -->
                            <ng-container
                              *ngFor="
                                let list_address of listAddresses;
                                let i = index
                              "
                            >
                              <option [value]="i">
                                {{
                                  list_address.name +
                                    " " +
                                    list_address.surname +
                                    " | " +
                                    list_address.address
                                }}
                              </option>
                            </ng-container>
                          </select>
                          <div
                            class="form-text text-danger mt-0"
                            *ngIf="validMessage"
                          >
                            {{ errorOrSuccessMessage }}
                          </div>
                        </div>
                      </div>
                    </fieldset>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Mostrar la lista de direcciones -->
          <div
            class="address-book-section"
            [class.d-none]="loading"
            *ngIf="this.selectedAddress"
          >
            <!-- <div class="address-book-section" [class.d-none]="loading"> -->
            <div class="top-sec mb-3">
              <h3 class="mb-0 text-uppercase">
                Dirección de envío
              </h3>
            </div>
            <div class="row">
              <!-- Direcciones de usuarios autenticados -->
              <!-- <ng-container *ngFor="let list_address of listAddressClients; let i=index"> -->
              <div class="address-select-box active">
                <div class="address-box border p-4">
                  <div class="d-flex flex-row justify-content-between">
                    <div class="d-flex flex-row">
                      <span class="d-flex flex-row">
                        <svg
                          width="24"
                          height="24"
                          aria-hidden="true"
                          class="Icon_icon-content-1__kPDLF"
                          xmlns="http://www.w3.org/2000/svg"
                          xml:space="preserve"
                          viewBox="0 0 24 24"
                        >
                          <path
                            d="M19 20V9.3l.7.5.6-.8L12 2.9 9 5.1V3H6v4.3L3.7 9l.6.8.7-.5V20H3v1h18v-1zM7 4h1v1.8l-1 .8zM6 8.6l6-4.4 6 4.4V12H6zM11 20v-4h2v4zm-1-5v5H6v-7h12v7h-4v-5z"
                          ></path>
                          <path
                            d="M12 7c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m0 3c-.6 0-1-.4-1-1s.4-1 1-1 1 .4 1 1-.4 1-1 1"
                          ></path>
                        </svg>
                      </span>
                      <span class="px-2 fw-bold">Domicilio</span>
                      <span class="fw-bold">GRATIS</span>
                    </div>
                    <div>
                      <!-- <button type="button" class="bottom-btn btn btn-gray btn-sm" (click)="addressClienteSelected(selectedAddress)" data-bs-toggle="modal" data-bs-target="#addEditModal">Editar</button> -->
                      <button
                        type="button"
                        class="btn-dark-ld text-uppercase"
                        (click)="gotoResumen()"
                      >
                        Editar
                      </button>
                    </div>
                  </div>
                  <div class="mb-3">
                    <p>
                      <span class="fw-bold">Entrega:</span
                      ><time datetime="2025-4-9" class="ms-1"
                        >viernes, 9 may</time
                      >
                      - <time datetime="2025-4-14">miércoles, 14 may</time>
                    </p>
                  </div>
                  <div
                    class="top d-flex-justify-center justify-content-between"
                  >
                    <p class="m-0">
                      {{ selectedAddress.name + " " + selectedAddress.surname }}
                    </p>
                    <span class="product-labels start-auto end-0 d-none"
                      ><span class="lbl pr-label1">Casa</span></span
                    >
                  </div>
                  <div class="middle lh-1">
                    <div class="address mb-1">
                      <p class="fw-light">{{ selectedAddress.email }}</p>
                    </div>

                    <div class="address mb-1">
                      <p class="fw-light">
                        Tel. +34 {{ selectedAddress.phone }}
                      </p>
                    </div>
                    <div class="address mb-1">
                      <p class="fw-light">
                        {{
                          selectedAddress.address +
                            ", " +
                            selectedAddress.zipcode +
                            ", " +
                            selectedAddress.ciudad +
                            ", " +
                            selectedAddress.poblacion
                        }}
                      </p>
                    </div>
                    <div class="address mb-1 d-none">
                      <p class="fw-light">
                        {{ selectedAddress.zipcode }}
                        {{ selectedAddress.poblacion }},
                        <span class="text-uppercase">{{
                          selectedAddress.ciudad
                        }}</span
                        ><br />
                      </p>
                    </div>
                    <div
                      class="form-text p-1 px-3 mt-3 text-dark"
                      style="
                        width: fit-content !important;
                        background-color: #f3f3f3;
                      "
                      *ngIf="selectedAddress.usual_shipping_address"
                    >
                      Dirección de envío habitual
                    </div>
                  </div>
                </div>
              </div>
              <!-- </ng-container> -->

              <!-- Direcciones de usuarios invitados -->
              <!--<ng-container *ngFor="let list_address of listAddressGuest; let i = index">
                <div class="address-select-box active">
                  <div class="address-box bg-block">
                    <div class="mb-3 d-flex flex-row">
                      <span class="d-flex flex-row">
                        <svg
                          width="24"
                          height="24"
                          aria-hidden="true"
                          class="Icon_icon-content-1__kPDLF"
                          xmlns="http://www.w3.org/2000/svg"
                          xml:space="preserve"
                          viewBox="0 0 24 24"
                        >
                          <path
                            d="M19 20V9.3l.7.5.6-.8L12 2.9 9 5.1V3H6v4.3L3.7 9l.6.8.7-.5V20H3v1h18v-1zM7 4h1v1.8l-1 .8zM6 8.6l6-4.4 6 4.4V12H6zM11 20v-4h2v4zm-1-5v5H6v-7h12v7h-4v-5z"
                          ></path>
                          <path
                            d="M12 7c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m0 3c-.6 0-1-.4-1-1s.4-1 1-1 1 .4 1 1-.4 1-1 1"
                          ></path>
                        </svg>
                      </span>
                      <span class="px-2">Domicilio</span>
                      <span class="">GRATIS</span>
                    </div>
                    <div
                      class="top d-flex-justify-center justify-content-between mb-3"
                    >
                      <h5 class="m-0 fw-bold text-uppercase">
                        {{ list_address.name + " " + list_address.surname }}
                      </h5>
                      <span class="product-labels start-auto end-0 d-none"
                        ><span class="lbl pr-label1">Casa</span></span
                      >
                    </div>
                    <div class="middle">
                      <div class="address">
                        <p class="fw-light">{{ list_address.address }}</p>
                      </div>
                      <div class="address">
                        <p class="fw-light">
                          {{ list_address.zipcode }}
                          {{ list_address.poblacion }},
                          <span class="text-uppercase">{{
                            list_address.ciudad
                          }}</span>
                          <br />
                        </p>
                      </div>
                      <div class="address">
                        <p class="fw-light">Tel. {{ list_address.phone }}</p>
                      </div>
                      <div
                        class="form-text px-2 mt-3 text-dark d-none"
                        style="
                          width: fit-content !important;
                          background-color: #f3f3f3;
                        "
                      >
                        Dirección de envío habitual
                      </div>
                    </div>
                    <div class="bottom d-flex-justify-center justify-content-between">
                      <button
                        type="button"
                        class="bottom-btn btn btn-gray btn-sm"
                        (click)="addressClienteSelected(list_address)"
                        data-bs-toggle="modal"
                        data-bs-target="#addEditModal"
                      >
                        Añadir o editar dirección
                      </button>
                    </div>
                  </div>
                </div>
              </ng-container>-->
            </div>
          </div>

          <!-- Edit Address Modal -->
          <div
            class="modal fade"
            id="addEditModal"
            tabindex="-1"
            aria-labelledby="addEditModalLabel"
            aria-hidden="true"
          >
            <div class="modal-dialog modal-lg modal-dialog-centered">
              <div class="modal-content">
                <div class="modal-header justify-content-center border-0">
                  <h2 class="modal-title text-uppercase" id="addNewModalLabel">
                    Editar dirección
                  </h2>
                  <button
                    type="button"
                    class="btn-close"
                    data-bs-dismiss="modal"
                    aria-label="Close"
                  ></button>
                </div>
                <div class="modal-body border-0">
                  <fieldset>
                    <!-- Nombre -->
                    <div class="row justify-content-center">
                      <div class="form-group col-12 col-sm-6 col-md-6 col-lg-8">
                        <label for="firstname" class="form-label d-none"
                          >Nombre <span class="required">*</span></label
                        >
                        <input
                          name="firstname"
                          value=""
                          id="firstname"
                          type="text"
                          [(ngModel)]="name"
                          required=""
                          placeholder="Nombre"
                          class="form-control"
                        />
                      </div>
                    </div>
                    <!-- Apellidos -->
                    <div class="row justify-content-center">
                      <div class="form-group col-12 col-sm-6 col-md-6 col-lg-8">
                        <label for="lastname" class="form-label d-none"
                          >Apellidos <span class="required">*</span></label
                        >
                        <input
                          name="lastname"
                          value=""
                          id="lastname"
                          type="text"
                          [(ngModel)]="surname"
                          required=""
                          placeholder="Aellidos"
                          class="form-control"
                        />
                      </div>
                    </div>
                    <!-- Pais -->
                    <div class="row justify-content-center">
                      <div class="form-group col-12 col-sm-6 col-md-6 col-lg-8">
                        <label for="address_country1" class="form-label d-none"
                          >País <span class="required">*</span></label
                        >
                        <select
                          id="address_country1"
                          name="address[country]"
                          [(ngModel)]="pais"
                          data-default="United States"
                          disabled
                          class="form-control text-muted"
                        >
                          <option
                            value="0"
                            label="Seleccione un país"
                            selected="selected"
                          >
                            Seleccione un país
                          </option>
                          <optgroup id="country-optgroup-Eu" label="Europe">
                            <option value="IT" label="Italy">Italy</option>
                            <option value="PT" label="Portugal">
                              Portugal
                            </option>
                            <option value="RO" label="Romania">Romania</option>
                            <option value="SPAIN" label="Spain">Spain</option>
                          </optgroup>
                        </select>
                      </div>
                    </div>
                    <!-- Direccion -->
                    <div class="row justify-content-center">
                      <div class="form-group col-12 col-sm-6 col-md-6 col-lg-8">
                        <label for="address-1" class="form-label d-none"
                          >Dirección <span class="required">*</span></label
                        >
                        <input
                          name="address_1"
                          value=""
                          id="address-1"
                          type="text"
                          required=""
                          [(ngModel)]="address"
                          placeholder="Dirección"
                          class="form-control"
                        />
                      </div>
                    </div>
                    <!-- Codigo postal -->
                    <div class="row justify-content-center">
                      <div class="form-group col-12 col-sm-6 col-md-6 col-lg-8">
                        <label for="postcode" class="form-label d-none"
                          >Código postal <span class="required">*</span></label
                        >
                        <input
                          name="postcode"
                          value=""
                          id="postcode"
                          type="text"
                          class="form-control"
                          [(ngModel)]="zipcode"
                          placeholder="Código postal"
                        />
                      </div>
                    </div>
                    <!-- Población -->
                    <div class="row justify-content-center">
                      <div class="form-group col-12 col-sm-6 col-md-6 col-lg-8">
                        <label for="new-city" class="form-label d-none"
                          >Población <span class="required">*</span></label
                        >
                        <input
                          name="city"
                          placeholder="Población"
                          value=""
                          required=""
                          [(ngModel)]="poblacion"
                          id="new-city"
                          type="text"
                        />
                      </div>
                    </div>
                    <!-- Ciudad -->
                    <div class="row justify-content-center">
                      <div class="form-group col-12 col-sm-6 col-md-6 col-lg-8">
                        <label for="address_State" class="form-label d-none"
                          >Ciudad <span class="required">*</span></label
                        >
                        <select
                          id="address_State"
                          name="address[State]"
                          data-default=""
                          [(ngModel)]="ciudad"
                          class="form-control"
                        >
                          <option
                            value="0"
                            label="Select a state"
                            selected="selected"
                          >
                            Provincia/Estado
                          </option>
                          <option value="Madrid">Madrid</option>
                          <option value="New York">New York</option>
                        </select>
                      </div>
                    </div>
                    <!-- Email -->
                    <div class="row justify-content-center">
                      <div class="form-group col-12 col-sm-6 col-md-6 col-lg-8">
                        <label for="email" class="form-label d-none"
                          >E-Mail <span class="required">*</span></label
                        >
                        <input
                          name="email"
                          value=""
                          id="email"
                          type="email"
                          required=""
                          [(ngModel)]="email"
                          placeholder="E-mail"
                          disabled
                          class="form-control text-muted text-uppercase"
                        />
                      </div>
                    </div>
                    <!-- Telefono -->
                    <div class="row justify-content-center">
                      <div class="form-group col-12 col-sm-6 col-md-6 col-lg-8">
                        <label for="phone" class="form-label d-none"
                          >Móvil <span class="required">*</span></label
                        >
                        <input
                          name="phone"
                          value=""
                          id="phone"
                          type="tel"
                          required=""
                          [(ngModel)]="phone"
                          placeholder="Móvil"
                          class="form-control"
                        />
                      </div>
                    </div>

                    <div class="row justify-content-center mt-0 mb-3">
                      <div class="form-group col-12 col-sm-6 col-md-6 col-lg-8">
                        <p class="mt-3">Dirección de envío habitual</p>
                      </div>
                    </div>
                  </fieldset>
                </div>
                <div class="modal-footer border-0 justify-content-center">
                  <div
                    class="form-row row-cols-lg-1 row-cols-md-2 row-cols-sm-1 row-cols-1 text-center"
                  >
                    <div class="form-group">
                      <button
                        type="submit"
                        class="btn btn-primary text-uppercase fw-normal btn-lg"
                        (click)="storeAddress()"
                      >
                        <span>Guardar cambios</span>
                      </button>
                      <!-- <p class="mt-3" [ngClass]="status ? 'text-success' : 'text-danger'" *ngIf="this.validMessage && !status">{{ this.errorOrSuccessMessage }}</p>  -->
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <!-- End Edit Address Modal -->
        </div>
      </div>

      <!--Payment Methods-->
      <div class="mb-3 payment-methods mb-4">
        <div class="block-content">
          <h3 class="title mb-3 text-uppercase">Método de pago</h3>
          <div class="payment-accordion-radio" [(ngModel)]="selectedPaymentMethod">
            <div class="accordion" id="accordionExample">
              <!-- TARJETA -->
              <div class="accordion-item card mb-2 p-3 border border-muted">
                <div class="card-header" id="headingOne">
                  <div class="d-flex flex-row justify-content-between">
                    <div class="">
                      <button
                        class="card-link"
                        type="button"
                        data-bs-toggle="collapse"
                        data-bs-target="#collapseOne"
                        aria-expanded="false"
                        aria-controls="collapseOne"
                      >
                        <span class="customRadio clearfix mb-0">
                          <input
                            id="paymentRadio1"
                            value="card"
                            name="paymentMethod"
                            type="radio"
                            class="radio"
                            checked="checked"
                            [(ngModel)]="selectedPaymentMethod"
                            (change)="onPaymentMethodChange()"
                            checked
                          />
                          <label
                            for="paymentRadio1"
                            class="mb-0 text-uppercase fw-normal"
                            >Tarjeta</label
                          >
                        </span>
                      </button>
                    </div>
                    <div class="d-flex flex-row">
                      <div>
                        <svg
                          width="44"
                          height="28"
                          class="Icon_icon-content-1__kPDLF"
                          xmlns="http://www.w3.org/2000/svg"
                        >
                          <title lang="en">Visa</title>
                          <path
                            fill="#1434CB"
                            d="M27.787 8.02c-2.809 0-5.32 1.456-5.32 4.146 0 3.085 4.453 3.298 4.453 4.847 0 .653-.748 1.237-2.025 1.237-1.813 0-3.168-.816-3.168-.816l-.58 2.714s1.561.69 3.633.69c3.071 0 5.488-1.528 5.488-4.264 0-3.26-4.47-3.466-4.47-4.904 0-.511.613-1.072 1.887-1.072 1.437 0 2.61.594 2.61.594l.566-2.622s-1.275-.55-3.074-.55m-25.699.198-.068.396s1.182.216 2.246.647c1.37.495 1.468.783 1.699 1.678l2.515 9.695h3.371l5.194-12.416h-3.364l-3.337 8.441-1.362-7.155c-.125-.819-.757-1.286-1.532-1.286zm16.31 0-2.639 12.416h3.208l2.629-12.416zm17.89 0c-.774 0-1.184.414-1.485 1.138l-4.699 11.278h3.364l.65-1.88h4.098l.396 1.88h2.968L38.99 8.218zm.437 3.354.997 4.66H35.05l1.674-4.66Z"
                          ></path>
                        </svg>
                      </div>
                      <div>
                        <svg
                          width="44"
                          height="28"
                          class="Icon_icon-content-1__kPDLF"
                          xmlns="http://www.w3.org/2000/svg"
                          viewBox="7 -2 31 31"
                        >
                          <title lang="en">Mastercard</title>
                          <path
                            d="M12.601 25.947v-1.592c0-.61-.371-1.009-1.008-1.009-.319 0-.665.105-.903.452-.186-.29-.452-.452-.85-.452a.86.86 0 0 0-.743.372v-.319H8.54v2.548h.557V24.54c0-.451.238-.665.61-.665.37 0 .556.238.556.665v1.407h.557V24.54c0-.451.266-.665.609-.665.371 0 .557.238.557.665v1.407zm8.258-2.548h-.903v-.77h-.557v.77h-.504v.504h.504v1.17c0 .584.238.927.875.927.238 0 .504-.08.69-.186l-.16-.479a.9.9 0 0 1-.48.133c-.266 0-.371-.16-.371-.424v-1.14h.903v-.505zm4.726-.056a.76.76 0 0 0-.665.371v-.318h-.557v2.548h.557V24.51c0-.423.185-.665.532-.665.105 0 .238.028.346.053l.16-.532c-.11-.022-.268-.022-.373-.022Zm-7.142.266c-.266-.185-.637-.266-1.036-.266-.637 0-1.06.319-1.06.823 0 .424.318.665.875.742l.266.028c.29.053.451.133.451.266 0 .186-.213.319-.584.319-.372 0-.665-.133-.85-.266l-.267.423c.29.214.69.319 1.089.319.742 0 1.169-.346 1.169-.823 0-.451-.346-.69-.875-.77l-.266-.028c-.239-.028-.424-.08-.424-.238 0-.185.185-.29.48-.29.318 0 .636.132.797.213zm14.812-.266a.76.76 0 0 0-.665.371v-.318h-.557v2.548h.557V24.51c0-.423.185-.665.532-.665.105 0 .238.028.346.053l.16-.526c-.107-.028-.265-.028-.373-.028Zm-7.114 1.33c0 .77.532 1.327 1.355 1.327.371 0 .637-.08.903-.29l-.266-.452c-.213.16-.424.238-.665.238-.451 0-.77-.319-.77-.823 0-.48.319-.798.77-.822.238 0 .452.08.665.238l.266-.452c-.266-.213-.532-.29-.903-.29-.823-.004-1.355.556-1.355 1.326m5.15 0V23.4h-.557v.319c-.186-.239-.452-.372-.798-.372-.717 0-1.274.557-1.274 1.327s.557 1.327 1.274 1.327c.371 0 .637-.133.798-.371v.318h.557v-1.274Zm-2.045 0c0-.451.291-.822.77-.822.452 0 .77.346.77.822 0 .452-.318.823-.77.823-.476-.028-.77-.374-.77-.823m-6.661-1.33c-.743 0-1.275.532-1.275 1.327 0 .798.532 1.327 1.302 1.327a1.62 1.62 0 0 0 1.037-.346l-.267-.4a1.26 1.26 0 0 1-.742.266c-.346 0-.69-.16-.77-.609h1.884v-.213c.024-.82-.455-1.352-1.17-1.352Zm0 .48c.346 0 .584.213.637.609h-1.327c.052-.343.29-.61.69-.61Zm13.83.85v-2.282h-.556v1.327c-.186-.239-.452-.372-.798-.372-.718 0-1.274.557-1.274 1.327S34.343 26 35.061 26c.371 0 .637-.133.798-.371v.318h.556zm-2.044 0c0-.451.29-.822.77-.822.452 0 .77.346.77.822 0 .452-.318.823-.77.823-.48-.028-.77-.374-.77-.823m-18.637 0V23.4h-.557v.319c-.185-.239-.451-.372-.798-.372-.717 0-1.274.557-1.274 1.327s.557 1.327 1.274 1.327c.372 0 .638-.133.798-.371v.318h.557v-1.274Zm-2.069 0c0-.451.29-.822.77-.822.452 0 .77.346.77.822 0 .452-.318.823-.77.823-.48-.028-.77-.374-.77-.823"
                          ></path>
                          <path
                            fill="#FF5A00"
                            d="M26.62 4.044h-8.362V19.07h8.363V4.044Z"
                          ></path>
                          <path
                            fill="#EB001B"
                            d="M18.814 11.557a9.58 9.58 0 0 1 3.637-7.513A9.5 9.5 0 0 0 16.557 2 9.55 9.55 0 0 0 7 11.557a9.55 9.55 0 0 0 9.557 9.556c2.23 0 4.274-.77 5.895-2.044a9.54 9.54 0 0 1-3.638-7.512"
                          ></path>
                          <path
                            fill="#F79E1B"
                            d="M37.903 11.557a9.55 9.55 0 0 1-9.557 9.556c-2.23 0-4.274-.77-5.895-2.044a9.5 9.5 0 0 0 3.638-7.512 9.58 9.58 0 0 0-3.637-7.513A9.5 9.5 0 0 1 28.343 2c5.286 0 9.56 4.302 9.56 9.557"
                          ></path>
                        </svg>
                      </div>
                    </div>
                  </div>
                </div>
                <div
                  id="collapseOne"
                  class="accordion-collapse collapse d-none"
                  aria-labelledby="headingOne"
                  data-bs-parent="#accordionExample"
                >
                  <div class="card-body px-0">
                    <fieldset>
                      <div class="row">
                        <div
                          class="form-group col-12 col-sm-6 col-md-6 col-lg-6"
                        >
                          <label for="input-cardname"
                            >Titular <span class="required">*</span></label
                          >
                          <input
                            name="cardname"
                            value=""
                            placeholder=""
                            id="input-cardname"
                            class="form-control"
                            type="text"
                            pattern="[0-9\-]*"
                          />
                        </div>
                        <div
                          class="form-group col-12 col-sm-6 col-md-6 col-lg-6 d-none"
                        >
                          <label
                            >Credit Card Type
                            <span class="required">*</span></label
                          >
                          <select name="country_id" class="form-control">
                            <option value="">Please Select</option>
                            <option value="1">American Express</option>
                            <option value="2">Visa Card</option>
                            <option value="3">Master Card</option>
                            <option value="4">Discover Card</option>
                          </select>
                        </div>
                      </div>
                      <div class="row">
                        <div
                          class="form-group col-12 col-sm-4 col-md-4 col-lg-6"
                        >
                          <label for="input-cardno"
                            >Número de Tarjeta
                            <span class="required">*</span></label
                          >
                          <input
                            name="cardno"
                            value=""
                            placeholder=""
                            id="input-cardno"
                            class="form-control"
                            type="text"
                            pattern="[0-9\-]*"
                          />
                        </div>
                      </div>
                      <div class="row">
                        <div
                          class="form-group col-12 col-sm-4 col-md-4 col-lg-3"
                        >
                          <label
                            >Fecha de expiración
                            <span class="required">*</span></label
                          >
                          <input
                            type="date"
                            name="exdate"
                            class="form-control"
                          />
                        </div>
                        <div
                          class="form-group col-12 col-sm-4 col-md-4 col-lg-3"
                        >
                          <label for="input-cvv"
                            >CVV <span class="required">*</span></label
                          >
                          <input
                            name="cvv"
                            value=""
                            placeholder=""
                            id="input-cvv"
                            class="form-control"
                            type="text"
                            pattern="[0-9\-]*"
                          />
                        </div>
                      </div>
                      <div class="row">
                        <div
                          class="form-group col-12 col-sm-4 col-md-4 col-lg-6 mb-0 mt-3"
                        >
                          <button
                            class="btn btn-primary w-100 text-uppercase ls-2 fw-normal"
                            type="submit"
                          >
                            Pagar
                          </button>
                        </div>
                      </div>
                    </fieldset>
                  </div>
                  <div class="card-body px-0">
                    <a href="#" class="text-decoration-underline">
                      <button type="button" class="border-0">
                        <span class="">Pago seguro verificado</span
                        ><svg
                          width="24"
                          height="24"
                          aria-hidden="true"
                          class="Icon_icon-content-1__kPDLF"
                          xmlns="http://www.w3.org/2000/svg"
                          xml:space="preserve"
                          viewBox="0 0 24 24"
                        >
                          <path
                            d="M17 8V7c0-2.757-2.243-5-5-5S7 4.243 7 7v1H4v14h16V8zm-6.161 10.042-2.44-2.44.706-.707 1.72 1.72 3.815-3.962.72.694zM16 8H8V7c0-2.206 1.794-4 4-4s4 1.794 4 4z"
                          ></path>
                        </svg>
                      </button>
                    </a>
                  </div>
                </div>
              </div>
              <!-- END TARJETA -->
              <div class="accordion-item card mb-2 p-3 border border-muted d-none"
              >
                <div class="card-header p-3" id="headingTwo">
                  <button
                    class="card-link"
                    type="button"
                    data-bs-toggle="collapse"
                    data-bs-target="#collapseTwo"
                    aria-expanded="false"
                    aria-controls="collapseTwo"
                  >
                    <span class="customRadio clearfix mb-0">
                      <input
                        id="paymentRadio2"
                        value=""
                        name="payment"
                        type="radio"
                        class="radio"
                      />
                      <label for="paymentRadio2" class="mb-0"
                        >Pay with Paypal</label
                      >
                    </span>
                  </button>
                </div>
                <div
                  id="collapseTwo"
                  class="accordion-collapse collapse"
                  aria-labelledby="headingTwo"
                  data-bs-parent="#accordionExample"
                >
                  <div class="card-body px-0">
                    <p>
                      Pay via PayPal you can pay with your credit card if you
                      don't have a PayPal account.
                    </p>
                    <div class="input-group mb-0 d-flex">
                      <input
                        type="text"
                        class="form-control"
                        placeholder="paypal@example.com"
                        required=""
                      />
                      <button class="btn btn-primary" type="submit">
                        Pay 99.00 USD
                      </button>
                    </div>
                  </div>
                </div>
              </div>
              <!-- BIZUM -->
              <div class="accordion-item card mb-2 p-3 border border-muted d-none">
                <div class="card-header p-3" id="headingThree">
                  <div class="d-flex flex-row justify-content-between">
                    <div>
                      <button
                        class="card-link"
                        type="button"
                        data-bs-toggle="collapse"
                        data-bs-target="#collapseThree"
                        aria-expanded="false"
                        aria-controls="collapseThree"
                      >
                        <span class="customRadio clearfix mb-0">
                          <input
                            id="paymentRadio3"
                            value=""
                            name="payment"
                            type="radio"
                            class="radio"
                          />
                          <label
                            for="paymentRadio3"
                            class="mb-0 text-uppercase fw-bold"
                            >Bizum</label
                          >
                        </span>
                      </button>
                    </div>
                    <div>
                      <svg
                        width="63"
                        height="25"
                        aria-hidden="true"
                        class="Icon_icon-content-1__kPDLF"
                        xmlns="http://www.w3.org/2000/svg"
                      >
                        <g clip-path="url('#bizum-large-a')">
                          <path
                            fill="#51555B"
                            fill-rule="evenodd"
                            d="M31.643 13.35c-.5 0-.927.428-.927.891v6.85c0 .499.428.927.927.927s.928-.428.928-.928v-6.813a.92.92 0 0 0-.928-.927m0-3.39c-.57 0-1.034.464-1.034 1.035s.464 1.07 1.034 1.07 1.035-.463 1.035-1.07c.036-.57-.464-1.034-1.035-1.034m9.06 4.317c0-.57-.463-.785-.855-.785H35.21c-.464 0-.821.357-.821.785 0 .464.357.82.82.82h3.033l-3.889 5.423a1.06 1.06 0 0 0-.178.535c0 .57.464.892.856.892h4.887c.464 0 .82-.357.82-.821a.807.807 0 0 0-.82-.82h-3.317l3.817-5.315c.214-.25.285-.5.285-.714m-13.554 4.28c0 1.142-.5 1.82-1.606 1.82-1.141 0-1.605-.678-1.605-1.82v-3.495h1.677c1.355 0 1.534.749 1.534 1.57zm1.855-1.961c0-1.927-1-3.14-3.354-3.14h-1.712v-2.568c0-.5-.428-.927-.892-.927a.944.944 0 0 0-.927.927v7.705c0 1.927 1.034 3.46 3.46 3.46 2.39 0 3.46-1.57 3.46-3.46v-1.962zM47.91 13.35c-.5 0-.928.428-.928.927v4.28c0 1.142-.5 1.82-1.605 1.82-1.142 0-1.605-.678-1.605-1.82v-4.28c0-.5-.428-.927-.892-.927-.5 0-.928.428-.928.927v4.28c0 1.927 1.035 3.46 3.46 3.46 2.39 0 3.46-1.569 3.46-3.46v-4.28c-.035-.5-.463-.927-.962-.927M62 16.845c0-1.926-.892-3.46-3.282-3.46-1.07 0-1.855.321-2.39.856-.535-.499-1.284-.856-2.39-.856-2.39 0-3.282 1.57-3.282 3.46v4.281c0 .5.428.927.892.927.5 0 .928-.428.928-.927v-4.28c0-1.142.356-1.82 1.462-1.82s1.463.678 1.463 1.82v4.28c0 .5.428.927.891.927.5 0 .928-.428.928-.927v-4.28c0-1.142.357-1.82 1.462-1.82 1.106 0 1.463.678 1.463 1.82v4.28c0 .5.428.927.892.927.5 0 .927-.428.927-.927zm-56.718-3.46a1.47 1.47 0 0 0 2.033-.32l1.712-2.355a1.47 1.47 0 0 0-.32-2.033 1.47 1.47 0 0 0-2.034.32l-1.712 2.355c-.464.642-.321 1.534.32 2.033m7.776-3.317a1.47 1.47 0 0 0-2.033.32L4.176 19.77a1.47 1.47 0 0 0 .321 2.034c.642.463 1.57.32 2.033-.321l6.814-9.382c.5-.642.356-1.57-.286-2.033m-8.418-.75a1.47 1.47 0 0 0-.321-2.033c-.642-.463-1.57-.356-2.034.321a1.444 1.444 0 0 0 .321 2.034c.643.463 1.534.32 2.034-.321m10.345 12.878a1.47 1.47 0 0 0-2.034.321 1.47 1.47 0 0 0 .321 2.034 1.47 1.47 0 0 0 2.034-.321c.463-.643.32-1.534-.321-2.034m-2.676-3.71a1.47 1.47 0 0 0-2.033.321l-1.712 2.355a1.47 1.47 0 0 0 .32 2.033c.643.464 1.57.321 2.034-.321l1.712-2.354a1.47 1.47 0 0 0-.32-2.034"
                            clip-rule="evenodd"
                          ></path>
                        </g>
                        <defs>
                          <clipPath id="bizum-large-a">
                            <path fill="#fff" d="M2 7h60v17.836H2z"></path>
                          </clipPath>
                        </defs>
                      </svg>
                    </div>
                  </div>
                </div>
                <div
                  id="collapseThree"
                  class="accordion-collapse collapse"
                  aria-labelledby="headingThree"
                  data-bs-parent="#accordionExample"
                >
                  <div class="card-body px-0">
                    <p>
                      Al continuar se te redirigirá a una pasarela de pago
                      segura, donde podrás introducir tus datos y completar la
                      compra.
                    </p>
                  </div>
                </div>
              </div>
              <!-- END BIZUM -->
              <!-- PAYPAL -->
              <div class="accordion-item card mb-0 p-3 border border-muted" [ngClass]="{ 'd-none': isMobile }">
                <div class="card-header" id="headingFour">
                  <div class="d-flex flex-row">
                    <div class="flex-grow-1">
                      <button
                        class="card-link"
                        type="button"
                        data-bs-toggle="collapse"
                        data-bs-target="#collapseFour"
                        aria-expanded="true"
                        aria-controls="collapseFour"
                        (change)="onPaymentMethodChange()"
                      >
                        <span class="customRadio clearfix mb-0">
                          <input
                            id="paymentRadio5"
                            value="paypal"
                            name="paymentMethod"
                            type="radio"
                            class="radio"
                            checked="checked"
                            [(ngModel)]="selectedPaymentMethod"
                            
                          />
                          <label
                            for="paymentRadio5"
                            class="mb-0 text-uppercase fw-normal"
                            >Paypal</label
                          >
                        </span>
                      </button>
                    </div>
                    <div>
                      <svg
                        width="64"
                        height="32"
                        aria-hidden="true"
                        class="Icon_icon-content-1__kPDLF"
                        xmlns="http://www.w3.org/2000/svg"
                      >
                        <g fill-rule="evenodd" clip-rule="evenodd">
                          <path
                            fill="#009EE3"
                            d="M7.236 12.422h4.1c2.2 0 3.03 1.114 2.902 2.751-.212 2.703-1.846 4.199-4.014 4.199H9.13c-.297 0-.497.197-.578.73l-.464 3.1c-.031.202-.137.318-.296.334H5.216c-.242 0-.328-.185-.264-.586l1.57-9.941c.062-.398.28-.587.714-.587"
                          ></path>
                          <path
                            fill="#113984"
                            d="M25.036 12.237c1.383 0 2.66.75 2.485 2.62-.212 2.223-1.403 3.453-3.281 3.458h-1.642c-.236 0-.35.193-.411.588l-.318 2.018c-.047.305-.204.455-.435.455h-1.527c-.243 0-.328-.155-.274-.504l1.26-8.088c.063-.398.212-.547.484-.547zm-2.487 4.331h1.243c.778-.03 1.294-.568 1.346-1.54.032-.6-.373-1.03-1.018-1.026l-1.17.005zm9.123 4.189c.14-.127.282-.193.262-.036l-.05.375c-.025.195.052.3.234.3h1.357c.228 0 .34-.093.396-.446l.836-5.248c.042-.263-.023-.392-.223-.392h-1.492c-.134 0-.2.075-.235.28l-.055.323c-.028.168-.106.198-.178.029-.252-.6-.898-.868-1.799-.847-2.092.043-3.503 1.632-3.654 3.668-.117 1.575 1.012 2.812 2.5 2.812 1.08 0 1.562-.317 2.106-.815zm-1.136-.808c-.9 0-1.528-.718-1.398-1.599.13-.88.972-1.599 1.873-1.599.9 0 1.528.719 1.398 1.6-.13.88-.971 1.599-1.873 1.599Zm6.826-4.656h-1.376c-.283 0-.399.212-.309.472l1.708 5.002-1.675 2.38c-.14.199-.032.38.166.38h1.546a.47.47 0 0 0 .46-.226l5.253-7.535c.162-.232.086-.475-.18-.475h-1.463c-.251 0-.352.1-.496.308l-2.19 3.175-.98-3.183c-.056-.192-.2-.298-.463-.298z"
                          ></path>
                          <path
                            fill="#009EE3"
                            d="M48.6 12.237c1.384 0 2.66.75 2.485 2.62-.211 2.223-1.402 3.453-3.28 3.458h-1.64c-.237 0-.351.193-.413.588l-.317 2.018c-.048.305-.204.455-.435.455h-1.527c-.244 0-.328-.155-.274-.504l1.262-8.09c.063-.399.212-.547.484-.547H48.6zm-2.487 4.331h1.244c.778-.03 1.294-.568 1.346-1.54.032-.6-.373-1.03-1.018-1.026l-1.17.005zm9.124 4.189c.14-.127.282-.193.262-.036l-.05.375c-.026.195.052.3.234.3h1.357c.228 0 .34-.093.395-.446l.837-5.248c.042-.263-.023-.392-.223-.392h-1.49c-.134 0-.2.075-.235.28l-.055.323c-.029.168-.106.198-.178.029-.253-.6-.898-.868-1.799-.847-2.092.043-3.503 1.632-3.654 3.668-.117 1.575 1.012 2.812 2.5 2.812 1.079 0 1.562-.317 2.106-.815zm-1.135-.808c-.901 0-1.529-.718-1.398-1.599.13-.88.972-1.599 1.873-1.599.9 0 1.528.719 1.398 1.6-.13.88-.973 1.599-1.873 1.599Zm6.258 1.455h-1.567a.184.184 0 0 1-.191-.212l1.376-8.716a.27.27 0 0 1 .26-.212h1.566a.186.186 0 0 1 .192.212l-1.376 8.716a.27.27 0 0 1-.26.214z"
                          ></path>
                          <path
                            fill="#113984"
                            d="M4.671 9h4.105c1.155 0 2.527.037 3.443.847.613.54.935 1.4.86 2.328-.251 3.134-2.125 4.89-4.64 4.89H6.415c-.345 0-.572.228-.67.846L5.18 21.51c-.037.233-.137.37-.317.388H2.33c-.28 0-.38-.212-.307-.68l1.82-11.533c.075-.465.33-.685.829-.685Z"
                          ></path>
                          <path
                            fill="#172C70"
                            d="m5.805 17.546.716-4.537c.063-.398.28-.588.715-.588h4.1c.678 0 1.227.105 1.657.301-.412 2.79-2.216 4.34-4.578 4.34h-2.02c-.272 0-.47.136-.59.484"
                          ></path>
                        </g>
                      </svg>
                    </div>
                  </div>
                </div>
                <div
                  id="collapseFour"
                  class="accordion-collapse collapse"
                  aria-labelledby="headingFour"
                  data-bs-parent="#accordionExample"
                >
                  <div class="px-0">
                    <p class="lh-1 text-dark">
                      Después de hacer clic en “Completar la compra”, aparecerá una ventana emergente que te pedirá que inicies sesión en tu cuenta de PayPal. Revisa el pago y los detalles de envío para completar la compra. A continuación, irás a la página de confirmación del pedido de www.tienda.lujandev.com
                    </p>
                  </div>
                </div>
              </div>
              <!-- END PAYPAL -->
              <div class="accordion-item card mb-2 d-none">
                <div class="row">
                  <div class="col-12 col-sm-12 col-md-7 col-lg-12">
                    <!--Order Summary-->
                    <div class="block order-summary">
                      <div class="block-content">
                        <h3 class="title mb-3 text-uppercase">Paquete</h3>
                        <div
                          class="table-responsive table-bottom-brd order-table"
                        >
                          <table class="table table-hover align-middle mb-0">
                            <thead>
                              <tr>
                                <th class="action">&nbsp;</th>
                                <th class="text-start text-black">Image</th>
                                <th class="text-start proName text-black">
                                  Producto
                                </th>
                                <th class="text-center text-black">Cantidad</th>
                                <th class="text-center text-black">Precio</th>
                                <th class="text-center text-black">Subtotal</th>
                              </tr>
                            </thead>
                            <tbody>
                              <ng-container *ngFor="let cart of listCarts">
                                <tr>
                                  <td class="text-center cart-delete">
                                    <a
                                      href="#"
                                      onclick="return false;"
                                      (click)="removeCart(cart)"
                                      class="btn btn-secondary cart-remove remove-icon position-static"
                                      data-bs-toggle="tooltip"
                                      data-bs-placement="top"
                                      title="Remove to Cart"
                                      ><i class="icon anm anm-times-r"></i
                                    ></a>
                                  </td>
                                  <td class="text-start">
                                    <a
                                      href="product-layout1.html"
                                      onclick="return false;"
                                      [routerLink]="[
                                        '/landing-product',
                                        cart.product.slug
                                      ]"
                                      class="thumb"
                                    >
                                      <!-- <img class="blur-up lazyload" [attr.data-src]="cart.variedad.files[1].preview_url" [src]="cart.variedad.files[1].preview_url" alt="product" title="Product" width="120" height="170" /> -->
                                      <img
                                        class="blur-up lazyload"
                                        [attr.data-src]="cart.product.imagen"
                                        [src]="cart.product.imagen"
                                        alt="product"
                                        title="Product"
                                        width="120"
                                        height="170"
                                      />
                                    </a>
                                  </td>
                                  <td class="text-start proName">
                                    <div class="list-view-item-title">
                                      <a
                                        href="product-layout1.html"
                                        onclick="return false;"
                                        [routerLink]="[
                                          '/landing-product',
                                          cart.product.slug
                                        ]"
                                        >{{ cart.product.title }}</a
                                      >
                                    </div>
                                    <div class="cart-meta-text">
                                      Color: {{ cart.variedad.color
                                      }}<br />Talla: {{ cart.variedad.valor }}
                                    </div>
                                  </td>
                                  <td class="text-center">
                                    {{ cart.cantidad }}
                                  </td>
                                  <td class="text-center">
                                    <!-- {{ cart.subtotal | number: '1.2-2' }} {{ euro }} -->
                                    <span class="price-small fw-normal">
                                      <span class="price-main-small">{{
                                        getFormattedPrice(cart.subtotal)
                                          .integerPart
                                      }}</span>
                                      <span class="price-decimals-small">
                                        <sup>{{
                                          getFormattedPrice(cart.subtotal)
                                            .decimalPart
                                        }}</sup>
                                        <span class="currency-symbol-small">{{
                                          euro
                                        }}</span>
                                      </span>
                                    </span>
                                  </td>
                                  <td class="text-center">
                                    <!-- <strong>{{ cart.total | number: '1.2-2' }} {{ euro }}</strong> -->
                                    <strong>
                                      <span class="price-small">
                                        <span class="price-main-small">{{
                                          getFormattedPrice(cart.total)
                                            .integerPart
                                        }}</span>
                                        <span class="price-decimals-small">
                                          <sup>{{
                                            getFormattedPrice(cart.total)
                                              .decimalPart
                                          }}</sup>
                                          <span class="currency-symbol-small">{{
                                            euro
                                          }}</span>
                                        </span>
                                      </span>
                                    </strong>
                                  </td>
                                </tr>
                              </ng-container>
                            </tbody>
                          </table>
                        </div>
                      </div>
                    </div>
                    <!--End Order Summary-->
                  </div>
                </div>
                <!-- <div class="card-header" id="headingFour">
                                    <button class="card-link" type="button" data-bs-toggle="collapse" data-bs-target="#collapseFour" aria-expanded="false" aria-controls="collapseFour">
                                        <span class="customRadio clearfix mb-0">
                                            <input id="paymentRadio4" value="" name="payment" type="radio" class="radio" />
                                            <label for="paymentRadio4" class="mb-0">Cash On Delivery</label>
                                        </span>
                                    </button>
                                </div>
                                <div id="collapseFour" class="accordion-collapse collapse" aria-labelledby="headingFour" data-bs-parent="#accordionExample">
                                    <div class="card-body px-0">
                                        <p>Cash on delivery refers to an arrangement in which payment for a purchase is made directly by the purchaser to the person who delivers the item.</p>
                                    </div>
                                </div> -->
              </div>
            </div>
          </div>
        </div>
      </div>

      <!--Cart Summary | Cart Summary solo visible en móvil-->
      <div class="cart-info mb-4 d-block d-md-none bg-transparent border-0 p-0" *ngIf="isMobile">
        <div class="cart-info mb-3 bg-transparent border-0 p-0">
          <div class="cart-order-detail cart-col">
            <div class="row g-0">
              <span class="col-6 col-sm-6 cart-subtotal-title fw-light"
                >Subtotal</span
              >
              <span
                class="col-6 col-sm-6 cart-subtotal-title cart-subtotal text-end"
              >
                <span class="price-small fw-normal">
                  <span class="price-main-small">{{
                    getFormattedPrice(totalCarts).integerPart
                  }}</span>
                  <span class="price-decimals-small">
                    <sup>{{ getFormattedPrice(totalCarts).decimalPart }}</sup>
                    <span class="currency-symbol-small">{{ euro }}</span>
                  </span>
                </span>
              </span>
            </div>
            <div class="row g-0 py-2 d-none">
              <span class="col-6 col-sm-6 cart-subtotal-title"
                ><strong>Coupon Discount</strong></span
              >
              <span
                class="col-6 col-sm-6 cart-subtotal-title cart-subtotal text-end"
                ><span class="money">-$25.00</span></span
              >
            </div>
            <div class="row g-0 py-2 d-none">
              <span class="col-6 col-sm-6 cart-subtotal-title"
                ><strong>Tax</strong></span
              >
              <span
                class="col-6 col-sm-6 cart-subtotal-title cart-subtotal text-end"
                ><span class="money">$10.00</span></span
              >
            </div>
            <div class="row g-0">
              <span class="col-6 col-sm-6 cart-subtotal-title fw-light"
                >Envío</span
              >
              <span
                class="col-6 col-sm-6 cart-subtotal-title cart-subtotal text-end"
                ><span class="money">Gratis</span></span
              >
            </div>
            <div class="row g-0 pt-2">
              <span
                class="col-6 col-sm-6 cart-subtotal-title fs-5 ls-1 text-uppercase"
                >Total</span
              >
              <span
                class="col-6 col-sm-6 cart-subtotal-title fs-5 cart-subtotal text-end"
              >
                <strong>
                  <span class="price">
                    <span class="price-main">{{
                      getFormattedPrice(totalCarts).integerPart
                    }}</span>
                    <span class="price-decimals">
                      <sup>{{ getFormattedPrice(totalCarts).decimalPart }}</sup>
                      <span class="currency-symbol">{{ euro }}</span>
                    </span>
                  </span>
                </strong>
              </span>
            </div>
            <div *ngIf="selectedPaymentMethod === 'paypal'" class="mt-4 mb-4" #paypal [class.disabled]="disablePayments"></div>

            <!-- Color button #2C2E2F -->
            <button 
              *ngIf="selectedPaymentMethod === 'card'" 
              (click)="payWithStripe()"
              class="btn-dark-ld mt-3 mb-2 text-uppercase">
                <ng-container *ngIf="!isLoadingStripe; else loadingStripe">
                  Pagar con tarjeta
                </ng-container>

                <ng-template #loadingStripe>
                  <!-- <span class="spinner-border spinner-border-sm" role="status"></span>
                  Procesando... -->
                  <span class="loading-spinner">
                    <div class="sp sp-bars"></div>
                  </span> 
                </ng-template>
            </button>

            <div class="d-flex mb-3">
              <ul class="d-flex flex-row">
                    <li class="ms-0"><svg _ngcontent-serverApp-c70="" width="44" height="28" xmlns="http://www.w3.org/2000/svg" class="Icon_icon-content-1__kPDLF"><title _ngcontent-serverApp-c70="" lang="en">Visa</title><path _ngcontent-serverApp-c70="" fill="#1434CB" d="M27.787 8.02c-2.809 0-5.32 1.456-5.32 4.146 0 3.085 4.453 3.298 4.453 4.847 0 .653-.748 1.237-2.025 1.237-1.813 0-3.168-.816-3.168-.816l-.58 2.714s1.561.69 3.633.69c3.071 0 5.488-1.528 5.488-4.264 0-3.26-4.47-3.466-4.47-4.904 0-.511.613-1.072 1.887-1.072 1.437 0 2.61.594 2.61.594l.566-2.622s-1.275-.55-3.074-.55m-25.699.198-.068.396s1.182.216 2.246.647c1.37.495 1.468.783 1.699 1.678l2.515 9.695h3.371l5.194-12.416h-3.364l-3.337 8.441-1.362-7.155c-.125-.819-.757-1.286-1.532-1.286zm16.31 0-2.639 12.416h3.208l2.629-12.416zm17.89 0c-.774 0-1.184.414-1.485 1.138l-4.699 11.278h3.364l.65-1.88h4.098l.396 1.88h2.968L38.99 8.218zm.437 3.354.997 4.66H35.05l1.674-4.66Z"></path></svg></li>
                    <li class="ms-2"><svg _ngcontent-serverApp-c70="" width="44" height="28" xmlns="http://www.w3.org/2000/svg" viewBox="7 -2 31 31" class="Icon_icon-content-1__kPDLF"><title _ngcontent-serverApp-c70="" lang="en">Mastercard</title><path _ngcontent-serverApp-c70="" d="M12.601 25.947v-1.592c0-.61-.371-1.009-1.008-1.009-.319 0-.665.105-.903.452-.186-.29-.452-.452-.85-.452a.86.86 0 0 0-.743.372v-.319H8.54v2.548h.557V24.54c0-.451.238-.665.61-.665.37 0 .556.238.556.665v1.407h.557V24.54c0-.451.266-.665.609-.665.371 0 .557.238.557.665v1.407zm8.258-2.548h-.903v-.77h-.557v.77h-.504v.504h.504v1.17c0 .584.238.927.875.927.238 0 .504-.08.69-.186l-.16-.479a.9.9 0 0 1-.48.133c-.266 0-.371-.16-.371-.424v-1.14h.903v-.505zm4.726-.056a.76.76 0 0 0-.665.371v-.318h-.557v2.548h.557V24.51c0-.423.185-.665.532-.665.105 0 .238.028.346.053l.16-.532c-.11-.022-.268-.022-.373-.022Zm-7.142.266c-.266-.185-.637-.266-1.036-.266-.637 0-1.06.319-1.06.823 0 .424.318.665.875.742l.266.028c.29.053.451.133.451.266 0 .186-.213.319-.584.319-.372 0-.665-.133-.85-.266l-.267.423c.29.214.69.319 1.089.319.742 0 1.169-.346 1.169-.823 0-.451-.346-.69-.875-.77l-.266-.028c-.239-.028-.424-.08-.424-.238 0-.185.185-.29.48-.29.318 0 .636.132.797.213zm14.812-.266a.76.76 0 0 0-.665.371v-.318h-.557v2.548h.557V24.51c0-.423.185-.665.532-.665.105 0 .238.028.346.053l.16-.526c-.107-.028-.265-.028-.373-.028Zm-7.114 1.33c0 .77.532 1.327 1.355 1.327.371 0 .637-.08.903-.29l-.266-.452c-.213.16-.424.238-.665.238-.451 0-.77-.319-.77-.823 0-.48.319-.798.77-.822.238 0 .452.08.665.238l.266-.452c-.266-.213-.532-.29-.903-.29-.823-.004-1.355.556-1.355 1.326m5.15 0V23.4h-.557v.319c-.186-.239-.452-.372-.798-.372-.717 0-1.274.557-1.274 1.327s.557 1.327 1.274 1.327c.371 0 .637-.133.798-.371v.318h.557v-1.274Zm-2.045 0c0-.451.291-.822.77-.822.452 0 .77.346.77.822 0 .452-.318.823-.77.823-.476-.028-.77-.374-.77-.823m-6.661-1.33c-.743 0-1.275.532-1.275 1.327 0 .798.532 1.327 1.302 1.327a1.62 1.62 0 0 0 1.037-.346l-.267-.4a1.26 1.26 0 0 1-.742.266c-.346 0-.69-.16-.77-.609h1.884v-.213c.024-.82-.455-1.352-1.17-1.352Zm0 .48c.346 0 .584.213.637.609h-1.327c.052-.343.29-.61.69-.61Zm13.83.85v-2.282h-.556v1.327c-.186-.239-.452-.372-.798-.372-.718 0-1.274.557-1.274 1.327S34.343 26 35.061 26c.371 0 .637-.133.798-.371v.318h.556zm-2.044 0c0-.451.29-.822.77-.822.452 0 .77.346.77.822 0 .452-.318.823-.77.823-.48-.028-.77-.374-.77-.823m-18.637 0V23.4h-.557v.319c-.185-.239-.451-.372-.798-.372-.717 0-1.274.557-1.274 1.327s.557 1.327 1.274 1.327c.372 0 .638-.133.798-.371v.318h.557v-1.274Zm-2.069 0c0-.451.29-.822.77-.822.452 0 .77.346.77.822 0 .452-.318.823-.77.823-.48-.028-.77-.374-.77-.823"></path><path _ngcontent-serverApp-c70="" fill="#FF5A00" d="M26.62 4.044h-8.362V19.07h8.363V4.044Z"></path><path _ngcontent-serverApp-c70="" fill="#EB001B" d="M18.814 11.557a9.58 9.58 0 0 1 3.637-7.513A9.5 9.5 0 0 0 16.557 2 9.55 9.55 0 0 0 7 11.557a9.55 9.55 0 0 0 9.557 9.556c2.23 0 4.274-.77 5.895-2.044a9.54 9.54 0 0 1-3.638-7.512"></path><path _ngcontent-serverApp-c70="" fill="#F79E1B" d="M37.903 11.557a9.55 9.55 0 0 1-9.557 9.556c-2.23 0-4.274-.77-5.895-2.044a9.5 9.5 0 0 0 3.638-7.512 9.58 9.58 0 0 0-3.637-7.513A9.5 9.5 0 0 1 28.343 2c5.286 0 9.56 4.302 9.56 9.557"></path></svg></li>
                    <li class="ms-2"><svg _ngcontent-serverApp-c70="" width="64" height="32" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" class="Icon_icon-content-1__kPDLF"><g _ngcontent-serverApp-c70="" fill-rule="evenodd" clip-rule="evenodd"><path _ngcontent-serverApp-c70="" fill="#009EE3" d="M7.236 12.422h4.1c2.2 0 3.03 1.114 2.902 2.751-.212 2.703-1.846 4.199-4.014 4.199H9.13c-.297 0-.497.197-.578.73l-.464 3.1c-.031.202-.137.318-.296.334H5.216c-.242 0-.328-.185-.264-.586l1.57-9.941c.062-.398.28-.587.714-.587"></path><path _ngcontent-serverApp-c70="" fill="#113984" d="M25.036 12.237c1.383 0 2.66.75 2.485 2.62-.212 2.223-1.403 3.453-3.281 3.458h-1.642c-.236 0-.35.193-.411.588l-.318 2.018c-.047.305-.204.455-.435.455h-1.527c-.243 0-.328-.155-.274-.504l1.26-8.088c.063-.398.212-.547.484-.547zm-2.487 4.331h1.243c.778-.03 1.294-.568 1.346-1.54.032-.6-.373-1.03-1.018-1.026l-1.17.005zm9.123 4.189c.14-.127.282-.193.262-.036l-.05.375c-.025.195.052.3.234.3h1.357c.228 0 .34-.093.396-.446l.836-5.248c.042-.263-.023-.392-.223-.392h-1.492c-.134 0-.2.075-.235.28l-.055.323c-.028.168-.106.198-.178.029-.252-.6-.898-.868-1.799-.847-2.092.043-3.503 1.632-3.654 3.668-.117 1.575 1.012 2.812 2.5 2.812 1.08 0 1.562-.317 2.106-.815zm-1.136-.808c-.9 0-1.528-.718-1.398-1.599.13-.88.972-1.599 1.873-1.599.9 0 1.528.719 1.398 1.6-.13.88-.971 1.599-1.873 1.599Zm6.826-4.656h-1.376c-.283 0-.399.212-.309.472l1.708 5.002-1.675 2.38c-.14.199-.032.38.166.38h1.546a.47.47 0 0 0 .46-.226l5.253-7.535c.162-.232.086-.475-.18-.475h-1.463c-.251 0-.352.1-.496.308l-2.19 3.175-.98-3.183c-.056-.192-.2-.298-.463-.298z"></path><path _ngcontent-serverApp-c70="" fill="#009EE3" d="M48.6 12.237c1.384 0 2.66.75 2.485 2.62-.211 2.223-1.402 3.453-3.28 3.458h-1.64c-.237 0-.351.193-.413.588l-.317 2.018c-.048.305-.204.455-.435.455h-1.527c-.244 0-.328-.155-.274-.504l1.262-8.09c.063-.399.212-.547.484-.547H48.6zm-2.487 4.331h1.244c.778-.03 1.294-.568 1.346-1.54.032-.6-.373-1.03-1.018-1.026l-1.17.005zm9.124 4.189c.14-.127.282-.193.262-.036l-.05.375c-.026.195.052.3.234.3h1.357c.228 0 .34-.093.395-.446l.837-5.248c.042-.263-.023-.392-.223-.392h-1.49c-.134 0-.2.075-.235.28l-.055.323c-.029.168-.106.198-.178.029-.253-.6-.898-.868-1.799-.847-2.092.043-3.503 1.632-3.654 3.668-.117 1.575 1.012 2.812 2.5 2.812 1.079 0 1.562-.317 2.106-.815zm-1.135-.808c-.901 0-1.529-.718-1.398-1.599.13-.88.972-1.599 1.873-1.599.9 0 1.528.719 1.398 1.6-.13.88-.973 1.599-1.873 1.599Zm6.258 1.455h-1.567a.184.184 0 0 1-.191-.212l1.376-8.716a.27.27 0 0 1 .26-.212h1.566a.186.186 0 0 1 .192.212l-1.376 8.716a.27.27 0 0 1-.26.214z"></path><path _ngcontent-serverApp-c70="" fill="#113984" d="M4.671 9h4.105c1.155 0 2.527.037 3.443.847.613.54.935 1.4.86 2.328-.251 3.134-2.125 4.89-4.64 4.89H6.415c-.345 0-.572.228-.67.846L5.18 21.51c-.037.233-.137.37-.317.388H2.33c-.28 0-.38-.212-.307-.68l1.82-11.533c.075-.465.33-.685.829-.685Z"></path><path _ngcontent-serverApp-c70="" fill="#172C70" d="m5.805 17.546.716-4.537c.063-.398.28-.588.715-.588h4.1c.678 0 1.227.105 1.657.301-.412 2.79-2.216 4.34-4.578 4.34h-2.02c-.272 0-.47.136-.59.484"></path></g></svg></li>
                    <li class="ms-2"><svg width="63" height="25" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" class="Icon_icon-content-1__kPDLF"><g _ngcontent-serverApp-c70="" clip-path="url('#bizum-large-a')"><path _ngcontent-serverApp-c70="" fill="#51555B" fill-rule="evenodd" d="M31.643 13.35c-.5 0-.927.428-.927.891v6.85c0 .499.428.927.927.927s.928-.428.928-.928v-6.813a.92.92 0 0 0-.928-.927m0-3.39c-.57 0-1.034.464-1.034 1.035s.464 1.07 1.034 1.07 1.035-.463 1.035-1.07c.036-.57-.464-1.034-1.035-1.034m9.06 4.317c0-.57-.463-.785-.855-.785H35.21c-.464 0-.821.357-.821.785 0 .464.357.82.82.82h3.033l-3.889 5.423a1.06 1.06 0 0 0-.178.535c0 .57.464.892.856.892h4.887c.464 0 .82-.357.82-.821a.807.807 0 0 0-.82-.82h-3.317l3.817-5.315c.214-.25.285-.5.285-.714m-13.554 4.28c0 1.142-.5 1.82-1.606 1.82-1.141 0-1.605-.678-1.605-1.82v-3.495h1.677c1.355 0 1.534.749 1.534 1.57zm1.855-1.961c0-1.927-1-3.14-3.354-3.14h-1.712v-2.568c0-.5-.428-.927-.892-.927a.944.944 0 0 0-.927.927v7.705c0 1.927 1.034 3.46 3.46 3.46 2.39 0 3.46-1.57 3.46-3.46v-1.962zM47.91 13.35c-.5 0-.928.428-.928.927v4.28c0 1.142-.5 1.82-1.605 1.82-1.142 0-1.605-.678-1.605-1.82v-4.28c0-.5-.428-.927-.892-.927-.5 0-.928.428-.928.927v4.28c0 1.927 1.035 3.46 3.46 3.46 2.39 0 3.46-1.569 3.46-3.46v-4.28c-.035-.5-.463-.927-.962-.927M62 16.845c0-1.926-.892-3.46-3.282-3.46-1.07 0-1.855.321-2.39.856-.535-.499-1.284-.856-2.39-.856-2.39 0-3.282 1.57-3.282 3.46v4.281c0 .5.428.927.892.927.5 0 .928-.428.928-.927v-4.28c0-1.142.356-1.82 1.462-1.82s1.463.678 1.463 1.82v4.28c0 .5.428.927.891.927.5 0 .928-.428.928-.927v-4.28c0-1.142.357-1.82 1.462-1.82 1.106 0 1.463.678 1.463 1.82v4.28c0 .5.428.927.892.927.5 0 .927-.428.927-.927zm-56.718-3.46a1.47 1.47 0 0 0 2.033-.32l1.712-2.355a1.47 1.47 0 0 0-.32-2.033 1.47 1.47 0 0 0-2.034.32l-1.712 2.355c-.464.642-.321 1.534.32 2.033m7.776-3.317a1.47 1.47 0 0 0-2.033.32L4.176 19.77a1.47 1.47 0 0 0 .321 2.034c.642.463 1.57.32 2.033-.321l6.814-9.382c.5-.642.356-1.57-.286-2.033m-8.418-.75a1.47 1.47 0 0 0-.321-2.033c-.642-.463-1.57-.356-2.034.321a1.444 1.444 0 0 0 .321 2.034c.643.463 1.534.32 2.034-.321m10.345 12.878a1.47 1.47 0 0 0-2.034.321 1.47 1.47 0 0 0 .321 2.034 1.47 1.47 0 0 0 2.034-.321c.463-.643.32-1.534-.321-2.034m-2.676-3.71a1.47 1.47 0 0 0-2.033.321l-1.712 2.355a1.47 1.47 0 0 0 .32 2.033c.643.464 1.57.321 2.034-.321l1.712-2.354a1.47 1.47 0 0 0-.32-2.034" clip-rule="evenodd"></path></g><defs _ngcontent-serverApp-c70=""><clipPath _ngcontent-serverApp-c70="" id="bizum-large-a"><path _ngcontent-serverApp-c70="" fill="#fff" d="M2 7h60v17.836H2z"></path></clipPath></defs></svg></li>
              </ul>
            </div>

            <!-- Text legal -->
            <div class="">
              <div
                class="TermsOfSale_terms__2leN4"
                id="checkout.step2.termsofsale"
              >
                <p class="lh-1 fw-lighter">
                  <small
                    >Al finalizar la compra, confirmas que has leído, entendido y
                    que aceptas las
                    <a
                        class="text-decoration-underline fw-normal"
                        href="#"
                        data-testid=""
                        target=""
                        onclick="return false;"
                        >Condiciones de venta</a
                      >
                  </small>
                </p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- ======== Columna de la derecha ======== -->
    <div
      class="col-12 col-sm-12 col-md-5 col-lg-4 order-0 order-md-2"
      id="main-right"
    >
      <div class="row">
        <div class="col-12 order-1 order-md-1">
          <h3 class="title mb-0 text-uppercase mb-3">Pago</h3>
          <!-- Codigo promocional -->
          <div class="mb-3 payment-methods mb-4">
            <div class="block-content">
              <!-- <h3 class="title mb-3">Payment Methods</h3> -->
              <div class="payment-accordion-radio">
                <div class="accordion" id="accordionExample">
                  <div
                    class="accordion-item card mb-2 px-3 border border-muted"
                  >
                    <div class="card-header p-3" id="headingTwo">
                      <button
                        class="card-link"
                        type="button"
                        data-bs-toggle="collapse"
                        data-bs-target="#collapseTwo"
                        aria-expanded="false"
                        aria-controls="collapseTwo"
                      >
                        <span class="customRadio clearfix mb-0">
                          <input
                            id="paymentRadio2"
                            value=""
                            name="payment"
                            type="radio"
                            class="radio"
                          />
                          <label
                            for="paymentRadio2"
                            class="mb-0 fw-bold text-uppercase"
                            >Código promocional</label
                          >
                        </span>
                      </button>
                    </div>
                    <div
                      id="collapseTwo"
                      class="accordion-collapse collapse"
                      aria-labelledby="headingTwo"
                      data-bs-parent="#accordionExample"
                    >
                      <div class="card-body px-0">
                        <p class="fw-light lh-1">
                          Introduce tu código promocional y disfruta de grandes
                          ahorros en tu compra.
                        </p>
                        <div class="input-group mb-0 d-flex">
                          <input
                            type="text"
                            class="form-control border border-muted mb-3"
                            placeholder="Código de promoción"
                            required=""
                          />
                          <button
                            class="btn-dark-ld border border-muted text-uppercase"
                            type="submit"
                          >
                            Aplicar
                          </button>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!--Cart Summary | solo visible en escritorio/tablet -->
          <div class="cart-info mb-3 d-none d-md-block bg-white border-0 p-0" *ngIf="!isMobile">
            <div class="cart-order-detail cart-col">
              <div class="row g-0">
                <span class="col-6 col-sm-6 cart-subtotal-title fw-light"
                  >Subtotal</span
                >
                <span
                  class="col-6 col-sm-6 cart-subtotal-title cart-subtotal text-end"
                >
                  <span class="price-small fw-normal">
                    <span class="price-main-small">{{
                      getFormattedPrice(totalCarts).integerPart
                    }}</span>
                    <span class="price-decimals-small">
                      <sup>{{ getFormattedPrice(totalCarts).decimalPart }}</sup>
                      <span class="currency-symbol-small">{{ euro }}</span>
                    </span>
                  </span>
                </span>
              </div>
              <div class="row g-0 d-none">
                <span class="col-6 col-sm-6 cart-subtotal-title"
                  ><strong>Coupon Discount</strong></span
                >
                <span
                  class="col-6 col-sm-6 cart-subtotal-title cart-subtotal text-end"
                  ><span class="money">-$25.00</span></span
                >
              </div>
              <div class="row g-0 d-none">
                <span class="col-6 col-sm-6 cart-subtotal-title"
                  ><strong>Tax</strong></span
                >
                <span
                  class="col-6 col-sm-6 cart-subtotal-title cart-subtotal text-end"
                  ><span class="money">$10.00</span></span
                >
              </div>
              <div class="row g-0">
                <span class="col-6 col-sm-6 cart-subtotal-title fw-light"
                  >Envío</span
                >
                <span
                  class="col-6 col-sm-6 cart-subtotal-title cart-subtotal text-end"
                  ><span class="money">Gratis</span></span
                >
              </div>
              <div class="row g-0">
                <span
                  class="col-6 col-sm-6 cart-subtotal-title fs-5 ls-1 text-uppercase"
                  >Total</span
                >
                <span
                  class="col-6 col-sm-6 cart-subtotal-title fs-5 cart-subtotal text-end"
                >
                  <strong>
                    <span class="price">
                      <span class="price-main">{{
                        getFormattedPrice(totalCarts).integerPart
                      }}</span>
                      <span class="price-decimals">
                        <sup>{{
                          getFormattedPrice(totalCarts).decimalPart
                        }}</sup>
                        <span class="currency-symbol">{{ euro }}</span>
                      </span>
                    </span>
                  </strong>
                </span>
              </div>

              <!-- Este div solo se muestra si eligió PayPal -->
              <div *ngIf="selectedPaymentMethod === 'paypal'" class="mt-4 mb-4" #paypal [class.disabled]="disablePayments"></div>

              <!-- Color button #2C2E2F -->
              <button 
                *ngIf="selectedPaymentMethod === 'card'" 
                (click)="payWithStripe()"
                class="btn-dark-ld mt-3 mb-2 text-uppercase">
                  <ng-container *ngIf="!isLoadingStripe; else loadingStripe">
                    Pagar con tarjeta
                  </ng-container>

                  <ng-template #loadingStripe>
                    <!-- <span class="spinner-border spinner-border-sm" role="status"></span>
                    Procesando... -->
                    <span class="loading-spinner">
                      <div class="sp sp-bars"></div>
                    </span> 
                  </ng-template>
              </button>


              

              <div class="d-flex mb-3">
                <ul class="d-flex flex-row">
                    <li class="ms-0"><svg _ngcontent-serverApp-c70="" width="44" height="28" xmlns="http://www.w3.org/2000/svg" class="Icon_icon-content-1__kPDLF"><title _ngcontent-serverApp-c70="" lang="en">Visa</title><path _ngcontent-serverApp-c70="" fill="#1434CB" d="M27.787 8.02c-2.809 0-5.32 1.456-5.32 4.146 0 3.085 4.453 3.298 4.453 4.847 0 .653-.748 1.237-2.025 1.237-1.813 0-3.168-.816-3.168-.816l-.58 2.714s1.561.69 3.633.69c3.071 0 5.488-1.528 5.488-4.264 0-3.26-4.47-3.466-4.47-4.904 0-.511.613-1.072 1.887-1.072 1.437 0 2.61.594 2.61.594l.566-2.622s-1.275-.55-3.074-.55m-25.699.198-.068.396s1.182.216 2.246.647c1.37.495 1.468.783 1.699 1.678l2.515 9.695h3.371l5.194-12.416h-3.364l-3.337 8.441-1.362-7.155c-.125-.819-.757-1.286-1.532-1.286zm16.31 0-2.639 12.416h3.208l2.629-12.416zm17.89 0c-.774 0-1.184.414-1.485 1.138l-4.699 11.278h3.364l.65-1.88h4.098l.396 1.88h2.968L38.99 8.218zm.437 3.354.997 4.66H35.05l1.674-4.66Z"></path></svg></li>
                    <li class="ms-2"><svg _ngcontent-serverApp-c70="" width="44" height="28" xmlns="http://www.w3.org/2000/svg" viewBox="7 -2 31 31" class="Icon_icon-content-1__kPDLF"><title _ngcontent-serverApp-c70="" lang="en">Mastercard</title><path _ngcontent-serverApp-c70="" d="M12.601 25.947v-1.592c0-.61-.371-1.009-1.008-1.009-.319 0-.665.105-.903.452-.186-.29-.452-.452-.85-.452a.86.86 0 0 0-.743.372v-.319H8.54v2.548h.557V24.54c0-.451.238-.665.61-.665.37 0 .556.238.556.665v1.407h.557V24.54c0-.451.266-.665.609-.665.371 0 .557.238.557.665v1.407zm8.258-2.548h-.903v-.77h-.557v.77h-.504v.504h.504v1.17c0 .584.238.927.875.927.238 0 .504-.08.69-.186l-.16-.479a.9.9 0 0 1-.48.133c-.266 0-.371-.16-.371-.424v-1.14h.903v-.505zm4.726-.056a.76.76 0 0 0-.665.371v-.318h-.557v2.548h.557V24.51c0-.423.185-.665.532-.665.105 0 .238.028.346.053l.16-.532c-.11-.022-.268-.022-.373-.022Zm-7.142.266c-.266-.185-.637-.266-1.036-.266-.637 0-1.06.319-1.06.823 0 .424.318.665.875.742l.266.028c.29.053.451.133.451.266 0 .186-.213.319-.584.319-.372 0-.665-.133-.85-.266l-.267.423c.29.214.69.319 1.089.319.742 0 1.169-.346 1.169-.823 0-.451-.346-.69-.875-.77l-.266-.028c-.239-.028-.424-.08-.424-.238 0-.185.185-.29.48-.29.318 0 .636.132.797.213zm14.812-.266a.76.76 0 0 0-.665.371v-.318h-.557v2.548h.557V24.51c0-.423.185-.665.532-.665.105 0 .238.028.346.053l.16-.526c-.107-.028-.265-.028-.373-.028Zm-7.114 1.33c0 .77.532 1.327 1.355 1.327.371 0 .637-.08.903-.29l-.266-.452c-.213.16-.424.238-.665.238-.451 0-.77-.319-.77-.823 0-.48.319-.798.77-.822.238 0 .452.08.665.238l.266-.452c-.266-.213-.532-.29-.903-.29-.823-.004-1.355.556-1.355 1.326m5.15 0V23.4h-.557v.319c-.186-.239-.452-.372-.798-.372-.717 0-1.274.557-1.274 1.327s.557 1.327 1.274 1.327c.371 0 .637-.133.798-.371v.318h.557v-1.274Zm-2.045 0c0-.451.291-.822.77-.822.452 0 .77.346.77.822 0 .452-.318.823-.77.823-.476-.028-.77-.374-.77-.823m-6.661-1.33c-.743 0-1.275.532-1.275 1.327 0 .798.532 1.327 1.302 1.327a1.62 1.62 0 0 0 1.037-.346l-.267-.4a1.26 1.26 0 0 1-.742.266c-.346 0-.69-.16-.77-.609h1.884v-.213c.024-.82-.455-1.352-1.17-1.352Zm0 .48c.346 0 .584.213.637.609h-1.327c.052-.343.29-.61.69-.61Zm13.83.85v-2.282h-.556v1.327c-.186-.239-.452-.372-.798-.372-.718 0-1.274.557-1.274 1.327S34.343 26 35.061 26c.371 0 .637-.133.798-.371v.318h.556zm-2.044 0c0-.451.29-.822.77-.822.452 0 .77.346.77.822 0 .452-.318.823-.77.823-.48-.028-.77-.374-.77-.823m-18.637 0V23.4h-.557v.319c-.185-.239-.451-.372-.798-.372-.717 0-1.274.557-1.274 1.327s.557 1.327 1.274 1.327c.372 0 .638-.133.798-.371v.318h.557v-1.274Zm-2.069 0c0-.451.29-.822.77-.822.452 0 .77.346.77.822 0 .452-.318.823-.77.823-.48-.028-.77-.374-.77-.823"></path><path _ngcontent-serverApp-c70="" fill="#FF5A00" d="M26.62 4.044h-8.362V19.07h8.363V4.044Z"></path><path _ngcontent-serverApp-c70="" fill="#EB001B" d="M18.814 11.557a9.58 9.58 0 0 1 3.637-7.513A9.5 9.5 0 0 0 16.557 2 9.55 9.55 0 0 0 7 11.557a9.55 9.55 0 0 0 9.557 9.556c2.23 0 4.274-.77 5.895-2.044a9.54 9.54 0 0 1-3.638-7.512"></path><path _ngcontent-serverApp-c70="" fill="#F79E1B" d="M37.903 11.557a9.55 9.55 0 0 1-9.557 9.556c-2.23 0-4.274-.77-5.895-2.044a9.5 9.5 0 0 0 3.638-7.512 9.58 9.58 0 0 0-3.637-7.513A9.5 9.5 0 0 1 28.343 2c5.286 0 9.56 4.302 9.56 9.557"></path></svg></li>
                    <li class="ms-2"><svg _ngcontent-serverApp-c70="" width="64" height="32" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" class="Icon_icon-content-1__kPDLF"><g _ngcontent-serverApp-c70="" fill-rule="evenodd" clip-rule="evenodd"><path _ngcontent-serverApp-c70="" fill="#009EE3" d="M7.236 12.422h4.1c2.2 0 3.03 1.114 2.902 2.751-.212 2.703-1.846 4.199-4.014 4.199H9.13c-.297 0-.497.197-.578.73l-.464 3.1c-.031.202-.137.318-.296.334H5.216c-.242 0-.328-.185-.264-.586l1.57-9.941c.062-.398.28-.587.714-.587"></path><path _ngcontent-serverApp-c70="" fill="#113984" d="M25.036 12.237c1.383 0 2.66.75 2.485 2.62-.212 2.223-1.403 3.453-3.281 3.458h-1.642c-.236 0-.35.193-.411.588l-.318 2.018c-.047.305-.204.455-.435.455h-1.527c-.243 0-.328-.155-.274-.504l1.26-8.088c.063-.398.212-.547.484-.547zm-2.487 4.331h1.243c.778-.03 1.294-.568 1.346-1.54.032-.6-.373-1.03-1.018-1.026l-1.17.005zm9.123 4.189c.14-.127.282-.193.262-.036l-.05.375c-.025.195.052.3.234.3h1.357c.228 0 .34-.093.396-.446l.836-5.248c.042-.263-.023-.392-.223-.392h-1.492c-.134 0-.2.075-.235.28l-.055.323c-.028.168-.106.198-.178.029-.252-.6-.898-.868-1.799-.847-2.092.043-3.503 1.632-3.654 3.668-.117 1.575 1.012 2.812 2.5 2.812 1.08 0 1.562-.317 2.106-.815zm-1.136-.808c-.9 0-1.528-.718-1.398-1.599.13-.88.972-1.599 1.873-1.599.9 0 1.528.719 1.398 1.6-.13.88-.971 1.599-1.873 1.599Zm6.826-4.656h-1.376c-.283 0-.399.212-.309.472l1.708 5.002-1.675 2.38c-.14.199-.032.38.166.38h1.546a.47.47 0 0 0 .46-.226l5.253-7.535c.162-.232.086-.475-.18-.475h-1.463c-.251 0-.352.1-.496.308l-2.19 3.175-.98-3.183c-.056-.192-.2-.298-.463-.298z"></path><path _ngcontent-serverApp-c70="" fill="#009EE3" d="M48.6 12.237c1.384 0 2.66.75 2.485 2.62-.211 2.223-1.402 3.453-3.28 3.458h-1.64c-.237 0-.351.193-.413.588l-.317 2.018c-.048.305-.204.455-.435.455h-1.527c-.244 0-.328-.155-.274-.504l1.262-8.09c.063-.399.212-.547.484-.547H48.6zm-2.487 4.331h1.244c.778-.03 1.294-.568 1.346-1.54.032-.6-.373-1.03-1.018-1.026l-1.17.005zm9.124 4.189c.14-.127.282-.193.262-.036l-.05.375c-.026.195.052.3.234.3h1.357c.228 0 .34-.093.395-.446l.837-5.248c.042-.263-.023-.392-.223-.392h-1.49c-.134 0-.2.075-.235.28l-.055.323c-.029.168-.106.198-.178.029-.253-.6-.898-.868-1.799-.847-2.092.043-3.503 1.632-3.654 3.668-.117 1.575 1.012 2.812 2.5 2.812 1.079 0 1.562-.317 2.106-.815zm-1.135-.808c-.901 0-1.529-.718-1.398-1.599.13-.88.972-1.599 1.873-1.599.9 0 1.528.719 1.398 1.6-.13.88-.973 1.599-1.873 1.599Zm6.258 1.455h-1.567a.184.184 0 0 1-.191-.212l1.376-8.716a.27.27 0 0 1 .26-.212h1.566a.186.186 0 0 1 .192.212l-1.376 8.716a.27.27 0 0 1-.26.214z"></path><path _ngcontent-serverApp-c70="" fill="#113984" d="M4.671 9h4.105c1.155 0 2.527.037 3.443.847.613.54.935 1.4.86 2.328-.251 3.134-2.125 4.89-4.64 4.89H6.415c-.345 0-.572.228-.67.846L5.18 21.51c-.037.233-.137.37-.317.388H2.33c-.28 0-.38-.212-.307-.68l1.82-11.533c.075-.465.33-.685.829-.685Z"></path><path _ngcontent-serverApp-c70="" fill="#172C70" d="m5.805 17.546.716-4.537c.063-.398.28-.588.715-.588h4.1c.678 0 1.227.105 1.657.301-.412 2.79-2.216 4.34-4.578 4.34h-2.02c-.272 0-.47.136-.59.484"></path></g></svg></li>
                    <li class="ms-2"><svg width="63" height="25" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" class="Icon_icon-content-1__kPDLF"><g _ngcontent-serverApp-c70="" clip-path="url('#bizum-large-a')"><path _ngcontent-serverApp-c70="" fill="#51555B" fill-rule="evenodd" d="M31.643 13.35c-.5 0-.927.428-.927.891v6.85c0 .499.428.927.927.927s.928-.428.928-.928v-6.813a.92.92 0 0 0-.928-.927m0-3.39c-.57 0-1.034.464-1.034 1.035s.464 1.07 1.034 1.07 1.035-.463 1.035-1.07c.036-.57-.464-1.034-1.035-1.034m9.06 4.317c0-.57-.463-.785-.855-.785H35.21c-.464 0-.821.357-.821.785 0 .464.357.82.82.82h3.033l-3.889 5.423a1.06 1.06 0 0 0-.178.535c0 .57.464.892.856.892h4.887c.464 0 .82-.357.82-.821a.807.807 0 0 0-.82-.82h-3.317l3.817-5.315c.214-.25.285-.5.285-.714m-13.554 4.28c0 1.142-.5 1.82-1.606 1.82-1.141 0-1.605-.678-1.605-1.82v-3.495h1.677c1.355 0 1.534.749 1.534 1.57zm1.855-1.961c0-1.927-1-3.14-3.354-3.14h-1.712v-2.568c0-.5-.428-.927-.892-.927a.944.944 0 0 0-.927.927v7.705c0 1.927 1.034 3.46 3.46 3.46 2.39 0 3.46-1.57 3.46-3.46v-1.962zM47.91 13.35c-.5 0-.928.428-.928.927v4.28c0 1.142-.5 1.82-1.605 1.82-1.142 0-1.605-.678-1.605-1.82v-4.28c0-.5-.428-.927-.892-.927-.5 0-.928.428-.928.927v4.28c0 1.927 1.035 3.46 3.46 3.46 2.39 0 3.46-1.569 3.46-3.46v-4.28c-.035-.5-.463-.927-.962-.927M62 16.845c0-1.926-.892-3.46-3.282-3.46-1.07 0-1.855.321-2.39.856-.535-.499-1.284-.856-2.39-.856-2.39 0-3.282 1.57-3.282 3.46v4.281c0 .5.428.927.892.927.5 0 .928-.428.928-.927v-4.28c0-1.142.356-1.82 1.462-1.82s1.463.678 1.463 1.82v4.28c0 .5.428.927.891.927.5 0 .928-.428.928-.927v-4.28c0-1.142.357-1.82 1.462-1.82 1.106 0 1.463.678 1.463 1.82v4.28c0 .5.428.927.892.927.5 0 .927-.428.927-.927zm-56.718-3.46a1.47 1.47 0 0 0 2.033-.32l1.712-2.355a1.47 1.47 0 0 0-.32-2.033 1.47 1.47 0 0 0-2.034.32l-1.712 2.355c-.464.642-.321 1.534.32 2.033m7.776-3.317a1.47 1.47 0 0 0-2.033.32L4.176 19.77a1.47 1.47 0 0 0 .321 2.034c.642.463 1.57.32 2.033-.321l6.814-9.382c.5-.642.356-1.57-.286-2.033m-8.418-.75a1.47 1.47 0 0 0-.321-2.033c-.642-.463-1.57-.356-2.034.321a1.444 1.444 0 0 0 .321 2.034c.643.463 1.534.32 2.034-.321m10.345 12.878a1.47 1.47 0 0 0-2.034.321 1.47 1.47 0 0 0 .321 2.034 1.47 1.47 0 0 0 2.034-.321c.463-.643.32-1.534-.321-2.034m-2.676-3.71a1.47 1.47 0 0 0-2.033.321l-1.712 2.355a1.47 1.47 0 0 0 .32 2.033c.643.464 1.57.321 2.034-.321l1.712-2.354a1.47 1.47 0 0 0-.32-2.034" clip-rule="evenodd"></path></g><defs _ngcontent-serverApp-c70=""><clipPath _ngcontent-serverApp-c70="" id="bizum-large-a"><path _ngcontent-serverApp-c70="" fill="#fff" d="M2 7h60v17.836H2z"></path></clipPath></defs></svg></li>
                </ul>
              </div>

              <!-- Text legal -->
              <div class="mb-5">
                <div
                  class=""
                  id="checkout.step2.termsofsale"
                >
                  <p class="lh-1 fw-lighter">
                    <small
                      >Al finalizar la compra, confirmas que has leído, entendido y
                      que aceptas las
                      <a
                          class="text-decoration-underline fw-normal"
                          href="#"
                          data-testid=""
                          target=""
                          >Condiciones de venta</a
                        >
                    </small>
                  </p>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="col-12 order-0 order-md-2">
          <!-- Carts Lists -->
          <div class="row">
            <div class="col-12 col-sm-12 col-md-12 col-lg-12">
              <!-- Order Summary -->
              <div class="block order-summary p-0">
                <div class="block-content">
                  <h3 class="mb-0">Artículos ({{ listCarts.length }})</h3>
                  <div class="order-list">
                    <ng-container *ngFor="let cart of listCarts">
                      <div
                        class="d-flex py-3 align-items-start gap-3 flex-wrap"
                      >
                        <!-- Imagen -->
                        <div style="flex: 0 0 auto">
                          <a
                            [routerLink]="[
                              '/landing-product',
                              cart.product.slug
                            ]"
                          >
                            <img
                              [src]="cart.variedad.files[1].preview_url"
                              alt="product"
                              title="Product"
                              style="
                                width: auto;
                                height: 140px;
                                object-fit: cover;
                              "
                              class="img-fluid"
                            />
                          </a>
                        </div>

                        <!-- Info del producto -->
                        <div
                          class="flex-grow-1 d-flex flex-column justify-content-between"
                        >                          
                          <!-- Datos adicionales -->
                          <div class="d-flex flex-column">
                            <div class="fw-normal" style="height: 20px;">
                                  <a href="#" class="fw-normal text-black text-truncate d-inline-block product-title" onclick="return false;" [routerLink]="['/', this.locale, this.country, 'shop', 'product', cart.product.slug]">{{ cart.product.title }}</a>
                              </div>
                              <div class="">
                                  <span class="money">
                                      <span class="price-small fw-bold">
                                          <span class="price-main-small">{{ getFormattedPrice(cart.price_unitario).integerPart }}</span>
                                          <span class="price-decimals-small">
                                              <sup>{{ getFormattedPrice(cart.price_unitario).decimalPart }}</sup>
                                              <span class="currency-symbol-small">{{ euro }}</span>
                                          </span>
                                      </span>
                                  </span>
                              </div>
                              <div class="d-flex fw-normal">
                                  <span class="w-25">Color</span>
                                  <span class="ms-lg-3 ms-5">{{ cart.variedad.color }}</span>
                              </div>
                              <div class="d-flex fw-normal" *ngIf="cart.variedad">
                                  <span class="w-25">Talla</span>
                                  <span class="ms-lg-3 ms-5">{{ cart.variedad.valor }}</span>
                              </div>
                              <div class="d-flex fw-normal">
                                  <span class="w-25">Cantidad</span>
                                  <span class="ms-lg-3 ms-5">{{ cart.cantidad}}</span>
                              </div>
                              <div class="d-flex fw-normal mb-2">
                                  <span class="w-25">Total</span>
                                  <span class="money ms-lg-3 ms-5">
                                      <span class="price-small fw-bold">
                                          <span class="price-main-small">{{ getFormattedPrice(cart.total).integerPart }}</span>
                                          <span class="price-decimals-small">
                                              <sup>{{ getFormattedPrice(cart.total).decimalPart }}</sup>
                                              <span class="currency-symbol-small">{{ euro }}</span>
                                          </span>
                                      </span>
                                  </span>
                              </div>
                          </div>

                          <!-- Datos adicionales -->
                          <div class="mt-2 d-none">
                            <p class="mb-1 small">
                              Color: {{ cart.variedad.color }}
                            </p>
                            <p class="mb-1 small">
                              Talla: {{ cart.variedad.valor }}
                            </p>
                            <p class="mb-1 small">
                              Cantidad: {{ cart.cantidad }}
                            </p>
                          </div>

                          <!-- Subtotal -->
                          <div class="mt-2 d-none">
                            <div class="fw-bold">
                              Subtotal:
                              <span class="price-small">
                                <span class="price-main-small">{{
                                  getFormattedPrice(cart.total).integerPart
                                }}</span>
                                <span class="price-decimals-small">
                                  <sup>{{
                                    getFormattedPrice(cart.total).decimalPart
                                  }}</sup>
                                  <span class="currency-symbol-small">{{
                                    euro
                                  }}</span>
                                </span>
                              </span>
                            </div>
                          </div>
                        </div>

                        <!-- Botón eliminar -->
                        <div style="flex: 0 0 auto" class="d-none">
                          <a
                            href="#"
                            onclick="return false;"
                            (click)="removeCart(cart)"
                            class="btn btn-secondary cart-remove remove-icon"
                            data-bs-toggle="tooltip"
                            data-bs-placement="top"
                            title="Eliminar del carrito"
                          >
                            <i class="icon anm anm-times-r"></i>
                          </a>
                        </div>
                      </div>
                    </ng-container>
                  </div>
                </div>
              </div>
              <!-- End Order Summary -->
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
