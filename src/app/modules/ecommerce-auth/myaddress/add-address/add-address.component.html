<!--Page Wrapper-->
<div class="page-wrapper">

    <!-- Body Container -->
    <div id="page-content">

        <!--Page Header-->
        <div class="page-header text-center bg-transparent mb-0 py-5">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-12 col-sm-12 col-md-12 col-lg-12 d-flex justify-content-between align-items-center">
                        <div class="page-title text-uppercase"><h2>A침adir direcci칩n</h2></div>
                        <!--Breadcrumbs-->
                        <div class="breadcrumbs">
                            <a  href="index.html" 
                                onclick="return false;" 
                                class="text-decoration-underline" 
                                routerLink="/" title="Back to the home page">Lujandev.com
                            </a>
                            <a  [routerLink]="['/', this.country, this.locale, 'account', 'myaddresses']"
                                class="text-decoration-underline">
                                <span class="main-title"><i class="icon anm anm-angle-right-l"></i>Mis direcciones</span>
                            </a>
                            
                            <span class="main-title fw-bold"><i class="icon anm anm-angle-right-l"></i>A침adir direcci칩n</span>
                        </div>
                        <!--End Breadcrumbs-->
                    </div>
                </div>
            </div>
        </div>
        <!--End Page Header-->

        <!--Main Content-->
        <div class="container">
            <div class="row">
                <div class="col-12 col-sm-12 col-md-12 col-lg-12">
                    <div class="dashboard-content h-100" id="top-tabContent">
                        <!-- Address Book -->
                        <div class="tab-pane h-100" id="address">
                            <div class="address-card mt-0 h-100">
                                <!-- Mostrar la lista de direcciones -->
                                <div class="address-book-section">
                                    <!-- <h3 class="title mb-5 text-center">A침adir direcci칩n</h3> -->
                                    <p class="text-center mb-4 lh-1">Para garantizar la correcta entrega de tu pedido, <br> por favor a침ade una direcci칩n de env칤o antes <br>  de completar tu compra.</p>
                                    <form #addressForm="ngForm" novalidate (ngSubmit)="store()">
                                        <fieldset>
                                            <!-- Nombre -->
                                            
                                            <div class="row justify-content-center">
                                                <div class="form-group col-12 col-sm-6 col-md-6 col-lg-4">
                                                    <label for="firstname" class="form-label d-none">Nombre <span class="required">*</span></label>
                                                    <input name="firstname" 
                                                            [(ngModel)]="name" 
                                                            #firstname="ngModel" 
                                                            id="firstname" 
                                                            type="text" 
                                                            required 
                                                            placeholder="Nombre" 
                                                            class="form-control py-4" 
                                                            [ngClass]="{'is-invalid': firstname.invalid && (firstname.touched || addressForm.submitted)}" />
                                                    <div *ngIf="firstname.invalid && (firstname.touched || addressForm.submitted)" class="invalid-feedback">
                                                        Completa este campo para continuar
                                                    </div>
                                                </div>
                                            </div>

                                            <!-- Apellidos -->
                                            
                                            <div class="row justify-content-center">
                                                <div class="form-group col-12 col-sm-6 col-md-6 col-lg-4">
                                                    <label for="lastname" class="form-label d-none">Apellidos <span class="required">*</span></label>
                                                    <input name="lastname" 
                                                        [(ngModel)]="surname" 
                                                        #lastname="ngModel" 
                                                        id="lastname" 
                                                        type="text" 
                                                        required 
                                                        placeholder="Apellidos" 
                                                        class="form-control py-4" 
                                                        [ngClass]="{'is-invalid': lastname.invalid && (lastname.touched || addressForm.submitted)}" 
                                                    />
                                                    <div *ngIf="lastname.invalid && (lastname.touched || addressForm.submitted)" class="invalid-feedback">
                                                        Completa este campo para continuar
                                                    </div>
                                                </div>
                                            </div>


                                            <!-- Email -->
                                           
                                            <div class="row justify-content-center">
                                                <div class="form-group  col-12 col-sm-6 col-md-6 col-lg-4">
                                                    <label for="email" class="form-label d-none">E-Mail <span class="required">*</span></label>
                                                    <input  name="email" 
                                                            [(ngModel)]="email" 
                                                            #emailRef="ngModel" 
                                                            id="email" 
                                                            type="email" 
                                                            required 
                                                            placeholder="E-mail" 
                                                            class="form-control py-4" 
                                                            [ngClass]="{'is-invalid': emailRef.invalid && (emailRef.touched || addressForm.submitted)}" 
                                                    />
                                                    <div *ngIf="emailRef.invalid && (emailRef.touched || addressForm.submitted)" class="invalid-feedback">
                                                        Completa este campo para continuar
                                                    </div>
                                                </div>
                                            </div>

                                            <!-- Pa칤s -->
                                            <div class="row justify-content-center">
                                                <div class="form-group col-12 col-sm-6 col-md-6 col-lg-4">
                                                    <label for="address_country1" class="form-label d-none">Pa칤s <span class="required">*</span></label>
                                                    <select id="address_country1" 
                                                            name="address[country]" 
                                                            [(ngModel)]="pais" 
                                                            #paisSelect="ngModel" 
                                                            required 
                                                            class="form-control py-4 fw-light" 
                                                            [ngClass]="{'is-invalid': paisSelect.invalid && (paisSelect.touched || addressForm.submitted)}">

                                                        <option value="" disabled>Pa칤s</option>
                                                        <optgroup label="游쀯릖 Uni칩n Europea">
                                                            <option *ngFor="let country of supportedCountries" 
                                                                    [value]="country.code" 
                                                                    [label]="country.name">
                                                                {{ country.name }}
                                                            </option>
                                                        </optgroup>
                                                    </select>
                                                    <div *ngIf="paisSelect.invalid && (paisSelect.touched || addressForm.submitted)" class="invalid-feedback">
                                                        Selecciona un pa칤s
                                                    </div>
                                                </div>
                                            </div>


                                            <!-- Calle -->
                                            <div class="row justify-content-center">
                                                <div class="form-group col-12 col-sm-6 col-md-6 col-lg-4">
                                                    <label for="calle" class="form-label d-none">Calle <span class="required">*</span></label>
                                                    <input  name="calle" 
                                                            id="calle" 
                                                            type="text" 
                                                            required 
                                                            [(ngModel)]="calle" 
                                                            #calleRef="ngModel" 
                                                            placeholder="Calle (ej: Calle Gran V칤a)" 
                                                            class="form-control py-4 fw-light" 
                                                            [ngClass]="{'is-invalid': calleRef.invalid && (calleRef.touched || addressForm.submitted)}" />
                                                    <div *ngIf="calleRef.invalid && (calleRef.touched || addressForm.submitted)" class="invalid-feedback">
                                                        Completa este campo para continuar
                                                    </div>
                                                </div>
                                            </div>

                                            <!-- N칰mero -->
                                            <div class="row justify-content-center">
                                                <div class="form-group col-12 col-sm-6 col-md-6 col-lg-4">
                                                    <label for="numero" class="form-label d-none">N칰mero <span class="required">*</span></label>
                                                    <input  name="numero" 
                                                            id="numero" 
                                                            type="text" 
                                                            required 
                                                            [(ngModel)]="numero" 
                                                            #numeroRef="ngModel" 
                                                            placeholder="N칰mero (ej: 123)" 
                                                            class="form-control py-4 fw-light" 
                                                            [ngClass]="{'is-invalid': numeroRef.invalid && (numeroRef.touched || addressForm.submitted)}" />
                                                    <div *ngIf="numeroRef.invalid && (numeroRef.touched || addressForm.submitted)" class="invalid-feedback">
                                                        Debes incluir el n칰mero de la calle para el env칤o
                                                    </div>
                                                </div>
                                            </div>

                                            <!-- Apartamento/Piso (Opcional) -->
                                            <div class="row justify-content-center">
                                                <div class="form-group col-12 col-sm-6 col-md-6 col-lg-4">
                                                    <label for="apartamento" class="form-label d-none">Apartamento/Piso</label>
                                                    <input  name="apartamento" 
                                                            id="apartamento" 
                                                            type="text" 
                                                            [(ngModel)]="apartamento" 
                                                            placeholder="Apartamento/Piso (opcional, ej: 3췈 B)" 
                                                            class="form-control py-4 fw-light" />
                                                    <small class="form-text text-muted">Opcional: piso, puerta, escalera, etc.</small>
                                                </div>
                                            </div>


                                            <!-- Codigo postal -->
                                           
                                            <div class="row justify-content-center">
                                                <div class="form-group col-12 col-sm-6 col-md-6 col-lg-4">
                                                    <label for="postcode" class="form-label d-none">C칩digo postal <span class="required">*</span></label>
                                                    <input  name="postcode" 
                                                            id="postcode" 
                                                            type="text" 
                                                            required 
                                                            [(ngModel)]="zipcode" 
                                                            #zipcodeRef="ngModel"
                                                            placeholder="C칩digo postal"
                                                            class="form-control py-4 fw-light" 
                                                            [ngClass]="{'is-invalid': zipcodeRef.invalid && (zipcodeRef.touched || addressForm.submitted)}" 
                                                    />
                                                    <div *ngIf="zipcodeRef.invalid && (zipcodeRef.touched || addressForm.submitted)" class="invalid-feedback">
                                                        Completa este campo para continuar
                                                    </div>
                                                </div>
                                            </div>


                                            <!-- Poblaci칩n -->
                                            
                                            <div class="row justify-content-center">
                                                <div class="form-group col-12 col-sm-6 col-md-6 col-lg-4">
                                                    <label for="new-city" class="form-label d-none">Poblaci칩n <span class="required">*</span></label>
                                                    <input  name="city" 
                                                            placeholder="Poblaci칩n" 
                                                            class="form-control py-4 fw-light" 
                                                            required 
                                                            [(ngModel)]="poblacion" 
                                                            #poblacionRef="ngModel" 
                                                            [ngClass]="{'is-invalid': poblacionRef.invalid && (poblacionRef.touched || addressForm.submitted)}" 
                                                            id="new-city" 
                                                            type="text" />
                                                    <div *ngIf="poblacionRef.invalid && (poblacionRef.touched || addressForm.submitted)" class="invalid-feedback">
                                                        Completa este campo para continuar
                                                    </div>
                                                </div>
                                            </div>

                                            <!-- Provincia/Estado -->
                                            <div class="row justify-content-center">
                                                <div class="form-group col-12 col-sm-6 col-md-6 col-lg-4">
                                                    <label for="address_State" class="form-label d-none">Provincia/Estado <span class="required">*</span></label>
                                                    <input  name="state" 
                                                            placeholder="Provincia o Estado" 
                                                            class="form-control py-4 fw-light" 
                                                            required 
                                                            [(ngModel)]="ciudad" 
                                                            #ciudadRef="ngModel" 
                                                            [ngClass]="{'is-invalid': ciudadRef.invalid && (ciudadRef.touched || addressForm.submitted)}" 
                                                            id="address_State" 
                                                            type="text" />
                                                    <div *ngIf="ciudadRef.invalid && (ciudadRef.touched || addressForm.submitted)" class="invalid-feedback">
                                                        Completa este campo para continuar
                                                    </div>
                                                </div>
                                            </div>

                                            <!-- Telefono -->
                                           
                                            <div class="row justify-content-center">
                                                <div class="form-group col-12 col-sm-6 col-md-6 col-lg-4">
                                                    <label for="phone" class="form-label d-none">M칩vil <span class="required">*</span></label>
                                                    <input  name="phone" 
                                                            id="phone" 
                                                            type="tel" 
                                                            required 
                                                            [(ngModel)]="phone" 
                                                            #phoneRef="ngModel" 
                                                            placeholder="M칩vil" 
                                                            class="form-control py-4 fw-light" 
                                                            [ngClass]="{'is-invalid': phoneRef.invalid && (phoneRef.touched || addressForm.submitted)}" 
                                                    />
                                                    <div *ngIf="phoneRef.invalid && (phoneRef.touched || addressForm.submitted)" class="invalid-feedback">
                                                        Completa este campo para continuar
                                                    </div>
                                                </div>
                                            </div>


                                            <!-- CheckBook-->
                                            <div class="row justify-content-center pt-2 pb-4">
                                                <div class="form-group col-12 col-sm-6 col-md-6 col-lg-4">
                                                    <div class="checkout-tearm customCheckbox">
                                                        <input id="checkout_usual_shipping_address" name="checkout_usual_shipping_address" [(ngModel)]="usual_shipping_address" type="checkbox" value="checkout tearm" required />
                                                        <label for="checkout_usual_shipping_address"> Elegir como direcci칩n de env칤o habitual</label>
                                                    </div>
                                                </div>
                                            </div>

                                            <!-- Mensaje de validaci칩n -->
                                            <div class="row justify-content-center" *ngIf="isValidating">
                                                <div class="form-group col-12 col-sm-6 col-md-6 col-lg-4">
                                                    <div class="alert alert-info d-flex align-items-center">
                                                        <div class="spinner-border spinner-border-sm me-2" role="status">
                                                            <span class="visually-hidden">Validando...</span>
                                                        </div>
                                                        <span>{{ validationMessage }}</span>
                                                    </div>
                                                </div>
                                            </div>

                                            <!-- Button register o update -->
                                            <div class="row justify-content-center">
                                                <div class="form-group col-12 col-sm-6 col-md-6 col-lg-4">
                                                    <button type="submit" 
                                                            class="btn-dark-ld me-1 text-uppercase" 
                                                            [disabled]="loading || isValidating">
                                                        <ng-container *ngIf="!loading && !isValidating">Guardar direcci칩n</ng-container>
                                                        <ng-container *ngIf="isValidating">
                                                            <span class="spinner-border spinner-border-sm me-2"></span>
                                                            Validando...
                                                        </ng-container>
                                                        <ng-container *ngIf="loading && !isValidating">
                                                            <span class="spinner-border spinner-border-sm me-2"></span>
                                                            Guardando...
                                                        </ng-container>
                                                    </button>
                                                    <p class="mt-3" [ngClass]="status ? 'text-success' : 'text-danger'" *ngIf="this.validMessage">{{ this.errorOrSuccessMessage }}</p>
                                                </div>
                                            </div>
                                        </fieldset>
                                    </form>
                                </div>
                            </div>
                        </div>
                        <!-- End Address Book -->
                    </div>
                </div>
            </div>
        </div>
        <!--End Main Content-->
    </div>
    <!-- End Body Container -->

    <!--Scoll Top-->
    <div id="site-scroll"><i class="icon anm anm-arw-up"></i></div>
    <!--End Scoll Top-->

</div>
<!--End Page Wrapper-->