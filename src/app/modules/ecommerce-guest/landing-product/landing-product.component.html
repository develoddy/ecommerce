<!--Page Wrapper-->

<!-- Loading Spinner Elegante -->
<div *ngIf="loader.loading$ | async" class="loading-spinner d-flex justify-content-center align-items-center" style="min-height: 400px;">
    <div class="text-center">
        <div class="spinner-border text-primary" role="status" style="width: 3rem; height: 3rem;">
            <span class="sr-only"></span>
        </div>
        <h4 class="text-muted mt-3">Cargando producto...</h4>
    </div>
</div>

<div class="page-wrapper" *ngIf="!(loader.loading$ | async) && product_selected && related_products && interest_products">
    
    <!-- BODY CONTAINER -->
    <div id="page-content py-5">

        <!-- PAGE HEADER -->
        <div class="page-header text-center bg-white mb-0 py-0 p-0">
            <div class="container">
                <div class="row">
                    <div class="col-12 col-sm-12 col-md-12 col-lg-12  d-flex justify-content-between align-items-center" >
                        <!-- Breadcrumbs visual -->
                        <div class="breadcrumbs text-uppercase d-none">
                            <a routerLink="/" title="Lujandev.com" class="fw-light" alt="Lujandev.com">Lujandev.com</a>
                            <span class="main-title fw-normal">
                                <i class="icon anm anm-angle-right-l"></i>
                                <!-- Categor√≠a clicable -->
                                <a *ngIf="product_selected.categorie"
                                [routerLink]="['/', locale, country, 'shop', 'filter-products', product_selected.categorie.slug, product_selected.categorie.id]">
                                <span class="fw-light">{{ product_selected.categorie.title || 'Categor√≠a' }}</span>
                                </a>
                                <i *ngIf="product_selected.categorie" class="icon anm anm-angle-right-l"></i>
                                <span class="fw-bold">{{ product_selected.title }}</span>
                            </span>
                        </div>
                        <!-- End Breadcrumbs visual -->

                        <!-- Breadcrumbs SEO invisible -->
                        <nav aria-label="breadcrumb" itemscope itemtype="https://schema.org/BreadcrumbList"
                            style="position:absolute; left:-9999px; top:-9999px;">
                            <ol>
                                <!-- Home -->
                                <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
                                <a itemprop="item" routerLink="/">
                                    <span itemprop="name">Inicio</span>
                                </a>
                                <meta itemprop="position" content="1" />
                                </li>

                                <!-- Categor√≠a -->
                                <li *ngIf="product_selected.categorie" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
                                <a itemprop="item"
                                    [routerLink]="['/', locale, country, 'shop', 'filter-products', product_selected.categorie.slug, product_selected.categorie.id]">
                                    <span itemprop="name">{{ product_selected.categorie.title || 'Categor√≠a' }}</span>
                                </a>
                                <meta itemprop="position" content="2" />
                                </li>

                                <!-- Producto -->
                                <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
                                <span itemprop="name">{{ product_selected.title }}</span>
                                <meta itemprop="position" content="{{ product_selected.categorie ? 3 : 2 }}" />
                                </li>
                            </ol>
                        </nav>
                        <!-- End Breadcrumbs SEO invisible -->
                    </div>
                </div>
            </div>
        </div>
        <!-- END PAGE HEADER -->

        <!-- MAIN CONTENT -->
        <div class="container-fluid px-0" [ngClass]="{ 'px-0': isMobile }">

            <!-- PRODUCT CONTENT VERSION DESKTOP -->
            <div [ngClass]="{'d-none': isMobile}">
                <!-- GALER√çA HORIZONTAL -->
                <div class="carousel-wrapper position-relative">
                    <button class="arrow left" (click)="prevSlide()">&#10094;</button>

                    <div #carousel class="carousel-track">
                        <ng-container *ngFor="let item of uniqueGalerias">
                            <div class="carousel-slide">
                                <img
                                [src]="item.imagen"
                                alt="{{ product_selected.title }} - {{ item.color || 'vista del producto' }}"
                                />
                            </div>
                        </ng-container>
                    </div>

                    <button class="arrow right" (click)="nextSlide()">&#10095;</button>
                </div>

                <!-- Detail Product -->
                <div class="d-flex flex-column flex-lg-row justify-content-between custom-border-bottom">
                    <!-- Title Product -->
                    <div class="p-2 align-self-center">
                        <h1 class="mb-0" style="color: #222; font-size: 1.3rem; font-weight: 700;  font-family: 'Montserrat', sans-serif;">
                            {{ product_selected.title }}
                        </h1>
                    </div>

                    <!-- Product Info link -->
                    <div class="p-2 align-self-center">
                        <p class="infolinks d-flex-center justify-content-between">
                            <a class="text-link wishlist fw-light" href="#" onclick="return false;" (click)="addWishlist(product_selected)"><i class="icon anm anm-heart-l"></i></a>
                        </p>
                    </div>

                    <!-- Swatches Color -->
                    <div class="p-2 align-self-center d-flex flex-column" [ngClass]="{'border border-danger': colorError}">
                        <div class="d-flex align-items-center">
                            <a href="#" 
                               class="text-decoration-underline text-uppercase d-inline-flex align-items-center px-2" 
                               onclick="return false;" 
                               (click)="openColorsModal()"
                               style="color: #222; font-size: 0.9rem; letter-spacing: 0.5px; transition: color 0.3s ease;"
                               onmouseover="this.style.color='#6c757d'"
                               onmouseout="this.style.color='#222'">
                                <i class="icon anm anm-plus-l me-2"></i>
                                <span>Colores</span>
                            </a>
                            <label class="mb-0 lh-1"> <!-- [style.color]="colorError ? '#dc3545' : '#222'" -->
                                {{ selectedColor ? 'Color seleccionado' : 'Seleccionar color' }} 
                                <span class="slVariant ms-1 fw-bold text-uppercase">{{ selectedColor || '' }}</span>
                            </label>
                        </div>
                        <div *ngIf="colorError" class="text-danger mt-1 px-2" style="font-size: 0.8rem;">
                            <i class="icon anm anm-exclamation-triangle me-1"></i>Selecciona un color
                        </div>
                    </div>
                    <!-- End Swatches Color -->

                    <!-- Swatches Size -->
                    <div class="p-2 align-self-center d-flex flex-column" [ngClass]="{'border border-danger': tallaError}">
                        <div class="d-flex align-items-center">
                            <a href="#" 
                               class="text-decoration-underline text-uppercase d-inline-flex align-items-center px-2" 
                               onclick="return false;" 
                               (click)="openSizesModal()"
                               style="color: #222; font-size: 0.9rem; letter-spacing: 0.5px; transition: color 0.3s ease;"
                               onmouseover="this.style.color='#6c757d'"
                               onmouseout="this.style.color='#222'">
                                <i class="icon anm anm-plus-l me-2"></i>
                                <span>Tallas</span>
                            </a>
                            <label class="mb-0 lh-1"> <!-- [style.color]="tallaError ? '#dc3545' : '#222'" -->
                                {{ variedad_selected?.valor == null ? 'Seleccionar talla' : 'Talla seleccionada' }} 
                                <span class="slVariant ms-1 fw-bold text-uppercase">{{ variedad_selected?.valor || '' }}</span>
                            </label>

                            <a *ngIf="hasSizeGuides()"
                               href="#sizechart-modal" 
                               class="text-link sizelink size-chart-modal ms-2 btn btn-outline-primary btn-sm" 
                               data-bs-toggle="modal" 
                               data-bs-target="#sizechart_modal"
                               style="text-decoration: none; font-size: 0.8rem;">
                                üìè Gu√≠a de tallas
                            </a>
                        </div>
                        <div *ngIf="tallaError" class="text-danger mt-1 px-2" style="font-size: 0.8rem;">
                            <i class="icon anm anm-exclamation-triangle me-1"></i>Selecciona una talla
                        </div>
                    </div>
                    <!-- End Swatches Size -->
                        
                    <!-- Price Product -->
                    <div class="p-2 align-self-center ">
                        <!-- <div class="d-flex flex-column mb-0"> -->
                            <div class="product-price d-flex-center">
                                <!-- Precio original tachado si hay descuento -->
                                <ng-container *ngIf="hasDiscount()">
                                    <span class="price old-price">‚Ç¨ {{ getOriginalPrice().toFixed(2) }}</span>
                                </ng-container>
                                
                                <!-- Precio final (con descuento si aplica) -->
                                <span class="price" [class.text-danger]="hasDiscount()">
                                    ‚Ç¨ {{ getFinalPrice().toFixed(2) }}
                                </span>
                                
                                <!-- Versi√≥n alternativa con separaci√≥n de decimales (oculta por defecto) -->
                                <span class="price d-none" itemprop="priceCurrency" content="EUR">
                                    <span class="price-main" itemprop="price">
                                        {{ getPriceWithDiscount().integerPart }} <!-- Parte entera -->
                                    </span>
                                    <span class="price-decimals">
                                        <sup>{{ getPriceWithDiscount().decimalPart }}</sup> <!-- Parte decimal -->
                                        <span class="currency-symbol">‚Ç¨</span>
                                    </span>
                                </span>
                            </div>
                            <!-- Schema.org Offer -->
                            <div itemprop="offers" itemscope itemtype="https://schema.org/Offer">
                                <link itemprop="url" [href]="currentUrl" />
                                <meta itemprop="priceCurrency" content="EUR" />
                                <meta itemprop="price" content="{{ getFinalPrice().toFixed(2) }}" />
                                <link itemprop="availability" href="https://schema.org/InStock" />
                            </div>
                        <!-- </div> -->
                    </div>
                    <!-- End Price Product -->

                    <!-- Action -->
                    <div class="p-2 align-self-center ">
                        <div class="product-action d-flex flex-lg-row flex-column d-flex-wrap">
                            <!-- Product Quantity -->
                            <div class="product-form-quantity d-flex-center" [ngClass]="{'border border-danger': cantidadError, 'mb-2': isMobile, 'me-2': isDesktop}">
                                <label class="label d-flex align-items-center fw-normal d-none">
                                    <span>Cantidad</span>
                                </label>
                                <div class="qtyField" [ngClass]="{ 'w-100': isMobile, 'border-0': isDesktop }">
                                    <a class="qtyBtn minus" 
                                       href="#" 
                                       (click)="decreaseQuantity(); $event.preventDefault()"
                                       style="transition: all 0.2s ease;"
                                       onmouseover="this.style.backgroundColor='#222'; this.style.color='#fff'"
                                       onmouseout="this.style.backgroundColor=''; this.style.color=''">
                                        <i class="icon anm anm-minus-r"></i>
                                    </a>
                                    <input type="number" 
                                        name="quantity" 
                                        id="qty-cart"
                                        [(ngModel)]="cantidad"
                                        (input)="onQuantityChange($event)"
                                        (blur)="onQuantityBlur($event)"
                                        class="product-form-input qty border-0"
                                        [ngClass]="{ 'w-100': isMobile }"
                                        min="1"
                                        step="1"
                                        style="font-weight: 600; font-size: 1rem;" />
                                    <a class="qtyBtn plus" 
                                       href="#" 
                                       (click)="increaseQuantity(); $event.preventDefault()"
                                       style="transition: all 0.2s ease;"
                                       onmouseover="this.style.backgroundColor='#222'; this.style.color='#fff'"
                                       onmouseout="this.style.backgroundColor=''; this.style.color=''">
                                        <i class="icon anm anm-plus-r"></i>
                                    </a>
                                </div>
                            </div>
                            <!-- End Product Quantity -->
                        
                            <!-- Product Add -->
                            <div class="product-form-submit addcart fl-1">
                                <button type="submit" 
                                        name="add" 
                                        class="btn btn-dark w-100 py-3 text-uppercase fw-semibold d-flex align-items-center justify-content-center" 
                                        (click)="storeCart()"
                                        style="letter-spacing: 1px; border-radius: 8px; transition: all 0.3s ease; font-size: 1rem;">
                                    <i class="icon anm anm-bag-l me-2" style="font-size: 1.2rem;"></i>
                                    <span>A√±adir al carrito</span>
                                </button>
                            </div>
                            <!-- Product Add -->
                        </div>
                        <!-- End Product Action -->
                        
                        <!-- Print on Demand Badge -->
                        <div class="alert alert-info py-2 px-3 mt-2 mb-0 d-flex align-items-center" style="border-left: 4px solid #0dcaf0; border-radius: 6px; font-size: 0.85rem;">
                            <i class="icon anm anm-info-cir me-2"></i>
                            <span><strong>Print on Demand:</strong> Producto fabricado bajo demanda especialmente para ti</span>
                        </div>
                        <!-- End Print on Demand Badge -->
                    </div>
                    <!-- End Product -->
                </div>
            </div>
            <!-- END PRODUCT CONTENT VERSION DESKTOP -->

            <!--  -->
            <!--  -->
            
            <!-- PRODUCT CONTENT VERSION MOBILE -->
            <div [ngClass]="{'d-none': isDesktop}">
                <!--Product Content-->
                <div class="product-single">
                    <div class="row">
                        <div class="col-lg-6 col-md-6 col-sm-12 col-12 product-layout-img mb-4 mb-md-0 px-0">
                            <!-- Product Horizontal -->
                            <div class="product-details-img product-horizontal-style">
                                <!-- Product Main -->
                                <div class="zoompro-wrap">
                                    <!-- Product Image -->
                                    <div class="zoompro-span">
                                        <img id="zoompro" 
                                            class="zoompro" 
                                            [src]="firstImage" 
                                            [attr.data-zoom-image]="firstImage" 
                                            alt="Camiseta {{ product_selected.title }} para programadores LujanDev"
                                            width="665" 
                                            height="808" 
                                            itemprop="image"/>
                                    </div>
                                    <!-- End Product Image -->
                                    <!-- Product Label -->
                                    <div class="product-labels d-none"><span class="lbl pr-label1">New</span><span class="lbl on-sale">Sale</span></div>
                                    <!-- End Product Label -->
                                    <!-- Product Buttons -->
                                    <div class="product-buttons">
                                        <a href="#;" onclick="return false;" class="btn btn-primary prlightbox" data-bs-toggle="tooltip" data-bs-placement="top" title="Zoom Image"><i class="icon anm anm-expand-l-arrows"></i></a>
                                    </div>
                                    <!-- End Product Buttons -->
                                </div>
                                <!-- End Product Main -->

                                <!-- Product Thumb -->
                                <div class="product-thumb product-horizontal-thumb mt-3">
                                    <div id="gallery" class="product-thumb-horizontal">
                                        <ng-container *ngFor="let item of uniqueGalerias">
                                            <a [attr.data-image]="item.imagen" 
                                            [attr.data-zoom-image]="item.imagen" 
                                            class="slick-slide slick-cloned active"
                                            (click)="selectThumbnail(item.imagen)">
                                                <img class="blur-up lazyload" 
                                                    [attr.data-src]="item.imagen" 
                                                    [src]="item.imagen" 
                                                    alt="{{ product_selected.title }} - {{ item.color || 'vista del producto' }}" 
                                                    width="625" 
                                                    height="808" />
                                            </a>
                                        </ng-container>
                                    </div>
                                </div>
                                <!-- End Product Thumb -->

                                <!-- Product Gallery -->
                                <div class="lightboximages">
                                    <ng-container *ngFor="let item of uniqueGalerias">
                                        <a [href]="item.imagen" data-size="1000x1280" [attr.data-image]="item.imagen"></a>
                                    </ng-container>
                                </div>
                                <!-- End Product Gallery -->

                            </div>
                            <!-- End Product Horizontal -->
                        </div>
                        <div class="col-lg-6 col-md-6 col-sm-12 col-12 product-layout-info" [ngClass]="{'px-4':isMobile, 'px-5': isDesktop }">
                            <!-- Product Details -->
                            <div class="product-single-meta">
                                <div class="d-flex flex-column mb-0">
                                    <!-- Title Product -->
                                    <div class="d-flex justify-content-between align-items-center">
                                        <h1 class="mb-0" style="color: #222; font-size: 1.5rem; font-weight: 600; letter-spacing: 0.3px;">
                                            {{ product_selected.title }}
                                        </h1>
                                        <a class="text-link wishlist lh-1" 
                                           href="#" 
                                           onclick="return false;" 
                                           (click)="addWishlist(product_selected)"
                                           style="font-size: 1.5rem; color: #222; transition: color 0.3s ease;"
                                           onmouseover="this.style.color='#dc3545'"
                                           onmouseout="this.style.color='#222'">
                                            <i class="icon anm anm-heart-l"></i>
                                        </a>
                                    </div>
                                    <!-- Price -->
                                    <div class="product-price d-flex-center">
                                        <!-- Precio original tachado si hay descuento -->
                                        <ng-container *ngIf="hasDiscount()">
                                            <span class="price old-price">{{ getOriginalPrice().toFixed(2) }} ‚Ç¨</span>
                                        </ng-container>
                                        
                                        <!-- Precio final (con descuento si aplica) -->
                                        <span class="price" [class.text-danger]="hasDiscount()">
                                            {{ euro }} {{ getFinalPrice().toFixed(2) }}
                                        </span>
                                        
                                        <!-- Versi√≥n alternativa con separaci√≥n de decimales (oculta por defecto) -->
                                        <span class="price d-none" itemprop="priceCurrency" content="EUR">
                                            <span class="currency-symbol">‚Ç¨</span>
                                            <span class="price-main" itemprop="price">
                                                {{ getPriceWithDiscount().integerPart }} <!-- Parte entera -->
                                            </span>
                                            <span class="price-decimals">
                                                <sup>{{ getPriceWithDiscount().decimalPart }}</sup> <!-- Parte decimal -->
                                            </span>
                                        </span>
                                    </div>
                                    <!-- Schema.org Offer -->
                                    <div itemprop="offers" itemscope itemtype="https://schema.org/Offer">
                                        <link itemprop="url" [href]="currentUrl" />
                                        <meta itemprop="priceCurrency" content="EUR" />
                                        <meta itemprop="price" content="{{ getFinalPrice().toFixed(2) }}" />
                                        <link itemprop="availability" href="https://schema.org/InStock" />
                                    </div>
                                </div>

                                <!-- Product Info -->
                                <div class="product-info">
                                    <p class="product-stock d-flex d-none">Disponibilidad:
                                        <span class="pro-stockLbl ps-0 d-none">
                                            <span class="d-flex-center stockLbl instock ">En stock</span>
                                        </span>
                                    </p>
                                    <p class="product-vendor d-none">Proveedor:<span class="text"><a href="#">HVL</a></span></p>
                                    <meta itemprop="productID" content="{{ product_selected.sku }}">
                                    <meta itemprop="availability" content="https://schema.org/InStock" />
                                </div>
                                <!-- Product Reviews -->
                                <div class="product-review d-flex-center d-none">
                                    <div class="reviewStar d-flex-center">
                                        <i class="icon anm anm-star-o" [ngClass]="{'icon anm anm-star': AVG_REVIEW < 1}"></i>
                                        <i class="icon anm anm-star-o" [ngClass]="{'icon anm anm-star': AVG_REVIEW < 2}"></i>
                                        <i class="icon anm anm-star-o" [ngClass]="{'icon anm anm-star': AVG_REVIEW < 3}"></i>
                                        <i class="icon anm anm-star-o" [ngClass]="{'icon anm anm-star': AVG_REVIEW < 4}"></i>
                                        <i class="icon anm anm-star-o" [ngClass]="{'icon anm anm-star': AVG_REVIEW < 5}"></i>
                                        <span class="caption ms-2">{{ COUNT_REVIEW }} Rese√±as</span>
                                    </div>
                                    <a class="reviewLink d-flex-center" href="#reviews">Escribe una rese√±a</a>
                                </div>
                                <!-- End Product Reviews -->
                                <!-- End Product Info -->
                                <hr class="d-none">
                                <!-- Sort Description -->
                                <div class="sort-description d-none" itemprop="description">{{ product_selected.resumen }}</div>
                                <!-- End Sort Description -->
                                <hr class="d-none">
                                <!-- Countdown -->
                                <h3 class=" mb-0 d-none">Date prisa! las rebajas terminan en</h3>
                                <div class="product-countdown d-flex-center text-center my-3  d-none" data-countdown="2024/08/26"></div>
                                <!-- End Countdown -->
                            </div>
                            <!-- End Product Details -->
                            <!-- Product Form -->
                            <form method="post" action="#" class="product-form product-form-border hidedropdown mb-0 mt-0">
                                <!-- Swatches -->
                                <div class="product-swatches-option">
                                    <!-- Swatches Color -->
                                    <div class="product-item swatches-image w-100 mb-4 swatch-0 option1" 
                                         data-option-index="0"
                                         [ngClass]="{'border border-danger rounded p-2': colorError}">
                                        <label class="label d-flex align-items-center fw-normal text-uppercase" 
                                               [style.color]="colorError ? '#dc3545' : ''">
                                            {{ selectedColor ? 'Color seleccionado' : 'Seleccionar color' }} 
                                            <span class="slVariant ms-1 fw-light">{{ selectedColor || '' }}</span>
                                        </label>
                                        <div *ngIf="colorError" class="text-danger mt-1 mb-2" style="font-size: 0.85rem;">
                                            <i class="icon anm anm-exclamation-triangle me-1"></i>Por favor, selecciona un color
                                        </div>
                                        <ul class="variants-clr swatches d-flex-center pt-1 clearfix" style="gap: 10px;">
                                            <ng-container *ngFor="let color of coloresDisponibles">
                                                <li class="swatch x-large available rounded" 
                                                    [ngClass]="getSwatchClass(color.imagen, color.color)" 
                                                    (click)="selectColor(color)"
                                                    [attr.title]="color.color"
                                                    style="transition: all 0.3s ease;"
                                                    ontouchstart="this.style.transform='scale(1.1)'"
                                                    ontouchend="this.style.transform='scale(1)'">
                                                    <!-- c√≠rculo/cuadro del color -->
                                                    <div class="color-swatch"
                                                        [ngStyle]="{ 
                                                            'background-color': getColorHex(color.color),
                                                            'width': '100%',
                                                            'height': '100%',
                                                            'border-radius': '50%',
                                                            'cursor': 'pointer',
                                                            'display': 'block',
                                                            'border': '2px solid #fff',
                                                            'box-shadow': '0 2px 6px rgba(0,0,0,0.1)'
                                                        }">
                                                    </div>
                                                </li>
                                            </ng-container>
                                        </ul>
                                    </div>
                                    <!-- End Swatches Color -->
                                    <!-- Swatches Size -->
                                    <div class="product-item swatches-size w-100 mb-4 swatch-1 option2" 
                                         data-option-index="1"
                                         [ngClass]="{'border border-danger rounded p-2': tallaError}">
                                        <label class="label d-flex align-items-center fw-normal text-uppercase mb-2"
                                               [style.color]="tallaError ? '#dc3545' : ''">
                                            {{ variedad_selected?.valor == null ? 'Seleccionar talla' : 'Talla seleccionada' }} 
                                            <span class="slVariant ms-1 fw-light">{{ variedad_selected?.valor || '' }}</span>
                                            <a *ngIf="hasSizeGuides()"
                                               href="#sizechart-modal" 
                                               class="text-link sizelink size-chart-modal ms-2 btn btn-outline-primary btn-sm" 
                                               data-bs-toggle="modal" 
                                               data-bs-target="#sizechart_modal"
                                               style="text-decoration: none; font-size: 0.8rem;">
                                                üìè Gu√≠a de tallas
                                            </a>
                                        </label>
                                        <div *ngIf="tallaError" class="text-danger mt-1 mb-2" style="font-size: 0.85rem;">
                                            <i class="icon anm anm-exclamation-triangle me-1"></i>Por favor, selecciona una talla
                                        </div>
                                        <ul class="variants-size size-swatches d-flex pt-1 clearfix" 
                                            style="gap: 8px;">
                                            <ng-container *ngFor="let variedad of variedades; let i = index">
                                                <li class="swatch x-large"
                                                    [ngClass]="{
                                                        'available': variedad.stock > 0,
                                                        'soldout': variedad.stock === 0,
                                                        'active': variedad.valor === variedad_selected?.valor
                                                    }"
                                                    [class.text-muted]="variedad.stock === 0"
                                                    [style.cursor]="variedad.stock > 0 ? 'pointer' : 'not-allowed'"
                                                    [style.opacity]="variedad.stock === 0 ? '0.5' : '1'"
                                                    [style.transition]="'all 0.2s ease'"
                                                    [style.box-shadow]="variedad.valor === variedad_selected?.valor ? '0 0 0 2px #28a745' : 'none'"
                                                    (click)="variedad.stock > 0 && selectedVariedad(variedad, i)"
                                                    ontouchstart="this.style.backgroundColor='#f8f9fa'"
                                                    ontouchend="this.style.backgroundColor=''">

                                                    <span class="swatchLbl"
                                                        [attr.data-bs-toggle]="'tooltip'"
                                                        [attr.data-bs-placement]="'top'"
                                                        [attr.title]="variedad.stock > 0 ? variedad.valor : 'Agotado'"
                                                        [style.textDecoration]="variedad.stock === 0 ? 'line-through' : 'none'"
                                                        [style.font-weight]="variedad.valor === variedad_selected?.valor ? '700' : '500'">
                                                        {{variedad.valor}}
                                                        <i *ngIf="variedad.valor === variedad_selected?.valor" class="icon anm anm-check-cil ms-1" style="color: #28a745; font-size: 0.8rem;"></i>
                                                    </span>
                                                </li>
                                            </ng-container>
                                        </ul>
                                    </div>
                                    <!-- End Swatches Size -->
                                </div>
                                <!-- End Swatches -->

                                <!-- Product Action -->
                                <div class="product-action d-flex flex-lg-row flex-row d-flex-wrap my-3 my-md-4">
                                    <!-- Product Quantity -->
                                    <div class="product-form-quantity d-flex-center me-2" [ngClass]="{'border border-danger': cantidadError}">
                                        <div class="qtyField">
                                            <a class="qtyBtn minus" 
                                               href="#" 
                                               (click)="decreaseQuantity(); $event.preventDefault()"
                                               style="transition: all 0.2s ease;"
                                               ontouchstart="this.style.backgroundColor='#222'; this.style.color='#fff'"
                                               ontouchend="this.style.backgroundColor=''; this.style.color=''">
                                                <i class="icon anm anm-minus-r"></i>
                                            </a>
                                            <input type="number" 
                                                name="quantity" 
                                                id="qty-cart"
                                                [(ngModel)]="cantidad"
                                                (input)="onQuantityChange($event)"
                                                (blur)="onQuantityBlur($event)"
                                                class="product-form-input qty border-0"
                                                min="1"
                                                step="1"
                                                style="font-weight: 600; font-size: 1rem;" />
                                            <a class="qtyBtn plus" 
                                               href="#" 
                                               (click)="increaseQuantity(); $event.preventDefault()"
                                               style="transition: all 0.2s ease;"
                                               ontouchstart="this.style.backgroundColor='#222'; this.style.color='#fff'"
                                               ontouchend="this.style.backgroundColor=''; this.style.color=''">
                                                <i class="icon anm anm-plus-r"></i>
                                            </a>
                                        </div>
                                    </div>
                                    <!-- End Product Quantity -->
                                
                                    <!-- Product Add -->
                                    <div class="product-form-submit addcart fl-1">
                                        <button type="submit" 
                                                name="add" 
                                                class="btn btn-dark w-100 py-3 text-uppercase fw-semibold d-flex align-items-center justify-content-center" 
                                                (click)="storeCart()"
                                                style="letter-spacing: 1px; border-radius: 8px; transition: all 0.3s ease; font-size: 1rem;">
                                            <i class="icon anm anm-bag-l me-2" style="font-size: 1.2rem;"></i>
                                            <span>A√±adir al carrito</span>
                                        </button>
                                    </div>
                                    <!-- Product Add -->
                                </div>
                                <!-- End Product Action -->

                                <!-- Print on Demand Badge -->
                                <div class="alert alert-info py-2 px-3 mt-3 mb-0 d-flex align-items-center" style="border-left: 4px solid #0dcaf0; border-radius: 6px; font-size: 0.85rem;">
                                    <i class="icon anm anm-info-cir me-2"></i>
                                    <span><strong>Print on Demand:</strong> Producto fabricado bajo demanda especialmente para ti</span>
                                </div>
                                <!-- End Print on Demand Badge -->

                                <!-- Message error -->
                                <ng-container *ngIf="errorResponse">
                                    <div class="alert alert-danger py-2 px-3 mt-3 mb-0" style="border-left: 4px solid #dc3545; border-radius: 6px; font-size: 0.9rem;">
                                        <i class="icon anm anm-times-circle me-2"></i>
                                        <strong>Error:</strong> {{ errorMessage }}
                                    </div>
                                </ng-container>

                                <!-- Product Info link -->
                                <p class="infolinks d-flex-center justify-content-between d-none">
                                    <a class="text-link wishlist fw-light" href="#" onclick="return false;" (click)="addWishlist(product_selected)"><i class="icon anm anm-heart-l me-2"></i> <span>A√±adir a favoritos</span></a>
                                </p>
                                <!-- End Product Info link -->
                            </form>
                            <!-- End Product Form -->
                            <!-- Product Info -->
                            <div class="userViewMsg featureText d-none" data-user="20" data-time="11000"><i class="icon anm anm-eye-r"></i><b class="uersView">21</b> La gente est√° buscando este producto</div>
                            <!-- 135deg -->
                            <div class="shippingMsg featureText" *ngIf="shippingRate > 0 && fechaEntregaMin">
                                <div class="alert alert-success py-2 px-3 mb-3" style="border-left: 4px solid #28a745; border-radius: 6px;">
                                    <i class="icon anm anm-truck-l me-2" style="font-size: 1.3rem;"></i>
                                    <strong style="font-size: 0.95rem;">
                                        Entrega GRATIS el {{ fechaEntregaMin }}
                                    </strong>
                                    <ng-container *ngIf="!isFallbackAddress; else generic">
                                        <span class="d-block" style="font-size: 0.85rem;">para <span class="text-decoration-underline">{{ address }}</span></span>
                                    </ng-container>
                                    <ng-template #generic>
                                        <span class="d-block" style="font-size: 0.85rem;">en toda Espa√±a</span>
                                    </ng-template>
                                </div>
                            </div>
                            <!-- Mostrar mensaje alternativo cuando no hay tarifa -->
                            <div class="shippingMsg featureText" *ngIf="shippingRate === 0">
                                <div class="alert alert-warning py-2 px-3 mb-3" style="border-left: 4px solid #ffc107; border-radius: 6px;">
                                    <i class="icon anm anm-exclamation-triangle me-2" style="font-size: 1.2rem;"></i>
                                    <strong style="font-size: 0.95rem;">Env√≠o no disponible</strong>
                                    <span class="d-block" style="font-size: 0.85rem;">para la direcci√≥n seleccionada.</span>
                                </div>
                            </div>
                            <div class="freeShipMsg featureText d-none" data-price="199"><i class="icon anm anm-truck-r"></i>Gaste <b class="freeShip"><span class="money" data-currency-usd="$199.00" data-currency="USD">{{ euro }}30.00</span></b> M√°s para env√≠o gratis</div>
                            <!-- End Product Info -->
                            <!-- Social Sharing -->
                            <div class="social-sharing d-flex-center mt-2 lh-lg d-none">
                                <span class="sharing-lbl fw-600">Compartir :</span>
                                <a href="#" class="d-flex-center btn btn-link btn--share share-facebook"><i class="icon anm anm-facebook-f"></i><span class="share-title">Facebook</span></a>
                                <a href="#" class="d-flex-center btn btn-link btn--share share-twitter"><i class="icon anm anm-twitter"></i><span class="share-title">Tweet</span></a>
                                <a href="#" class="d-flex-center btn btn-link btn--share share-pinterest"><i class="icon anm anm-pinterest-p"></i> <span class="share-title">Pin it</span></a>
                                <a href="#" class="d-flex-center btn btn-link btn--share share-linkedin"><i class="icon anm anm-linkedin-in"></i><span class="share-title">Linkedin</span></a>
                                <a href="#" class="d-flex-center btn btn-link btn--share share-email"><i class="icon anm anm-envelope-l"></i><span class="share-title">Email</span></a>
                            </div>
                            <!-- End Social Sharing -->
                            <div class="trustseal-img mt-4 d-none"><img src="assets/images/icons/powerby-cards.jpg" alt="powerby cards" width="470" /></div>
                        </div>
                    </div>
                </div>
                <!--End Product Content-->
            </div>
            <!-- END PRODUCT CONTENT VERSION DESKTOP -->
            
            <!--  -->
            <!--  -->
            
            <!-- PRODUCT TABS -->
            <div class="container tabs-listing section">
                <ul class="product-tabs style2 list-unstyled d-flex-wrap d-flex-justify-start d-none d-md-flex" style="border-bottom: 2px solid #e9ecef;">
                    <li rel="description" class="active">
                        <a class="tablink fw-semibold d-flex align-items-center" style="letter-spacing: 0.5px; padding: 12px 24px; transition: all 0.3s ease;">
                            <i class="icon anm anm-file-text-o me-2"></i>Descripci√≥n
                        </a>
                    </li>
                    <li rel="shipping-return">
                        <a class="tablink fw-semibold d-flex align-items-center" style="letter-spacing: 0.5px; padding: 12px 24px; transition: all 0.3s ease;">
                            <i class="icon anm anm-truck-l me-2"></i>Env√≠os y devoluciones
                        </a>
                    </li>
                    <li rel="reviews">
                        <a class="tablink fw-semibold d-flex align-items-center" style="letter-spacing: 0.5px; padding: 12px 24px; transition: all 0.3s ease;">
                            <i class="icon anm anm-star me-2"></i>Rese√±as
                        </a>
                    </li>
                </ul>
                <div class="tab-container">
                    <!-- Description -->
                    <h3 class="tabs-ac-style d-md-none" rel="description" style="font-weight: 600; letter-spacing: 0.5px;">
                        <i class="icon anm anm-file-text-o me-2"></i>Descripci√≥n
                    </h3>
                    <div id="description" class="tab-content">
                        <h2 class="fw-semibold mb-2" 
                            [ngClass]="{'d-none': isMobile}" 
                            style="color: #222; letter-spacing: 0.3px; font-size: 1.5rem;">
                            {{ product_selected.title }}
                        </h2>
                        <p class="product-sku fw-light text-muted fs-16">Art. N¬∫. <span class="text fw-light" itemprop="sku">{{ product_selected.sku }}</span></p>
                        <div class="product-description mb-3">
                            <div class="row">
                                <div class="col-12 col-sm-12 col-md-8 col-lg-8" [innerHTML]="product_selected.description_es"></div>
                                <!-- <div class="col-12 col-sm-12 col-md-4 col-lg-4">
                                    <img [src]="firstImage" [attr.data-zoom-image]="firstImage" alt="image" width="600" height="600" />
                                </div> -->
                            </div>
                        </div>
                    </div>
                    <!-- End Description -->

                    <!-- Additional Information -->
                    <h3 class="tabs-ac-style d-md-none d-none" rel="additionalInformation">Composici√≥n, origen y cuidados</h3>
                    <div id="additionalInformation" class="tab-content">
                        <div class="product-description">
                            <div class="row">
                                <div class="col-12 col-sm-12 col-md-12 col-lg-12 mb-4 mb-md-0">
                                    <div class="table-responsive">
                                        <table class="table table-bordered align-middle table-part mb-0">
                                            <!-- <ng-container *ngFor="let variedad of product_selected.variedades"></ng-container> -->
                                            <tr>
                                                <th>Color</th>
                                                <!-- <td **ngFor="let color of coloresDisponibles">{{ Black, White, Blue, Red, Gray }}</td> -->
                                                <td>
                                                    <ng-container *ngFor="let item of coloresDisponibles">
                                                        {{ item.color }},
                                                    </ng-container>
                                                </td>
                                            </tr>
                                            <tr>
                                                <th>Dimensiones del producto</th>
                                                <td>15 x 15 x 3 cm; 250 Grams</td>
                                            </tr>
                                            <tr>
                                                <th>Fecha de primera disponibilidad</th>
                                                <td>14 May 2023</td>
                                            </tr>
                                            <tr>
                                                <th>Fabricante</th>
                                                <td>Fashion and Retail Limited</td>
                                            </tr>
                                            <tr>
                                                <th>Departamento</th>
                                                <td>Men Shirt</td>
                                            </tr>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- End Additional Information -->

                    <!-- Shipping &amp; Return -->
                    <h3 class="tabs-ac-style d-md-none" rel="shipping-return" style="font-weight: 600; letter-spacing: 0.5px;">
                        <i class="icon anm anm-truck-l me-2"></i>Env√≠o y devoluc√≠ones
                    </h3>
                    <div id="shipping-return" class="tab-content">
                        <div class="d-flex flex-column">
                            <!-- Secci√≥n Env√≠os -->
                            <div class="border-bottom mb-4 pb-3">
                                <h4 class="text-uppercase fw-bold mb-3" style="color: #222; letter-spacing: 1px; font-size: 1.1rem;">
                                    <i class="icon anm anm-truck-l me-2"></i>Env√≠os
                                </h4>
                                <div class="d-flex flex-column gap-2">
                                    <div class="d-flex align-items-center">
                                        <i class="icon anm anm-check-cil me-2" style="color: #28a745;"></i>
                                        <span><strong>Env√≠o a domicilio:</strong> 3 a 7 d√≠as laborables</span>
                                    </div>
                                    <div class="d-flex align-items-center">
                                        <i class="icon anm anm-check-cil me-2" style="color: #28a745;"></i>
                                        <span><strong>Env√≠o incluido</strong> en el precio del producto</span>
                                    </div>
                                    <div class="d-flex align-items-center">
                                        <i class="icon anm anm-check-cil me-2" style="color: #28a745;"></i>
                                        <span>Seguimiento incluido en todos los env√≠os</span>
                                    </div>
                                </div>
                                <div class="alert alert-info mt-3 py-2 px-3 mb-0" style="border-left: 4px solid #0dcaf0; border-radius: 6px; font-size: 0.9rem;">
                                    <i class="icon anm anm-info-cir me-2"></i>
                                    <strong>Print on Demand:</strong> Tus productos se fabrican bajo demanda especialmente para ti. Los tiempos de producci√≥n y env√≠o pueden variar ligeramente.
                                </div>
                            </div>

                            <!-- Secci√≥n Devoluciones y Reembolsos -->
                            <div class="mb-3">
                                <h4 class="text-uppercase fw-bold mb-3" style="color: #222; letter-spacing: 1px; font-size: 1.1rem;">
                                    <i class="icon anm anm-sync-ar me-2"></i>Devoluciones y Reembolsos
                                </h4>
                                
                                <!-- Advertencia importante -->
                                <div class="alert alert-warning py-3 px-3 mb-3" style="border-left: 4px solid #ffc107; border-radius: 6px;">
                                    <div class="d-flex align-items-start">
                                        <i class="icon anm anm-exclamation-triangle me-2 mt-1" style="font-size: 1.2rem;"></i>
                                        <div>
                                            <strong class="d-block mb-1">Productos fabricados bajo demanda (Print on Demand)</strong>
                                            <p class="mb-0" style="font-size: 0.9rem;">
                                                Nuestros productos se fabrican especialmente para ti al realizar el pedido, por lo que <strong>no aceptamos devoluciones por cambio de opini√≥n, talla incorrecta o preferencias personales</strong>.
                                            </p>
                                        </div>
                                    </div>
                                </div>

                                <!-- Casos aceptados -->
                                <div class="mb-3">
                                    <h5 class="fw-semibold mb-2" style="color: #222; font-size: 1rem;">
                                        ‚úÖ Reclamaciones aceptadas (plazo de 30 d√≠as):
                                    </h5>
                                    <ul class="mb-0" style="line-height: 1.8;">
                                        <li><strong>Producto defectuoso:</strong> Impresi√≥n da√±ada, rota o con manchas</li>
                                        <li><strong>Da√±os en el env√≠o:</strong> Producto deteriorado durante el transporte</li>
                                        <li><strong>Producto incorrecto:</strong> Modelo, color o talla incorrectos</li>
                                        <li><strong>Pedido perdido:</strong> No recibido por el transportista</li>
                                    </ul>
                                </div>

                                <!-- Casos NO aceptados -->
                                <div class="mb-3">
                                    <h5 class="fw-semibold mb-2" style="color: #dc3545; font-size: 1rem;">
                                        ‚ùå NO se aceptan reclamaciones por:
                                    </h5>
                                    <ul class="mb-0" style="line-height: 1.8; color: #6c757d;">
                                        <li>Cambio de opini√≥n sobre el dise√±o o producto</li>
                                        <li>Talla elegida incorrectamente por el cliente</li>
                                        <li>"No era lo que esperaba" (dise√±o correcto pero no gusta)</li>
                                        <li>Preferencias personales o est√©ticas</li>
                                    </ul>
                                </div>

                                <!-- Proceso de reclamaci√≥n -->
                                <div class="border-top pt-3 mt-3">
                                    <h5 class="fw-semibold mb-2" style="color: #222; font-size: 1rem;">
                                        üìß ¬øC√≥mo gestionar una reclamaci√≥n?
                                    </h5>
                                    <p class="mb-2" style="font-size: 0.95rem;">
                                        Si tu pedido presenta alguno de los problemas aceptados, contacta con nosotros dentro de los <strong>30 d√≠as posteriores a la recepci√≥n</strong> proporcionando:
                                    </p>
                                    <ul style="line-height: 1.8;">
                                        <li>N√∫mero de pedido</li>
                                        <li>Fotograf√≠as claras del problema</li>
                                        <li>Descripci√≥n detallada del defecto o error</li>
                                    </ul>
                                    <p class="mb-0" style="font-size: 0.9rem; color: #6c757d;">
                                        En caso de confirmarse el error, procederemos a la <strong>reimpresi√≥n del producto o reembolso</strong>, seg√∫n corresponda.
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- End Shipping &amp; Return -->

                    <!-- Review -->
                    <h3 class="tabs-ac-style d-md-none" rel="reviews" style="font-weight: 600; letter-spacing: 0.5px;">
                        <i class="icon anm anm-star me-2"></i>Rese√±as
                    </h3>
                    <div id="reviews" class="tab-content">
                        <div class="row">
                            <div [ngClass]="{'col-12 col-sm-12 col-md-12': true, 'col-lg-6': this.sale_detail_selected, 'col-lg-12': !this.sale_detail_selected }" class="mb-4">
                                <div class="ratings-main" *ngIf="this.REVIEWS.length > 0;">
                                    <div class="avg-rating d-flex-center mb-3">
                                        <h4 class="avg-mark">5.0</h4>
                                        <div class="avg-content ms-3">
                                            <p class="text-rating">Puntuaci√≥n media</p>
                                            <div class="ratings-full product-review">
                                                <a class="reviewLink d-flex-center" href="#reviews"><i class="icon anm anm-star"></i><i class="icon anm anm-star"></i><i class="icon anm anm-star"></i><i class="icon anm anm-star"></i><i class="icon anm anm-star-o"></i><span class="caption ms-2">24 Calificaciones</span></a>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="ratings-list">
                                        <div class="ratings-container d-flex align-items-center mt-1">
                                            <div class="ratings-full product-review m-0">
                                                <a class="reviewLink d-flex align-items-center" href="#reviews"><i class="icon anm anm-star"></i><i class="icon anm anm-star"></i><i class="icon anm anm-star"></i><i class="icon anm anm-star"></i><i class="icon anm anm-star-o"></i></a>
                                            </div>
                                            <div class="progress"><div class="progress-bar" role="progressbar" aria-valuenow="99" aria-valuemin="0" aria-valuemax="100" style="width:99%;"></div></div>
                                            <div class="progress-value">99%</div>
                                        </div>
                                        <div class="ratings-container d-flex align-items-center mt-1">
                                            <div class="ratings-full product-review m-0">
                                                <a class="reviewLink d-flex align-items-center" href="#reviews"><i class="icon anm anm-star"></i><i class="icon anm anm-star"></i><i class="icon anm anm-star"></i><i class="icon anm anm-star"></i><i class="icon anm anm-star-o"></i></a>
                                            </div>
                                            <div class="progress"><div class="progress-bar" role="progressbar" aria-valuenow="75" aria-valuemin="0" aria-valuemax="100" style="width:75%;"></div></div>
                                            <div class="progress-value">75%</div>
                                        </div>
                                        <div class="ratings-container d-flex align-items-center mt-1">
                                            <div class="ratings-full product-review m-0">
                                                <a class="reviewLink d-flex align-items-center" href="#reviews"><i class="icon anm anm-star"></i><i class="icon anm anm-star"></i><i class="icon anm anm-star"></i><i class="icon anm anm-star-o"></i><i class="icon anm anm-star-o"></i></a>
                                            </div>
                                            <div class="progress"><div class="progress-bar" role="progressbar" aria-valuenow="50" aria-valuemin="0" aria-valuemax="100" style="width:50%;"></div></div>
                                            <div class="progress-value">50%</div>
                                        </div>
                                        <div class="ratings-container d-flex align-items-center mt-1">
                                            <div class="ratings-full product-review m-0">
                                                <a class="reviewLink d-flex align-items-center" href="#reviews"><i class="icon anm anm-star"></i><i class="icon anm anm-star"></i><i class="icon anm anm-star-o"></i><i class="icon anm anm-star-o"></i><i class="icon anm anm-star-o"></i></a>
                                            </div>
                                            <div class="progress"><div class="progress-bar" role="progressbar" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100" style="width:25%;"></div></div>
                                            <div class="progress-value">25%</div>
                                        </div>
                                        <div class="ratings-container d-flex align-items-center mt-1">
                                            <div class="ratings-full product-review m-0">
                                                <a class="reviewLink d-flex align-items-center" href="#reviews"><i class="icon anm anm-star"></i><i class="icon anm anm-star-o"></i><i class="icon anm anm-star-o"></i><i class="icon anm anm-star-o"></i><i class="icon anm anm-star-o"></i></a>
                                            </div>
                                            <div class="progress"><div class="progress-bar" role="progressbar" aria-valuenow="5" aria-valuemin="0" aria-valuemax="100" style="width:5%;"></div></div>
                                            <div class="progress-value">05%</div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="spr-reviews">
                                    <ng-container *ngIf="this.REVIEWS.length == 0; else showReview">
                                        <div class="alert alert-info py-4 px-4" style="border-left: 4px solid #0dcaf0; border-radius: 8px;">
                                            <div class="text-center">
                                                <i class="icon anm anm-comments-l mb-3" style="font-size: 3rem; color: #0dcaf0;"></i>
                                                <h4 class="mb-2" style="color: #222; font-weight: 600; letter-spacing: 0.5px;">
                                                    <i class="icon anm anm-star me-2"></i>Rese√±as
                                                </h4>
                                                <p class="mb-0" style="color: #6c757d; font-size: 1rem;">
                                                    Este producto no tiene rese√±as por ahora. ¬°S√© el primero en compartir tu opini√≥n!
                                                </p>
                                            </div>
                                        </div>
                                    </ng-container>
                                    <ng-template #showReview>
                                        <h3 class="spr-form-title mb-3" style="color: #222; font-weight: 600; letter-spacing: 0.5px; font-size: 1.3rem;">
                                            <i class="icon anm anm-comments-l me-2"></i>Rese√±as de clientes
                                        </h3>
                                        <div class="review-inner">
                                            <ng-container *ngFor="let REVIEW of REVIEWS">
                                                <div class="spr-review d-flex w-100">
                                                    <div class="spr-review-profile flex-shrink-0">
                                                        <img class="blur-up lazyload" data-src="assets/images/users/user-img1.jpg" src="assets/images/users/user-img1.jpg" alt="" width="200" height="200" />
                                                    </div>
                                                    <div class="spr-review-content flex-grow-1">
                                                        <div class="d-flex justify-content-between flex-column mb-2">
                                                            <div class="title-review d-flex align-items-center justify-content-between">
                                                                <span class="product-review spr-starratings m-0">
                                                                    <span class="product-review spr-starratings m-0">
                                                                        <span class="reviewLink">
                                                                            <a href="#" onclick="return false;" [ngClass]="REVIEW.cantidad >= 1 ? 'icon anm anm-star' : 'icon anm anm-star-o'" (click)="addCantidad(1)"></a>
                                                                            <a href="#" onclick="return false;" [ngClass]="REVIEW.cantidad >= 2 ? 'icon anm anm-star' : 'icon anm anm-star-o'" (click)="addCantidad(2)"></a>
                                                                            <a href="#" onclick="return false;" [ngClass]="REVIEW.cantidad >= 3 ? 'icon anm anm-star' : 'icon anm anm-star-o'" (click)="addCantidad(3)"></a>
                                                                            <a href="#" onclick="return false;" [ngClass]="REVIEW.cantidad >= 4 ? 'icon anm anm-star' : 'icon anm anm-star-o'" (click)="addCantidad(4)"></a>
                                                                            <a href="#" onclick="return false;" [ngClass]="REVIEW.cantidad >= 5 ? 'icon anm anm-star' : 'icon anm anm-star-o'" (click)="addCantidad(5)"></a>
                                                                        </span>
                                                                    </span>
                                                                </span>
                                                            </div>

                                                        </div>
                                                        <b class="head-font">{{ REVIEW.title }}</b>
                                                        <p class="spr-review-body">{{ REVIEW.description }}</p>
                                                    </div>
                                                </div>
                                            </ng-container>
                                        </div>
                                    </ng-template>
                                </div>
                            </div>
                            <ng-container *ngIf="this.sale_detail_selected">
                                <div class="col-12 col-sm-12 col-md-12 col-lg-6 mb-4">
                                    <form method="post" action="#" class="product-review-form new-review-form">
                                        <h3 class="spr-form-title mb-3" style="color: #222; font-weight: 600; letter-spacing: 0.5px; font-size: 1.3rem;">
                                            <i class="icon anm anm-pencil me-2"></i>Escribe una rese√±a
                                        </h3>
                                        <p>Tu direcci√≥n de correo electr√≥nico no ser√° publicada. Los campos obligatorios est√°n marcados con *</p>
                                        <fieldset class="row spr-form-contact">
                                            <div class="col-sm-6 spr-form-contact-name form-group d-none">
                                                <label class="spr-form-label" for="nickname">Nombre <span class="required">*</span></label>
                                                <input class="spr-form-input spr-form-input-text" id="nickname" type="text" name="name" required />
                                            </div>
                                            <div class="col-sm-6 spr-form-contact-email form-group d-none">
                                                <label class="spr-form-label" for="email">Correo electr√≥nico <span class="required">*</span></label>
                                                <input class="spr-form-input spr-form-input-email" id="email" type="email" name="email" required />
                                            </div>
                                            <div class="col-sm-6 spr-form-review-title form-group">
                                                <label class="spr-form-label" for="review">T√≠tulo de la rese√±a </label>
                                                <input class="spr-form-input spr-form-input-text" [(ngModel)]="title" id="title" type="text" name="title" />
                                            </div>
                                            <div class="col-sm-6 spr-form-review-rating form-group">
                                                <label class="spr-form-label">Clasificaci√≥n</label>
                                                <div class="product-review pt-1">
                                                    <div class="review-rating">
                                                        <a href="#" onclick="return false;" [ngClass]="calificacion >= 1 ? 'icon anm anm-star' : 'icon anm anm-star-o'" (click)="addCalificacion(1)"></a>
                                                        <a href="#" onclick="return false;" [ngClass]="calificacion >= 2 ? 'icon anm anm-star' : 'icon anm anm-star-o'" (click)="addCalificacion(2)"></a>
                                                        <a href="#" onclick="return false;" [ngClass]="calificacion >= 3 ? 'icon anm anm-star' : 'icon anm anm-star-o'" (click)="addCalificacion(3)"></a>
                                                        <a href="#" onclick="return false;" [ngClass]="calificacion >= 4 ? 'icon anm anm-star' : 'icon anm anm-star-o'" (click)="addCalificacion(4)"></a>
                                                        <a href="#" onclick="return false;" [ngClass]="calificacion >= 5 ? 'icon anm anm-star' : 'icon anm anm-star-o'" (click)="addCalificacion(5)"></a>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-12 spr-form-review-body form-group">
                                                <label class="spr-form-label" for="message">Cuerpo de la rese√±a <span class="spr-form-review-body-charactersremaining">(1500) caracteres restantes</span></label>
                                                <div class="spr-form-input">
                                                    <textarea class="spr-form-input spr-form-input-textarea" [(ngModel)]="description" id="description" name="description" rows="3"></textarea>
                                                </div>
                                            </div>
                                        </fieldset>
                                        <div class="spr-form-actions clearfix">
                                            <button type="submit" 
                                                    class="btn btn-primary px-4 py-2 fw-semibold" 
                                                    (click)="storeReview()"
                                                    style="border-radius: 6px; letter-spacing: 0.5px; transition: all 0.3s ease;">
                                                <i class="icon anm anm-send me-2"></i>Enviar rese√±a
                                            </button>
                                        </div>
                                    </form>
                                </div>
                            </ng-container>
                        </div>
                    </div>
                    <!-- End Review -->
                </div>
            </div>
            <!-- END PRODUCT TABS -->

        </div>
        <!-- END MAIN CONTENT -->

        <!-- PRODUCTS RELATEDS & INTEREST -->
        <ng-container>
            <!-- Loader o Skeleton -->
            <ng-container *ngIf="loader.loading$ | async; else product_related_slider">
                <app-product-slider-skeleton [itemCount]="5" titleWidth="20%" subtitleWidth="30%"></app-product-slider-skeleton>
            </ng-container>
            <ng-template #product_related_slider>
                <!--Related Products-->
                <ng-container *ngIf="related_products && related_products.length > 0">
                    <app-related-products
                        [related_products]="related_products"
                        [product_selected]="product_selected"
                        [euro]="euro"
                        (navigateToProduct)="navigateToProduct($event.slug, $event.discountId)"
                        [getDiscount]="getDiscount"
                        [SALE_FLASH]="SALE_FLASH"
                    ></app-related-products>
                </ng-container> 
                <!--End Related Products-->

                <!-- Interest Products-->
                <ng-container *ngIf="interest_products && interest_products.length > 0">
                    <app-interest-products
                        [interest_products]="interest_products"
                        [product_selected]="product_selected"
                        [euro]="euro"
                        (navigateToProduct)="navigateToProduct($event.slug, $event.discountId)"
                        [getDiscount]="getDiscount"
                        [SALE_FLASH]="SALE_FLASH"
                    ></app-interest-products>
                </ng-container> 
                <!--End Interest Products-->
            </ng-template>
        </ng-container> 
        <!-- END PRODUCTS RELATEDS & INTEREST -->

        <!-- STORYTELLING / BRAND MESSAGE -->
        <app-brand-message [isMobile]="isMobile" [isDesktop]="isDesktop"></app-brand-message>
        <!-- END STORYTELLING / BRAND MESSAGE -->

        <!-- RECENTLY VIEWED PRODUCTS -->
        <section class="section product-slider pb-0 d-none">
            <div class="container">
                <div class="section-header">
                    <p class="mb-1 mt-0">Browse Bestseller</p>
                    <h2>You may also like</h2>
                </div>

                <!--Product Grid-->
                <div class="product-slider-5items gp10 arwOut5 grid-products">
                    <div class="item col-item">
                        <div class="product-box">
                            <!-- Start Product Image -->
                            <div class="product-image">
                                <!-- Start Product Image -->
                                <a href="product-layout1.html" class="product-img">
                                    <!-- Image -->
                                    <img class="primary blur-up lazyload" data-src="assets/images/products/product1.jpg" src="assets/images/products/product1.jpg" alt="Product" title="Product" width="625" height="808" />
                                    <!-- End Image -->
                                    <!-- Hover Image -->
                                    <img class="hover blur-up lazyload" data-src="assets/images/products/product1-1.jpg" src="assets/images/products/product1-1.jpg" alt="Product" title="Product" width="625" height="808" />
                                    <!-- End Hover Image -->
                                </a>
                                <!-- End Product Image -->
                                <!-- Product label -->
                                <div class="product-labels"><span class="lbl on-sale">Sold out</span></div>
                                <!-- End Product label -->
                                <!--Product Button-->
                                <div class="button-set style1">
                                    <!--Cart Button-->
                                    <a href="#addtocart-modal" class="btn-icon addtocart add-to-cart-modal soldOutBtn disabled" data-bs-toggle="modal" data-bs-target="#addtocart_modal">
                                        <span class="icon-wrap d-flex-justify-center h-100 w-100" data-bs-toggle="tooltip" data-bs-placement="left" title="Out Of stock"><i class="icon anm anm-cart-l"></i><span class="text">Add to Cart</span></span>
                                    </a>
                                    <!--End Cart Button-->
                                    <!--Quick View Button-->
                                    <a href="#quickview-modal" class="btn-icon quickview quick-view-modal" data-bs-toggle="modal" data-bs-target="#quickview_modal">
                                        <span class="icon-wrap d-flex-justify-center h-100 w-100" data-bs-toggle="tooltip" data-bs-placement="left" title="Quick View"><i class="icon anm anm-search-plus-l"></i><span class="text">Quick View</span></span>
                                    </a>
                                    <!--End Quick View Button-->
                                    <!--Wishlist Button-->
                                    <a href="wishlist-style2.html" class="btn-icon wishlist" data-bs-toggle="tooltip" data-bs-placement="left" title="Add To Wishlist"><i class="icon anm anm-heart-l"></i><span class="text">Add To Wishlist</span></a>
                                    <!--End Wishlist Button-->
                                    <!--Compare Button-->
                                    <a href="compare-style2.html" class="btn-icon compare" data-bs-toggle="tooltip" data-bs-placement="left" title="Add to Compare"><i class="icon anm anm-random-r"></i><span class="text">Add to Compare</span></a>
                                    <!--End Compare Button-->
                                </div>
                                <!--End Product Button-->
                            </div>
                            <!-- End Product Image -->
                            <!-- Start Product Details -->
                            <div class="product-details text-left">
                                <!-- Product Name -->
                                <div class="product-name">
                                    <a href="product-layout1.html">Foldable Duffel Bag</a>
                                </div>
                                <!-- End Product Name -->
                                <!-- Product Price -->
                                <div class="product-price">
                                    <span class="price">$299.00</span>
                                </div>
                                <!-- End Product Price -->
                                <!-- Product Review -->
                                <div class="product-review">
                                    <i class="icon anm anm-star"></i><i class="icon anm anm-star"></i><i class="icon anm anm-star"></i><i class="icon anm anm-star-o"></i><i class="icon anm anm-star-o"></i>
                                    <span class="caption hidden ms-1">15 Reviews</span>
                                </div>
                                <!-- End Product Review -->
                            </div>
                            <!-- End product details -->
                        </div>
                    </div>
                    <div class="item col-item">
                        <div class="product-box">
                            <!-- Start Product Image -->
                            <div class="product-image">
                                <!-- Start Product Image -->
                                <a href="product-layout1.html" class="product-img">
                                    <!-- Image -->
                                    <img class="primary blur-up lazyload" data-src="assets/images/products/product1.jpg" src="assets/images/products/product1.jpg" alt="Product" title="Product" width="625" height="808" />
                                    <!-- End Image -->
                                    <!-- Hover Image -->
                                    <img class="hover blur-up lazyload" data-src="assets/images/products/product1-1.jpg" src="assets/images/products/product1-1.jpg" alt="Product" title="Product" width="625" height="808" />
                                    <!-- End Hover Image -->
                                </a>
                                <!-- End Product Image -->
                                <!-- Product label -->
                                <div class="product-labels"><span class="lbl pr-label1">Best seller</span></div>
                                <!-- End Product label -->
                                <!--Product Button-->
                                <div class="button-set style1">
                                    <!--Cart Button-->
                                    <a href="#addtocart-modal" class="btn-icon addtocart add-to-cart-modal" data-bs-toggle="modal" data-bs-target="#addtocart_modal">
                                        <span class="icon-wrap d-flex-justify-center h-100 w-100" data-bs-toggle="tooltip" data-bs-placement="left" title="Add to Cart"><i class="icon anm anm-cart-l"></i><span class="text">Add to Cart</span></span>
                                    </a>
                                    <!--End Cart Button-->
                                    <!--Quick View Button-->
                                    <a href="#quickview-modal" class="btn-icon quickview quick-view-modal" data-bs-toggle="modal" data-bs-target="#quickview_modal">
                                        <span class="icon-wrap d-flex-justify-center h-100 w-100" data-bs-toggle="tooltip" data-bs-placement="left" title="Quick View"><i class="icon anm anm-search-plus-l"></i><span class="text">Quick View</span></span>
                                    </a>
                                    <!--End Quick View Button-->
                                    <!--Wishlist Button-->
                                    <a href="wishlist-style2.html" class="btn-icon wishlist" data-bs-toggle="tooltip" data-bs-placement="left" title="Add To Wishlist"><i class="icon anm anm-heart-l"></i><span class="text">Add To Wishlist</span></a>
                                    <!--End Wishlist Button-->
                                    <!--Compare Button-->
                                    <a href="compare-style2.html" class="btn-icon compare" data-bs-toggle="tooltip" data-bs-placement="left" title="Add to Compare"><i class="icon anm anm-random-r"></i><span class="text">Add to Compare</span></a>
                                    <!--End Compare Button-->
                                </div>
                                <!--End Product Button-->
                            </div>
                            <!-- End Product Image -->
                            <!-- Start Product Details -->
                            <div class="product-details text-left">
                                <!-- Product Name -->
                                <div class="product-name">
                                    <a href="product-layout1.html">High-Waisted Pant</a>
                                </div>
                                <!-- End Product Name -->
                                <!-- Product Price -->
                                <div class="product-price">
                                    <span class="price">$139.00</span>
                                </div>
                                <!-- End Product Price -->
                                <!-- Product Review -->
                                <div class="product-review">
                                    <i class="icon anm anm-star"></i><i class="icon anm anm-star"></i><i class="icon anm anm-star-o"></i><i class="icon anm anm-star-o"></i><i class="icon anm anm-star-o"></i>
                                    <span class="caption hidden ms-1">11 Reviews</span>
                                </div>
                                <!-- End Product Review -->
                            </div>
                            <!-- End product details -->
                        </div>
                    </div>
                    <div class="item col-item">
                        <div class="product-box">
                            <!-- Start Product Image -->
                            <div class="product-image">
                                <!-- Start Product Image -->
                                <a href="product-layout1.html" class="product-img">
                                    <!-- Image -->
                                    <img class="primary blur-up lazyload" data-src="assets/images/products/product1.jpg" src="assets/images/products/product1.jpg" alt="Product" title="Product" width="625" height="808" />
                                    <!-- End Image -->
                                    <!-- Hover Image -->
                                    <img class="hover blur-up lazyload" data-src="assets/images/products/product1-1.jpg" src="assets/images/products/product1-1.jpg" alt="Product" title="Product" width="625" height="808" />
                                    <!-- End Hover Image -->
                                </a>
                                <!-- End Product Image -->
                                <!--Product Button-->
                                <div class="button-set style1">
                                    <!--Cart Button-->
                                    <a href="#addtocart-modal" class="btn-icon addtocart add-to-cart-modal" data-bs-toggle="modal" data-bs-target="#addtocart_modal">
                                        <span class="icon-wrap d-flex-justify-center h-100 w-100" data-bs-toggle="tooltip" data-bs-placement="left" title="Add to Cart"><i class="icon anm anm-cart-l"></i><span class="text">Add to Cart</span></span>
                                    </a>
                                    <!--End Cart Button-->
                                    <!--Quick View Button-->
                                    <a href="#quickview-modal" class="btn-icon quickview quick-view-modal" data-bs-toggle="modal" data-bs-target="#quickview_modal">
                                        <span class="icon-wrap d-flex-justify-center h-100 w-100" data-bs-toggle="tooltip" data-bs-placement="left" title="Quick View"><i class="icon anm anm-search-plus-l"></i><span class="text">Quick View</span></span>
                                    </a>
                                    <!--End Quick View Button-->
                                    <!--Wishlist Button-->
                                    <a href="wishlist-style2.html" class="btn-icon wishlist" data-bs-toggle="tooltip" data-bs-placement="left" title="Add To Wishlist"><i class="icon anm anm-heart-l"></i><span class="text">Add To Wishlist</span></a>
                                    <!--End Wishlist Button-->
                                    <!--Compare Button-->
                                    <a href="compare-style2.html" class="btn-icon compare" data-bs-toggle="tooltip" data-bs-placement="left" title="Add to Compare"><i class="icon anm anm-random-r"></i><span class="text">Add to Compare</span></a>
                                    <!--End Compare Button-->
                                </div>
                                <!--End Product Button-->
                            </div>
                            <!-- End Product Image -->
                            <!-- Start Product Details -->
                            <div class="product-details text-left">
                                <!-- Product Name -->
                                <div class="product-name">
                                    <a href="product-layout1.html">Narror Neck Tie</a>
                                </div>
                                <!-- End Product Name -->
                                <!-- Product Price -->
                                <div class="product-price">
                                    <span class="price">$134.00</span>
                                </div>
                                <!-- End Product Price -->
                                <!-- Product Review -->
                                <div class="product-review">
                                    <i class="icon anm anm-star-o"></i><i class="icon anm anm-star-o"></i><i class="icon anm anm-star-o"></i><i class="icon anm anm-star-o"></i><i class="icon anm anm-star-o"></i>
                                    <span class="caption hidden ms-1">0 Reviews</span>
                                </div>
                                <!-- End Product Review -->
                            </div>
                            <!-- End product details -->
                        </div>
                    </div>
                    <div class="item col-item">
                        <div class="product-box">
                            <!-- Start Product Image -->
                            <div class="product-image">
                                <!-- Start Product Image -->
                                <a href="product-layout1.html" class="product-img">
                                    <!-- Image -->
                                    <img class="primary blur-up lazyload" data-src="assets/images/products/product1.jpg" src="assets/images/products/product1.jpg" alt="Product" title="Product" width="625" height="808" />
                                    <!-- End Image -->
                                    <!-- Hover Image -->
                                    <img class="hover blur-up lazyload" data-src="assets/images/products/product1-1.jpg" src="assets/images/products/product1-1.jpg" alt="Product" title="Product" width="625" height="808" />
                                    <!-- End Hover Image -->
                                </a>
                                <!-- End Product Image -->
                                <!-- Product label -->
                                <div class="product-labels"><span class="lbl pr-label4">Popular</span></div>
                                <!-- End Product label -->
                                <!--Product Button-->
                                <div class="button-set style1">
                                    <!--Cart Button-->
                                    <a href="#addtocart-modal" class="btn-icon addtocart add-to-cart-modal" data-bs-toggle="modal" data-bs-target="#addtocart_modal">
                                        <span class="icon-wrap d-flex-justify-center h-100 w-100" data-bs-toggle="tooltip" data-bs-placement="left" title="Add to Cart"><i class="icon anm anm-cart-l"></i><span class="text">Add to Cart</span></span>
                                    </a>
                                    <!--End Cart Button-->
                                    <!--Quick View Button-->
                                    <a href="#quickview-modal" class="btn-icon quickview quick-view-modal" data-bs-toggle="modal" data-bs-target="#quickview_modal">
                                        <span class="icon-wrap d-flex-justify-center h-100 w-100" data-bs-toggle="tooltip" data-bs-placement="left" title="Quick View"><i class="icon anm anm-search-plus-l"></i><span class="text">Quick View</span></span>
                                    </a>
                                    <!--End Quick View Button-->
                                    <!--Wishlist Button-->
                                    <a href="wishlist-style2.html" class="btn-icon wishlist" data-bs-toggle="tooltip" data-bs-placement="left" title="Add To Wishlist"><i class="icon anm anm-heart-l"></i><span class="text">Add To Wishlist</span></a>
                                    <!--End Wishlist Button-->
                                    <!--Compare Button-->
                                    <a href="compare-style2.html" class="btn-icon compare" data-bs-toggle="tooltip" data-bs-placement="left" title="Add to Compare"><i class="icon anm anm-random-r"></i><span class="text">Add to Compare</span></a>
                                    <!--End Compare Button-->
                                </div>
                                <!--End Product Button-->
                            </div>
                            <!-- End Product Image -->
                            <!-- Start Product Details -->
                            <div class="product-details text-left">
                                <!-- Product Name -->
                                <div class="product-name">
                                    <a href="product-layout1.html">Men's Cheater Jacket</a>
                                </div>
                                <!-- End Product Name -->
                                <!-- Product Price -->
                                <div class="product-price">
                                    <span class="price">$99.00</span>
                                </div>
                                <!-- End Product Price -->
                                <!-- Product Review -->
                                <div class="product-review">
                                    <i class="icon anm anm-star"></i><i class="icon anm anm-star"></i><i class="icon anm anm-star"></i><i class="icon anm anm-star-o"></i><i class="icon anm anm-star-o"></i>
                                    <span class="caption hidden ms-1">19 Reviews</span>
                                </div>
                                <!-- End Product Review -->
                            </div>
                            <!-- End product details -->
                        </div>
                    </div>
                    <div class="item col-item">
                        <div class="product-box">
                            <!-- Start Product Image -->
                            <div class="product-image">
                                <!-- Start Product Image -->
                                <a href="product-layout1.html" class="product-img">
                                    <!-- Image -->
                                    <img class="primary blur-up lazyload" data-src="assets/images/products/product1.jpg" src="assets/images/products/product1.jpg" alt="Product" title="Product" width="625" height="808" />
                                    <!-- End Image -->
                                    <!-- Hover Image -->
                                    <img class="hover blur-up lazyload" data-src="assets/images/products/product1-1.jpg" src="assets/images/products/product1-1.jpg" alt="Product" title="Product" width="625" height="808" />
                                    <!-- End Hover Image -->
                                </a>
                                <!-- End Product Image -->
                                <!--Product Button-->
                                <div class="button-set style1">
                                    <!--Cart Button-->
                                    <a href="#addtocart-modal" class="btn-icon addtocart add-to-cart-modal" data-bs-toggle="modal" data-bs-target="#addtocart_modal">
                                        <span class="icon-wrap d-flex-justify-center h-100 w-100" data-bs-toggle="tooltip" data-bs-placement="left" title="Add to Cart"><i class="icon anm anm-cart-l"></i><span class="text">Add to Cart</span></span>
                                    </a>
                                    <!--End Cart Button-->
                                    <!--Quick View Button-->
                                    <a href="#quickview-modal" class="btn-icon quickview quick-view-modal" data-bs-toggle="modal" data-bs-target="#quickview_modal">
                                        <span class="icon-wrap d-flex-justify-center h-100 w-100" data-bs-toggle="tooltip" data-bs-placement="left" title="Quick View"><i class="icon anm anm-search-plus-l"></i><span class="text">Quick View</span></span>
                                    </a>
                                    <!--End Quick View Button-->
                                    <!--Wishlist Button-->
                                    <a href="wishlist-style2.html" class="btn-icon wishlist" data-bs-toggle="tooltip" data-bs-placement="left" title="Add To Wishlist"><i class="icon anm anm-heart-l"></i><span class="text">Add To Wishlist</span></a>
                                    <!--End Wishlist Button-->
                                    <!--Compare Button-->
                                    <a href="compare-style2.html" class="btn-icon compare" data-bs-toggle="tooltip" data-bs-placement="left" title="Add to Compare"><i class="icon anm anm-random-r"></i><span class="text">Add to Compare</span></a>
                                    <!--End Compare Button-->
                                </div>
                                <!--End Product Button-->
                            </div>
                            <!-- End Product Image -->
                            <!-- Start Product Details -->
                            <div class="product-details text-left">
                                <!-- Product Name -->
                                <div class="product-name">
                                    <a href="product-layout1.html">Casual Mustard Shirt</a>
                                </div>
                                <!-- End Product Name -->
                                <!-- Product Price -->
                                <div class="product-price">
                                    <span class="price">$167.00</span>
                                </div>
                                <!-- End Product Price -->
                                <!-- Product Review -->
                                <div class="product-review">
                                    <i class="icon anm anm-star"></i><i class="icon anm anm-star"></i><i class="icon anm anm-star"></i><i class="icon anm anm-star"></i><i class="icon anm anm-star"></i>
                                    <span class="caption hidden ms-1">7 Reviews</span>
                                </div>
                                <!-- End Product Review -->
                            </div>
                            <!-- End product details -->
                        </div>
                    </div>
                </div>
                <!--End Product Grid-->
            </div>
        </section>
        <!-- END RECENTLY VIEWED PRODUCTS -->
    </div>
    <!-- END BODY CONTAINER -->
     

    <!--Scoll Top-->
    <div id="site-scroll"><i class="icon anm anm-arw-up"></i></div>
    <!--End Scoll Top-->

    <!-- Product Quickshop Modal-->
    <div class="quickshop-modal modal fade" id="quickshop_modal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-lg modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-body">
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    <form method="post" action="#" id="product-form-quickshop" class="product-form align-items-center">
                        <!-- Product Info -->
                        <div class="row g-0 item mb-3">
                            <a class="col-4 product-image" href="product-layout1.html"><img class="blur-up lazyload" data-src="assets/images/products/product1.jpg" src="assets/images/products/product1.jpg" alt="Product" title="Product" width="625" height="808" /></a>
                            <div class="col-8 product-details">
                                <div class="product-variant ps-3">
                                    <a class="product-title" href="product-layout1.html">Weave Hoodie Sweatshirt</a>
                                    <div class="priceRow mt-2 mb-3">
                                        <div class="product-price m-0"><span class="old-price">$114.00</span><span class="price">$99.00</span></div>
                                    </div>
                                    <div class="qtyField">
                                        <a class="qtyBtn minus" href="#;"><i class="icon anm anm-minus-r"></i></a>
                                        <input type="text" name="quantity" value="1" class="qty">
                                        <a class="qtyBtn plus" href="#;"><i class="icon anm anm-plus-r"></i></a>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- End Product Info -->
                        <!-- Swatches Color -->
                        <div class="variants-clr swatches-image clearfix mb-3 swatch-0 option1" data-option-index="0">
                            <label class="label d-flex justify-content-center">Color:<span class="slVariant ms-1 fw-bold">Black</span></label>
                            <ul class="swatches d-flex-justify-center pt-1 clearfix">
                                <li class="swatch large radius available active"><img src="assets/images/products/swatches/80x80.jpg" alt="image" width="80" height="80" data-bs-toggle="tooltip" data-bs-placement="top" title="Blue" /></li>
                                <li class="swatch large radius available"><img src="assets/images/products/swatches/80x80.jpg" alt="image" width="80" height="80" data-bs-toggle="tooltip" data-bs-placement="top" title="Black" /></li>
                                <li class="swatch large radius available"><img src="assets/images/products/swatches/80x80.jpg" alt="image" width="80" height="80" data-bs-toggle="tooltip" data-bs-placement="top" title="Pink" /></li>
                                <li class="swatch large radius available green"><span class="swatchLbl" data-bs-toggle="tooltip" data-bs-placement="top" title="Green"></span></li>
                                <li class="swatch large radius soldout yellow"><span class="swatchLbl" data-bs-toggle="tooltip" data-bs-placement="top" title="Yellow"></span></li>
                            </ul>
                        </div>
                        <!-- End Swatches Color -->
                        <!-- Swatches Size -->
                        <div class="variants-size swatches-size clearfix mb-4 swatch-1 option2" data-option-index="1">
                            <label class="label d-flex justify-content-center">Size:<span class="slVariant ms-1 fw-bold">S</span></label>
                            <ul class="size-swatches d-flex-justify-center pt-1 clearfix">
                                <li class="swatch large radius soldout"><span class="swatchLbl" data-bs-toggle="tooltip" data-bs-placement="top" title="XS">XS</span></li>
                                <li class="swatch large radius available active"><span class="swatchLbl" data-bs-toggle="tooltip" data-bs-placement="top" title="S">S</span></li>
                                <li class="swatch large radius available"><span class="swatchLbl" data-bs-toggle="tooltip" data-bs-placement="top" title="M">M</span></li>
                                <li class="swatch large radius available"><span class="swatchLbl" data-bs-toggle="tooltip" data-bs-placement="top" title="L">L</span></li>
                                <li class="swatch large radius available"><span class="swatchLbl" data-bs-toggle="tooltip" data-bs-placement="top" title="XL">XL</span></li>
                            </ul>
                        </div>
                        <!-- End Swatches Size -->
                        <!-- Product Action -->
                        <div class="product-form-submit d-flex-justify-center">
                            <button type="submit" name="add" class="btn product-cart-submit me-2"><span>Add to cart</span></button>
                            <button type="submit" name="sold" class="btn btn-secondary product-sold-out d-none" disabled="disabled">Sold out</button>
                            <button type="submit" name="buy" class="btn btn-secondary proceed-to-checkout">Buy it now</button>
                        </div>
                        <!-- End Product Action -->
                        <div class="text-center mt-3"><a class="text-link" href="product-layout1.html">View More Details</a></div>
                    </form>
                </div>
            </div>
        </div>
    </div>
    <!-- End Product Quickshop Modal -->

    <!-- Product Addtocart Modal-->
    <div class="addtocart-modal modal fade" id="addtocart_modal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-lg modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-body">
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    <form method="post" action="#" id="product-form-addtocart" class="product-form align-items-center">
                        <h3 class="title mb-3 text-success text-center">Added to cart Successfully!</h3>
                        <div class="row d-flex-center text-center">
                            <div class="col-md-6">
                                <!-- Product Image -->
                                <a class="product-image" href="product-layout1.html"><img class="blur-up lazyload" data-src="assets/images/products/product1.jpg" src="assets/images/products/product1.jpg" alt="Product" title="Product" width="625" height="808" /></a>
                                <!-- End Product Image -->
                            </div>
                            <div class="col-md-6 mt-3 mt-md-0">
                                <!-- Product Info -->
                                <div class="product-details">
                                    <a class="product-title" href="product-layout1.html">Cuff Beanie Cap</a>
                                    <p class="product-clr my-2 text-muted">Black / XL</p>
                                </div>
                                <div class="addcart-total">
                                    <p class="product-items mb-2">There are <strong>1</strong> items in your cart</p>
                                    <p class="d-flex-justify-center">Total: <span class="price">$198.00</span></p>
                                </div>
                                <!-- End Product Info -->
                                <!-- Product Action -->
                                <div class="product-form-submit d-flex-justify-center">
                                    <a href="#" class="btn btn-outline-primary product-continue w-100">Continue Shopping</a>
                                    <a href="cart-style1.html" class="btn btn-secondary product-viewcart w-100 my-2 my-md-3">View Cart</a>
                                    <a href="checkout-style1.html" class="btn btn-primary product-checkout w-100">Proceed to checkout</a>
                                </div>
                                <!-- End Product Action -->
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
    <!-- End Product Addtocart Modal -->

    <!-- Product Quickview Modal-->
    <div class="quickview-modal modal fade" id="quickview_modal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-lg modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-body">
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    <div class="row">
                        <div class="col-12 col-sm-6 col-md-6 col-lg-6 mb-3 mb-md-0">
                            <!-- Model Thumbnail -->
                            <div id="quickView" class="carousel slide">
                                <!-- Image Slide carousel items -->
                                <div class="carousel-inner">
                                    <div class="item carousel-item active" data-bs-slide-number="0">
                                        <img class="blur-up lazyload" data-src="assets/images/products/product1.jpg" src="assets/images/products/product1.jpg" alt="product" title="Product" width="625" height="808" />
                                    </div>
                                    <div class="item carousel-item" data-bs-slide-number="1">
                                        <img class="blur-up lazyload" data-src="assets/images/products/product1-1.jpg" src="assets/images/products/product1-1.jpg" alt="product" title="Product" width="625" height="808" />
                                    </div>
                                    <div class="item carousel-item" data-bs-slide-number="2">
                                        <img class="blur-up lazyload" data-src="assets/images/products/product1-1.jpg" src="assets/images/products/product1-1.jpg" alt="product" title="Product" width="625" height="808" />
                                    </div>
                                    <div class="item carousel-item" data-bs-slide-number="3">
                                        <img class="blur-up lazyload" data-src="assets/images/products/product1-1.jpg" src="assets/images/products/product1-1.jpg" alt="product" title="Product" width="625" height="808" />
                                    </div>
                                    <div class="item carousel-item" data-bs-slide-number="4">
                                        <img class="blur-up lazyload" data-src="assets/images/products/product1-1.jpg" src="assets/images/products/product1-1.jpg" alt="product" title="Product" width="625" height="808" />
                                    </div>
                                    <div class="item carousel-item" data-bs-slide-number="5">
                                        <img class="blur-up lazyload" data-src="assets/images/products/product1-1.jpg" src="assets/images/products/product1-1.jpg" alt="product" title="Product" width="625" height="808" />
                                    </div>
                                </div>
                                <!-- End Image Slide carousel items -->
                                <!-- Thumbnail image -->
                                <div class="model-thumbnail-img">
                                    <!-- Thumbnail slide -->
                                    <div class="carousel-indicators list-inline">
                                        <div class="list-inline-item active" id="carousel-selector-0" data-bs-slide-to="0" data-bs-target="#quickView">
                                            <img class="blur-up lazyload" data-src="assets/images/products/product1.jpg" src="assets/images/products/product1.jpg" alt="product" title="Product" width="625" height="808" />
                                        </div>
                                        <div class="list-inline-item" id="carousel-selector-1" data-bs-slide-to="1" data-bs-target="#quickView">
                                            <img class="blur-up lazyload" data-src="assets/images/products/product1-1.jpg" src="assets/images/products/product1-1.jpg" alt="product" title="Product" width="625" height="808" />
                                        </div>
                                        <div class="list-inline-item" id="carousel-selector-2" data-bs-slide-to="2" data-bs-target="#quickView">
                                            <img class="blur-up lazyload" data-src="assets/images/products/product1-1.jpg" src="assets/images/products/product1-1.jpg" alt="product" title="Product" width="625" height="808" />
                                        </div>
                                        <div class="list-inline-item" id="carousel-selector-3" data-bs-slide-to="3" data-bs-target="#quickView">
                                            <img class="blur-up lazyload" data-src="assets/images/products/product1-1.jpg" src="assets/images/products/product1-1.jpg" alt="product" title="Product" width="625" height="808" />
                                        </div>
                                        <div class="list-inline-item" id="carousel-selector-4" data-bs-slide-to="4" data-bs-target="#quickView">
                                            <img class="blur-up lazyload" data-src="assets/images/products/product1-1.jpg" src="assets/images/products/product1-1.jpg" alt="product" title="Product" width="625" height="808" />
                                        </div>
                                        <div class="list-inline-item" id="carousel-selector-5" data-bs-slide-to="5" data-bs-target="#quickView">
                                            <img class="blur-up lazyload" data-src="assets/images/products/product1-1.jpg" src="assets/images/products/product1-1.jpg" alt="product" title="Product" width="625" height="808" />
                                        </div>
                                    </div>
                                    <!-- End Thumbnail slide -->
                                    <!-- Carousel arrow button -->
                                    <a class="carousel-control-prev carousel-arrow" href="#quickView" data-bs-target="#quickView" data-bs-slide="prev"><i class="icon anm anm-angle-left-r"></i></a>
                                    <a class="carousel-control-next carousel-arrow" href="#quickView" data-bs-target="#quickView" data-bs-slide="next"><i class="icon anm anm-angle-right-r"></i></a>
                                    <!-- End Carousel arrow button -->
                                </div>
                                <!-- End Thumbnail image -->
                            </div>
                            <!-- End Model Thumbnail -->
                            <div class="text-center mt-3"><a href="product-layout1.html" class="text-link">View More Details</a></div>
                        </div>
                        <div class="col-12 col-sm-6 col-md-6 col-lg-6">
                            <div class="product-arrow d-flex justify-content-between">
                                <h2 class="product-title">Product Quick View Popup</h2>
                            </div>
                            <div class="product-review d-flex mt-0 mb-2">
                                <div class="rating"><i class="icon anm anm-star"></i><i class="icon anm anm-star"></i><i class="icon anm anm-star"></i><i class="icon anm anm-star"></i><i class="icon anm anm-star-o"></i></div>
                                <div class="reviews ms-2"><a href="#">6 Reviews</a></div>
                            </div>
                            <div class="product-info">
                                <p class="product-vendor">Vendor:<span class="text"><a href="#">HVL</a></span></p>
                                <p class="product-sku">SKU:<span class="text">RF104</span></p>
                            </div>
                            <div class="pro-stockLbl my-2">
                                <span class="d-flex-center stockLbl instock d-none"><span> In stock</span></span>
                                <span class="d-flex-center stockLbl preorder d-none"><span> Pre-order Now</span></span>
                                <span class="d-flex-center stockLbl outstock d-none"><span>Sold out</span></span>
                            </div>
                            <div class="product-price d-flex-center my-3">
                                <span class="price old-price">$135.00</span><span class="price">$129.00</span>
                            </div>
                            <div class="sort-description">The standard chunk of Lorem Ipsum used since the 1500s is reproduced below for those interested.</div>
                            <form method="post" action="#" id="product_form--option" class="product-form">
                                <div class="product-options d-flex-wrap">
                                    <div class="product-item swatches-image w-100 mb-3 swatch-0 option1" data-option-index="0">
                                        <label class="label d-flex align-items-center">Color:<span class="slVariant ms-1 fw-bold">Blue</span></label>
                                        <ul class="variants-clr swatches d-flex-center pt-1 clearfix">
                                            <li class="swatch large radius available blue"><span class="swatchLbl" data-bs-toggle="tooltip" data-bs-placement="top" title="Blue"></span></li>
                                            <li class="swatch large radius available black"><span class="swatchLbl" data-bs-toggle="tooltip" data-bs-placement="top" title="Black"></span></li>
                                            <li class="swatch large radius available pink"><span class="swatchLbl" data-bs-toggle="tooltip" data-bs-placement="top" title="Pink"></span></li>
                                            <li class="swatch large radius available green"><span class="swatchLbl" data-bs-toggle="tooltip" data-bs-placement="top" title="Green"></span></li>
                                            <li class="swatch large radius soldout yellow"><span class="swatchLbl" data-bs-toggle="tooltip" data-bs-placement="top" title="Yellow"></span></li>
                                        </ul>
                                    </div>
                                    <div class="product-item swatches-size w-100 mb-3 swatch-1 option2" data-option-index="1">
                                        <label class="label d-flex align-items-center">Size:<span class="slVariant ms-1 fw-bold">S</span></label>
                                        <ul class="variants-size size-swatches d-flex-center pt-1 clearfix">
                                            <li class="swatch large radius soldout"><span class="swatchLbl" data-bs-toggle="tooltip" data-bs-placement="top" title="XS">XS</span></li>
                                            <li class="swatch large radius available active"><span class="swatchLbl" data-bs-toggle="tooltip" data-bs-placement="top" title="S">S</span></li>
                                            <li class="swatch large radius available"><span class="swatchLbl" data-bs-toggle="tooltip" data-bs-placement="top" title="M">M</span></li>
                                            <li class="swatch large radius available"><span class="swatchLbl" data-bs-toggle="tooltip" data-bs-placement="top" title="L">L</span></li>
                                            <li class="swatch large radius available"><span class="swatchLbl" data-bs-toggle="tooltip" data-bs-placement="top" title="XL">XL</span></li>
                                        </ul>
                                    </div>
                                    <div class="product-action d-flex-wrap w-100 pt-1 mb-3 clearfix">
                                        <div class="quantity">
                                            <div class="qtyField">
                                                <a class="qtyBtn minus" href="#;"><i class="icon anm anm-minus-r" aria-hidden="true"></i></a>
                                                <input type="text" name="quantity" value="1" class="product-form__input qty">
                                                <a class="qtyBtn plus" href="#;"><i class="icon anm anm-plus-l" aria-hidden="true"></i></a>
                                            </div>
                                        </div>
                                        <div class="addtocart ms-3 fl-1">
                                            <button type="submit" name="add" class="btn product-cart-submit w-100"><span>Add to cart</span></button>
                                            <button type="submit" name="sold" class="btn btn-secondary product-sold-out w-100 d-none" disabled="disabled"><span>Sold out</span></button>
                                            <button type="submit" name="buy" class="btn btn-secondary proceed-to-checkout w-100 d-none"><span>Buy it now</span></button>
                                        </div>
                                    </div>
                                </div>
                            </form>
                            <div class="wishlist-btn d-flex-center">
                                <a class="add-wishlist d-flex-center me-3" href="wishlist-style1.html" title="Add to Wishlist"><i class="icon anm anm-heart-l me-1"></i> <span>Add to Wishlist</span></a>
                                <a class="add-compare d-flex-center" href="compare-style1.html" title="Add to Compare"><i class="icon anm anm-random-r me-2"></i> <span>Add to Compare</span></a>
                            </div>
                            <!-- Social Sharing -->
                            <div class="social-sharing share-icon d-flex-center mx-0 mt-3">
                                <span class="sharing-lbl">Share :</span>
                                <a href="#" class="d-flex-center btn btn-link btn--share share-facebook" data-bs-toggle="tooltip" data-bs-placement="top" title="Share on Facebook"><i class="icon anm anm-facebook-f"></i><span class="share-title d-none">Facebook</span></a>
                                <a href="#" class="d-flex-center btn btn-link btn--share share-twitter" data-bs-toggle="tooltip" data-bs-placement="top" title="Tweet on Twitter"><i class="icon anm anm-twitter"></i><span class="share-title d-none">Tweet</span></a>
                                <a href="#" class="d-flex-center btn btn-link btn--share share-pinterest" data-bs-toggle="tooltip" data-bs-placement="top" title="Pin on Pinterest"><i class="icon anm anm-pinterest-p"></i> <span class="share-title d-none">Pin it</span></a>
                                <a href="#" class="d-flex-center btn btn-link btn--share share-linkedin" data-bs-toggle="tooltip" data-bs-placement="top" title="Share on Instagram"><i class="icon anm anm-linkedin-in"></i><span class="share-title d-none">Instagram</span></a>
                                <a href="#" class="d-flex-center btn btn-link btn--share share-whatsapp" data-bs-toggle="tooltip" data-bs-placement="top" title="Share on WhatsApp"><i class="icon anm anm-envelope-l"></i><span class="share-title d-none">WhatsApp</span></a>
                                <a href="#" class="d-flex-center btn btn-link btn--share share-email" data-bs-toggle="tooltip" data-bs-placement="top" title="Share by Email"><i class="icon anm anm-whatsapp"></i><span class="share-title d-none">Email</span></a>
                            </div>
                            <!-- End Social Sharing -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!--End Product Quickview Modal-->

    <!-- üìè Dynamic Size Chart Modal (Printful Powered) -->
    <div class="sizechart-modal modal fade" id="sizechart_modal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-xl modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-body">
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    
                    <!-- Gu√≠as de Tallas Din√°micas -->
                    <div id="sizechart" class="sizechart-wrap">
                        <div class="d-flex justify-content-between align-items-start mb-3">
                            <div>
                                <h4 class="mb-1">üìè Gu√≠a de Tallas</h4>
                                <p class="text-muted small mb-0">Medidas reales del producto {{ product_selected?.title }}</p>
                            </div>
                            
                            <!-- Selector de Unidades estilo Printful -->
                            <div *ngIf="sizeGuideUIState.availableUnits.length > 1" class="mb-3">
                                <div class="d-flex gap-3">
                                    <div class="form-check" *ngFor="let unit of sizeGuideUIState.availableUnits">
                                        <input class="form-check-input" 
                                               type="radio" 
                                               [id]="'unit-' + unit" 
                                               [value]="unit"
                                               [(ngModel)]="sizeGuideUIState.activeUnit"
                                               (change)="onSizeGuideUnitChange(unit)">
                                        <label class="form-check-label fw-semibold" [for]="'unit-' + unit">
                                            {{ unit === 'cm' ? 'Cent√≠metros' : 'Pulgadas' }}
                                        </label>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Tabs Navigation (Estilo Printful) -->
                        <ul class="nav nav-tabs mb-4" role="tablist">
                            <li class="nav-item" *ngFor="let tab of sizeGuideTabs | keyvalue" role="presentation">
                                <button 
                                    class="nav-link"
                                    [class.active]="tab.value.key === sizeGuideUIState.activeTab"
                                    [class.disabled]="!tab.value.available"
                                    [attr.disabled]="!tab.value.available ? true : null"
                                    (click)="onSizeGuideTabChange(tab.value.key)"
                                    type="button" role="tab">
                                    {{ tab.value.title }}
                                </button>
                            </li>
                        </ul>

                        <!-- Size Tables Content -->
                        <div *ngIf="processedSizeTables.length > 0">
                            <div *ngFor="let table of processedSizeTables" class="size-guide-content">
                            
                            <!-- Descripci√≥n de la tabla -->
                            <div *ngIf="table.description" class="mb-4" [innerHTML]="table.description"></div>
                            


                            <!-- Layout estilo Printful: Imagen izquierda + Explicaciones derecha -->
                            <div class="row mb-4" *ngIf="table.image_url && table.image_description">
                                <div class="col-md-4">
                                    <img [src]="table.image_url" 
                                         class="img-fluid rounded border" 
                                         style="max-width: 100%;" 
                                         alt="Gu√≠a de medidas"
                                         loading="lazy">
                                    <small class="text-muted d-block mt-2">Imagen de referencia para medidas</small>
                                </div>
                                <div class="col-md-8">
                                    <div class="measuring-instructions" [innerHTML]="table.image_description"></div>
                                </div>
                            </div>


                            
                            <!-- T√≠tulo "Encuentra tu talla" -->
                            <h5 class="mb-3">Encuentra tu talla</h5>

                            <!-- Tabla de Medidas estilo Printful -->
                            <div class="size-chart-tbl table-responsive">
                                <table class="table">
                                    <thead>
                                        <tr class="table-secondary">
                                            <th scope="col" class="fw-bold text-dark border-end">Talla</th>
                                            <th scope="col" 
                                                class="text-center fw-bold text-dark border-end"
                                                *ngFor="let measurement of table.measurements">
                                                {{ measurement.type_label }}
                                                <span *ngIf="table.unit !== 'none'" class="small text-muted d-block">
                                                    ({{ table.unit }})
                                                </span>
                                            </th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr *ngFor="let size of getAvailableSizes(); let i = index"
                                            [class.table-primary]="size === variedad_selected?.valor"
                                            class="border-bottom">
                                            <th scope="row" class="fw-bold text-dark border-end">
                                                {{ size }}
                                                <i *ngIf="size === variedad_selected?.valor" class="fas fa-check-circle text-primary ms-1"></i>
                                            </th>
                                            <td class="text-center border-end"
                                                *ngFor="let measurement of table.measurements">
                                                <ng-container *ngFor="let value of measurement.values">
                                                    <span *ngIf="value.size === size" 
                                                          class="text-dark fw-normal">
                                                        {{ value.displayValue }}
                                                    </span>
                                                </ng-container>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                                
                                <!-- Disclaimer estilo Printful -->
                                <div class="mt-3 text-center">
                                    <small class="text-muted">
                                        <i class="fas fa-info-circle me-1"></i>
                                        Las medidas pueden variar hasta ¬±2{{ table.unit === 'cm' ? 'cm' : '"' }}.
                                    </small>
                                </div>
                            </div>

                            <!-- Tips adicionales -->
                            <div class="mt-3">
                                <div class="alert alert-warning border-0" *ngIf="sizeGuideUIState.activeTab === 'product_measure'">
                                    <i class="fas fa-lightbulb me-2"></i>
                                    <strong>Tip:</strong> Mide una prenda que ya tengas y comp√°rala con estas medidas para encontrar tu talla perfecta.
                                </div>
                                
                                <div class="alert alert-info border-0" *ngIf="sizeGuideUIState.activeTab === 'measure_yourself'">
                                    <i class="fas fa-ruler me-2"></i>
                                    <strong>Consejo:</strong> Para medidas m√°s precisas, p√≠dele ayuda a alguien y usa una cinta m√©trica flexible.
                                </div>

                                <div class="alert alert-secondary border-0" *ngIf="sizeGuideUIState.activeTab === 'international'">
                                    <i class="fas fa-globe me-2"></i>
                                    <strong>Conversi√≥n:</strong> Estas equivalencias pueden variar ligeramente entre marcas. Ante la duda, consulta las otras gu√≠as.
                                </div>
                            </div>
                        </div>

                        <!-- Tallas disponibles para este producto -->
                        <div class="mt-4 p-3 bg-light rounded">
                            <h6 class="fw-semibold mb-2">
                                <i class="fas fa-check-circle text-success me-2"></i>
                                Tallas disponibles para este producto:
                            </h6>
                            <div class="d-flex flex-wrap gap-2">
                                <span class="badge bg-outline-primary border border-primary px-3 py-2"
                                      [class.bg-primary]="size === variedad_selected?.valor"
                                      [class.text-white]="size === variedad_selected?.valor"
                                      *ngFor="let size of getAvailableSizes()">
                                    {{ size }}
                                </span>
                            </div>
                            <small class="text-muted d-block mt-2">
                                üí° Las medidas pueden variar hasta 2" (5cm) seg√∫n el proveedor
                            </small>
                        </div>
                    </div>

                    <!-- Fallback: Si no hay gu√≠as din√°micas, mostrar mensaje -->
                    <div *ngIf="!hasSizeGuides()" class="text-center py-5">
                        <i class="fas fa-ruler fa-3x text-muted mb-3"></i>
                        <h5 class="text-muted">No hay gu√≠as de tallas disponibles</h5>
                        <p class="text-muted">
                            Este producto no tiene gu√≠as de medidas espec√≠ficas.<br>
                            Por favor, consulta la descripci√≥n del producto o cont√°ctanos para m√°s informaci√≥n.
                        </p>
                        <small class="text-muted">
                            Producto: {{ product_selected?.title }}
                        </small>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- End Dynamic Size Chart Modal -->

    <!-- Shipping Modal -->
    <div class="shippingInfo-modal modal fade" id="shippingInfo_modal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-lg modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-body">
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    <div id="ShippingInfo" class="shippingInfo-wrap">
                        <h4 class="pb-1">Delivery</h4>
                        <ul class="checkmark-info mb-3">
                            <li>Dispatch: Within 24 Hours</li>
                            <li>1 Year Brand Warranty</li>
                            <li>Free shipping across all products on a minimum purchase of $50</li>
                            <li>International delivery time - 7-10 business days</li>
                            <li>Cash on delivery might be available</li>
                            <li>Easy 30 days returns and exchanges</li>
                            <li>All orders shipped with UPS Express</li>
                            <li>All orders are shipped with a UPS tracking number</li>
                        </ul>
                        <h4 class="pt-1">Returns</h4>
                        <p>If you do not like the product you can return it within 15 days - no questions asked. This excludes bodysuits, swimwear and clearance sale items. We have an easy and hassle free return policy. Please look at our Delivery & Returns section for further information.</p>
                        <h4 class="pt-1">Help</h4>
                        <ul class="list-info">
                            <li>Give us a shout if you have any other questions and/or concerns.</li>
                            <li class="my-1"><strong>Email:</strong> <a href="mailto:contact@example.com"><span class="email">contactgmail.com</span></a></li>
                            <li><strong>Phone:</strong> <a href="tel:401234567890">(+40) 123 456 7890</a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!--End Shipping Modal-->

    <!--Product Enuiry Modal-->
    <div class="productInquiry-modal modal fade" id="productInquiry_modal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-lg modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-body">
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    <div id="productInquiry" class="productInquiry-wrap">
                        <div class="page-title"><h3 class="mb-3">Product Inquiry Popup</h3></div>
                        <form method="post" action="#" id="productInquiry_form" class="productInquiry-form form-vertical">
                            <div class="form-row">
                                <div class="col-12 col-sm-12 col-md-12 col-lg-12">
                                    <div class="form-group">
                                        <input type="text" id="ContactFormName" name="contact[name]" placeholder="Name" value="" required />
                                    </div>
                                </div>
                                <div class="col-12 col-sm-12 col-md-6 col-lg-6">
                                    <div class="form-group">
                                        <input type="email" id="ContactFormEmail" name="contact[email]" placeholder="Email" value="" required />
                                    </div>
                                </div>
                                <div class="col-12 col-sm-12 col-md-6 col-lg-6">
                                    <div class="form-group">
                                        <input type="tel" id="ContactFormPhone" name="contact[phone]" pattern="[0-9\-]*" placeholder="Phone Number" value="" required />
                                    </div>
                                </div>
                                <div class="col-12 col-sm-12 col-md-12 col-lg-12">
                                    <div class="form-group">
                                        <input type="text" id="ContactFormSubject" name="contact[subject]" placeholder="Subject" value="" required />
                                    </div>
                                </div>
                                <div class="col-12 col-sm-12 col-md-12 col-lg-12">
                                    <div class="form-group">
                                        <textarea rows="4" id="ContactFormMessage" name="contact[body]" placeholder="Message" required></textarea>
                                    </div>
                                </div>
                                <div class="col-12 col-sm-12 col-md-12 col-lg-12">
                                    <input type="submit" class="btn btn-lg w-100" value="Send Message" />
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!--End Product Enuiry Modal-->

    <!--Product Video Modal-->
    <div class="productVideo-modal modal fade" id="productVideo_modal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-lg modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-body p-0">
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    <div class="ratio ratio-16x9 productVideo-wrap">
                        <iframe src="https://www.youtube.com/embed/NpEaa2P7qZI" title="YouTube video" allowfullscreen></iframe>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!--End Product Video Modal-->

    <!-- Sticky Cart -->
    <div class="stickyCart" *ngIf="showStickyCart && variedades?.length">
        <div class="container">
            <form method="post" action="#" id="stickycart-form" class="d-flex-center justify-content-center">
                <div class="product-featured-img">
                    <img class="blur-up lazyload" [attr.data-src]="firstImage" [src]="firstImage" alt="product" width="120" height="170" />
                </div>
                <div class="sticky-title ms-2 ps-1 text-secondary fw-bold text-uppercase pe-5" style="font-size: 12;">{{ product_selected.title }}</div>
                <div class="stickyOptions position-relative" [ngClass]="{'border border-danger': tallaError}">
                    <!-- <div class="selectedOpt text-uppercase fw-light">Seleccionar</div> -->
                     <div class="selectedOpt text-uppercase fw-light" (click)="toggleOptions()">
                        {{ variedad_selected ? variedad_selected.color + ' / ' + variedad_selected.valor : 'Seleccionar' }}
                    </div>
                    <ul [ngClass]="{'d-block': showOptions, 'd-none': !showOptions}">
                        <li 
                            *ngFor="let variedad of variedades; let i = index"
                            class="vrOpt" 
                            data-val="31677941252156" 
                            data-no="0" 
                            [ngClass]="{ 
                                'available': variedad.stock > 0, 
                                'soldout': variedad.stock === 0, 
                                'active': variedad.valor === variedad_selected?.valor
                            }" 
                            (click)="selectedVariedad(variedad, i)"
                        >
                                {{variedad.color}} / {{variedad.valor}} - {{ product_selected.price_usd }} {{ euro }}
                        </li>
                        
                    </ul>
                </div>

                <div class="qtyField mx-2 bg-black" [ngClass]="{'border border-danger': cantidadError}">
                    <a class="qtyBtn minus" 
                       href="#;" 
                       (click)="decrementQty(); $event.preventDefault()"
                       style="transition: all 0.2s ease;"
                       onmouseover="this.style.opacity='0.7'"
                       onmouseout="this.style.opacity='1'">
                        <i class="icon anm anm-minus-r"></i>
                    </a>
                    <input type="text" 
                           name="quantity" 
                           [(ngModel)]="cantidad" 
                           class="product-form-input qty border-0" 
                           style="font-weight: 600;" />
                    <a class="qtyBtn plus" 
                       href="#;" 
                       (click)="incrementQty(); $event.preventDefault()"
                       style="transition: all 0.2s ease;"
                       onmouseover="this.style.opacity='0.7'"
                       onmouseout="this.style.opacity='1'">
                        <i class="icon anm anm-plus-r"></i>
                    </a>
                </div>

                <div class="stickyOptions position-relative">
                    <button type="submit" 
                            name="add" 
                            class="btn-dark-ld text-uppercase fw-semibold px-4 py-2" 
                            (click)="storeCart()"
                            style="letter-spacing: 0.5px; border-radius: 6px; transition: all 0.3s ease;">
                        <i class="icon anm anm-bag-l me-2"></i>
                        <span>A√±adir</span>
                    </button>
                </div>


                <!-- <div class="qtyField mx-2 bg-black" [ngClass]="{'border border-danger': cantidadError}">
                    <a class="qtyBtn minus" href="#;" onclick="return false;"><i class="icon anm anm-minus-r"></i></a>
                    <input type="text" name="quantity" value="1" id="qty-cart" class="product-form-input qty border-0" />
                    <a class="qtyBtn plus" href="#;" onclick="return false;"><i class="icon anm anm-plus-r"></i></a>
                </div>
                <div class="stickyOptions position-relative">
                     <button type="submit" name="add" class="btn-dark-ld product-form-cart-submit text-uppercase" (click)="storeCart()">
                        <span class="fw-normal">A√±adir</span>
                    </button>
                </div> -->
               
            </form>
        </div>
    </div>
    <!-- End Sticky Cart -->

    <!--MiniColor Drawer-->
    <app-mini-color-drawer
    [coloresDisponibles]="coloresDisponibles"
    [selectedColor]="selectedColor"
    (colorSelected)="onColorSeleccionado($event)">
    </app-mini-color-drawer>
    <!-- Fin MiniColor Drawer -->

    <app-mini-size-drawer
    [variedades]="variedades"
    [variedad_selected]="variedad_selected"
    [selectedColor]="selectedColor"
    [tallaError]="tallaError"
    (variedadSeleccionada)="selectedVariedad($event.variedad, $event.index)">
    </app-mini-size-drawer>

    <div class="pswp" tabindex="-1" role="dialog">
        <div class="pswp__bg"></div>
        <div class="pswp__scroll-wrap">
            <div class="pswp__container">
                <div class="pswp__item"></div>
                <div class="pswp__item"></div>
                <div class="pswp__item"></div>
            </div>
            <div class="pswp__ui pswp__ui--hidden">
                <div class="pswp__top-bar">
                    <div class="pswp__counter"></div>
                    <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
                    <button class="pswp__button pswp__button--share" title="Share"></button>
                    <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
                    <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
                    <div class="pswp__preloader">
                        <div class="pswp__preloader__icn">
                            <div class="pswp__preloader__cut">
                                <div class="pswp__preloader__donut"></div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                    <div class="pswp__share-tooltip"></div>
                </div>
                <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)"></button>
                <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button>
                <div class="pswp__caption"><div class="pswp__caption__center"></div></div>
            </div>
        </div>
    </div>
</div>
<!--End Page Wrapper-->